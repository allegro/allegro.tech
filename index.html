<!DOCTYPE html><html lang="pl"><head><meta charSet="utf-8"/><link rel="prefetch" href="https://allegrotechio.disqus.com/count.js"/><meta name="viewport" content="initial-scale=1.0, width=device-width"/><meta name="description" content="Allegro Tech to miejsce, w którym nasi inżynierowie dzielą się wiedzą oraz case study z wybranych projektów w firmie - w formie artykułów, podcastów oraz eventów."/><title>Allegro Tech</title><meta property="og:site_name" content="allegro.tech"/><meta property="og:title" content="allegro.tech"/><meta property="og:url" content="https://allegro.tech"/><meta property="og:type" content="site"/><meta property="og:image" content="https://allegro.tech/images/allegro-tech.png"/><link rel="shortcut icon" href="favicon.ico"/><link rel="canonical" href="https://allegro.tech" itemProp="url"/><link rel="preload" href="images/splash.jpg" as="image"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-1M1FJ5PXWW"></script><script>
                    window.dataLayer = window.dataLayer || [];
                    function gtag(){dataLayer.push(arguments);}
                    gtag('js', new Date());
                    gtag('config', 'G-1M1FJ5PXWW');
                </script><meta name="next-head-count" content="15"/><link rel="preload" href="/_next/static/css/06826a1f52822e398cec.css" as="style"/><link rel="stylesheet" href="/_next/static/css/06826a1f52822e398cec.css" data-n-g=""/><link rel="preload" href="/_next/static/css/c21d9e3ec004472184df.css" as="style"/><link rel="stylesheet" href="/_next/static/css/c21d9e3ec004472184df.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-a40ef1678bae11e696dba45124eadd70.js"></script><script src="/_next/static/chunks/webpack-fb76148cfcfb42ca18eb.js" defer=""></script><script src="/_next/static/chunks/framework-0441fae7fd130f37dee1.js" defer=""></script><script src="/_next/static/chunks/main-18f21ab86863c15f7e5d.js" defer=""></script><script src="/_next/static/chunks/pages/_app-7f59b0547fcfd7939f7d.js" defer=""></script><script src="/_next/static/chunks/682-97b125405c243e8ea066.js" defer=""></script><script src="/_next/static/chunks/pages/index-46ee502816c6919ffdf5.js" defer=""></script><script src="/_next/static/QRY2s86BGNNZ02zKRbDh8/_buildManifest.js" defer=""></script><script src="/_next/static/QRY2s86BGNNZ02zKRbDh8/_ssgManifest.js" defer=""></script></head><body><div id="__next"><header class="m-padding-top_16 m-padding-top_24_lg m-padding-right_16 m-padding-right_24_lg m-padding-bottom_16 m-padding-bottom_24_lg m-padding-left_16 m-padding-left_24_lg m-card Header_navbar__2vWRp m-color-bg_card"><nav class="m-width-max_1600 m-margin-left_auto m-margin-right_auto m-display-flex m-flex-justify-between m-flex-items-center"><a href="/"><img src="images/logo.svg" alt="Allegro Tech" width="205" height="45"/></a><div><ul class="m-font-family_sans m-font-size_14 m-line-height_21 m-color_text m-text-size-adjust_100p m-list-style-type_none m-margin-top_0 m-margin-right_0 m-margin-bottom_0 m-margin-left_0 m-padding-top_0 m-padding-right_0 m-padding-bottom_0 m-padding-left_0 m-display-flex@lg m-display-none"><li class="m-margin-left-16@lg"><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-display-block m-display-inline@lg m-padding-left-16 m-padding-right-16 m-padding-top-16 m-padding-bottom-16 m-padding-left-0@lg m-padding-top-0@lg m-padding-right-0@lg m-padding-bottom-0@lg m-link--signal m-line-height_21" href="https://blog.allegro.tech">Blog</a></li><li class="m-margin-left-16@lg"><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-display-block m-display-inline@lg m-padding-left-16 m-padding-right-16 m-padding-top-16 m-padding-bottom-16 m-padding-left-0@lg m-padding-top-0@lg m-padding-right-0@lg m-padding-bottom-0@lg m-link--signal m-line-height_21" href="https://ml.allegro.tech">Machine Learning</a></li><li class="m-margin-left-16@lg"><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-display-block m-display-inline@lg m-padding-left-16 m-padding-right-16 m-padding-top-16 m-padding-bottom-16 m-padding-left-0@lg m-padding-top-0@lg m-padding-right-0@lg m-padding-bottom-0@lg m-link--signal m-line-height_21" href="https://podcast.allegro.tech">Podcast</a></li><li class="m-margin-left-16@lg"><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-display-block m-display-inline@lg m-padding-left-16 m-padding-right-16 m-padding-top-16 m-padding-bottom-16 m-padding-left-0@lg m-padding-top-0@lg m-padding-right-0@lg m-padding-bottom-0@lg m-link--signal m-line-height_21" href="https://github.com/Allegro">Open Source</a></li><li class="m-margin-left-16@lg"><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-display-block m-display-inline@lg m-padding-left-16 m-padding-right-16 m-padding-top-16 m-padding-bottom-16 m-padding-left-0@lg m-padding-top-0@lg m-padding-right-0@lg m-padding-bottom-0@lg m-link--signal m-line-height_21" href="https://www.meetup.com/allegrotech/events">Wydarzenia</a></li><li class="m-margin-left-16@lg"><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-display-block m-display-inline@lg m-padding-left-16 m-padding-right-16 m-padding-top-16 m-padding-bottom-16 m-padding-left-0@lg m-padding-top-0@lg m-padding-right-0@lg m-padding-bottom-0@lg m-link--signal m-line-height_21" href="https://praca.allegro.pl">Praca</a></li></ul><button class="m-display-none@lg m-height_40 m-line-height_40 m-border-style-top_none m-border-style-right_none m-border-style-bottom_none m-border-style-left_none m-border-radius-top-left_2 m-border-radius-top-right_2 m-border-radius-bottom-left_2 m-border-radius-bottom-right_2 m-cursor_pointer m-overflow_hidden m-appearance_none m-padding-left_4 m-padding-right_4 m-padding-top_4 m-padding-bottom_4 m-outline-style_dotted--focus m-outline-width_2 m-outline-color_teal m-outline-offset_n2 m-button" style="background:transparent" aria-label="Otwórz menu"><img src="https://assets.allegrostatic.com/metrum/icon/menu-23e046bf68.svg" alt="" class="m-icon" width="32" height="32"/></button></div></nav></header><div class="Header_hero__n5PN5"><div class="m-width-max_1600 m-margin-left_auto m-margin-right_auto m-display-flex m-flex-column m-flex-justify-end Header_image__15JNc"><div class="m-padding-top_16 m-padding-top_24_lg m-padding-right_16 m-padding-right_24_lg m-padding-bottom_16 m-padding-bottom_24_lg m-padding-left_16 m-padding-left_24_lg m-card m-color-bg_desk"><h2 class="m-font-family_roboto m-margin-left_0 m-margin-right_0 m-margin-top_0 m-color_text  m-font-weight_100 m-font-size_32 m-font-size_43_sm m-margin-bottom_16 m-margin-bottom_24_sm m-line-height_125">O nas</h2><p class="m-font-family_sans m-line-height_21 m-font-size_14 m-text-size-adjust_100p m-margin-top_0 m-margin-right_0 m-margin-bottom_0 m-margin-left_0 m-color_text">Allegro to jedna z najbardziej zaawansowanych technologicznie firm w naszej części Europy. Allegro to również ponad 1000 specjalistów IT, różnych specjalizacji, rozwijających nasz serwis. Unikatowa skala i złożoność problemów, które rozwiązujemy na co dzień, dają nam możliwość rozwoju przy bardzo różnorodnych projektach. Allegro Tech to miejsce, w którym nasi inżynierowie dzielą się wiedzą oraz case study z wybranych projektów w firmie – w formie artykułów, podcastów oraz eventów.</p></div></div></div><div class="m-width-max_1600 m-margin-left_auto m-margin-right_auto m-padding-top-24"><h2 class="m-font-family_roboto m-margin-left_0 m-margin-right_0 m-margin-top_0 m-color_text m-font-weight_300 m-font-size_27 m-font-size_36_sm m-margin-bottom_16 m-margin-bottom_24_sm m-line-height_125 m-padding-left-24 m-padding-right-24">Blog</h2><div class="m-display_flex m-flex-wrap_1 m-flex-grow_1 m-grid"><div class="m-grid__col m-grid__col--12 m-grid__col--6@sm m-grid__col--3@xl m-display-flex m-flex-direction_column"><article class="m-margin-bottom_16 m-display-flex m-flex-column m-flex-grow_1"><a href="https://blog.allegro.tech/2022/01/shrinking-size-of-monorepo.html" title="Shrinking the size of a monorepo"><img width="388" src="images/post-headers/ios.png" alt="Shrinking the size of a monorepo" class="m-display-block m-width-fluid"/></a><div class="m-padding-top_16 m-padding-top_24_lg m-padding-right_16 m-padding-right_24_lg m-padding-left_16 m-padding-left_24_lg m-card m-display-flex m-flex-column m-flex-grow_1 m-padding-bottom-0 m-color-bg_card"><a href="https://blog.allegro.tech/2022/01/shrinking-size-of-monorepo.html" title="Shrinking the size of a monorepo" class="m-text-decoration_none"><h2 class="m-font-family_roboto m-margin-left_0 m-margin-right_0 m-margin-top_0 m-color_text m-font-weight_500 m-line-height_130 m-margin-bottom_8 m-margin-bottom_16_sm m-font-size_21 m-font-size_25_sm" style="text-overflow:ellipsis;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;min-height:2em;overflow:hidden">Shrinking the size of a monorepo</h2></a><time class="m-font-family_sans m-line-height_21 m-font-size_14 m-text-size-adjust_100p m-margin-top_0 m-margin-right_0 m-margin-bottom_0 m-margin-left_0 m-color_text m-padding-bottom-16">około 14 godzin temu</time><ul class="m-font-family_sans m-font-size_14 m-line-height_21 m-color_text m-text-size-adjust_100p m-list-style-type_none m-margin-top_0 m-margin-right_0 m-margin-bottom_0 m-margin-left_0 m-padding-top_0 m-padding-right_0 m-padding-bottom_0 m-padding-left_0"><li class="m-margin-right-8 m-display-inline-block"><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-line-height_21" href="https://twitter.com/hashtag/tech">#<!-- -->tech</a></li><li class="m-margin-right-8 m-display-inline-block"><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-line-height_21" href="https://twitter.com/hashtag/ios">#<!-- -->ios</a></li><li class="m-margin-right-8 m-display-inline-block"><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-line-height_21" href="https://twitter.com/hashtag/git">#<!-- -->git</a></li><li class="m-margin-right-8 m-display-inline-block"><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-line-height_21" href="https://twitter.com/hashtag/mobile">#<!-- -->mobile</a></li><li class="m-margin-right-8 m-display-inline-block"><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-line-height_21" href="https://twitter.com/hashtag/swift">#<!-- -->swift</a></li><li class="m-margin-right-8 m-display-inline-block"><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-line-height_21" href="https://twitter.com/hashtag/objectivec">#<!-- -->objectivec</a></li></ul><p class="m-font-family_sans m-line-height_21 m-font-size_14 m-text-size-adjust_100p m-margin-top_0 m-margin-right_0 m-margin-bottom_0 m-margin-left_0 m-color_text m-flex-grow-1 m-padding-top-16">The source code of Allegro iOS app for buyers used to be divided into separate modules hosted in multiple repositories
(polyrepo). The
source code was migrated to…</p><div class="m-display-flex m-flex-justify-between m-padding-top-16 m-flex-items_center"><div class="m-display-flex m-flex-items_center"><div class="MuiAvatarGroup-root m-padding-right_16 Post_avatars__1CeVw"><div class="MuiAvatar-root MuiAvatar-circle MuiAvatarGroup-avatar" style="z-index:1"><img alt="Maciej Piotrowski" src="https://blog.allegro.tech/img/authors/maciej.piotrowski.jpg" class="MuiAvatar-img" width="32" height="32"/></div></div><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-line-height_21" href="https://blog.allegro.tech/authors/maciej.piotrowski">Maciej Piotrowski</a></div><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-line-height_21" href="https://blog.allegro.tech/2022/01/shrinking-size-of-monorepo.html#disqus_thread">0 Comments</a></div><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-margin-top-16 m-display_block m-border-width_1 m-border-color_gray m-border-style-top_solid m-height_40 m-line-height_40 m-text-transform_uppercase m-letter-spacing_2 m-white-space_nowrap m-cursor_pointer m-overflow_hidden m-padding-left_16 m-padding-right_16 m-padding-top_0 m-padding-bottom_0 m-outline-style_dotted--focus m-outline-width_2 m-outline-color_teal m-outline-offset_n2 m-button m-box_border m-text-align_center m-display_inline-block m-color_secondary m-background-position_50p m-background-size_5000p m-transition-property_background-color m-transition-duration_fast m-button--secondary" href="https://blog.allegro.tech/2022/01/shrinking-size-of-monorepo.html">przejdź do wpisu</a></div></article></div><div class="m-grid__col m-grid__col--12 m-grid__col--6@sm m-grid__col--3@xl m-display-flex m-flex-direction_column"><article class="m-margin-bottom_16 m-display-flex m-flex-column m-flex-grow_1"><a href="https://blog.allegro.tech/2021/12/performance-evaluation-of-timeseries.html" title="Evaluating performance of time series collections"><img width="388" src="images/post-headers/mongodb.png" alt="Evaluating performance of time series collections" class="m-display-block m-width-fluid"/></a><div class="m-padding-top_16 m-padding-top_24_lg m-padding-right_16 m-padding-right_24_lg m-padding-left_16 m-padding-left_24_lg m-card m-display-flex m-flex-column m-flex-grow_1 m-padding-bottom-0 m-color-bg_card"><a href="https://blog.allegro.tech/2021/12/performance-evaluation-of-timeseries.html" title="Evaluating performance of time series collections" class="m-text-decoration_none"><h2 class="m-font-family_roboto m-margin-left_0 m-margin-right_0 m-margin-top_0 m-color_text m-font-weight_500 m-line-height_130 m-margin-bottom_8 m-margin-bottom_16_sm m-font-size_21 m-font-size_25_sm" style="text-overflow:ellipsis;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;min-height:2em;overflow:hidden">Evaluating performance of time series collections</h2></a><time class="m-font-family_sans m-line-height_21 m-font-size_14 m-text-size-adjust_100p m-margin-top_0 m-margin-right_0 m-margin-bottom_0 m-margin-left_0 m-color_text m-padding-bottom-16">24 dni temu</time><ul class="m-font-family_sans m-font-size_14 m-line-height_21 m-color_text m-text-size-adjust_100p m-list-style-type_none m-margin-top_0 m-margin-right_0 m-margin-bottom_0 m-margin-left_0 m-padding-top_0 m-padding-right_0 m-padding-bottom_0 m-padding-left_0"><li class="m-margin-right-8 m-display-inline-block"><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-line-height_21" href="https://twitter.com/hashtag/tech">#<!-- -->tech</a></li><li class="m-margin-right-8 m-display-inline-block"><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-line-height_21" href="https://twitter.com/hashtag/mongodb">#<!-- -->mongodb</a></li><li class="m-margin-right-8 m-display-inline-block"><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-line-height_21" href="https://twitter.com/hashtag/performance">#<!-- -->performance</a></li><li class="m-margin-right-8 m-display-inline-block"><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-line-height_21" href="https://twitter.com/hashtag/time series">#<!-- -->time series</a></li></ul><p class="m-font-family_sans m-line-height_21 m-font-size_14 m-text-size-adjust_100p m-margin-top_0 m-margin-right_0 m-margin-bottom_0 m-margin-left_0 m-color_text m-flex-grow-1 m-padding-top-16">A few years ago, I was working on a new version of Allegro purchase ratings.
It was a time of a pretty large revolution in the…</p><div class="m-display-flex m-flex-justify-between m-padding-top-16 m-flex-items_center"><div class="m-display-flex m-flex-items_center"><div class="MuiAvatarGroup-root m-padding-right_16 Post_avatars__1CeVw"><div class="MuiAvatar-root MuiAvatar-circle MuiAvatarGroup-avatar" style="z-index:1"><img alt="Michał Knasiecki" src="https://blog.allegro.tech/img/authors/michal.knasiecki.jpg" class="MuiAvatar-img" width="32" height="32"/></div></div><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-line-height_21" href="https://blog.allegro.tech/authors/michal.knasiecki">Michał Knasiecki</a></div><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-line-height_21" href="https://blog.allegro.tech/2021/12/performance-evaluation-of-timeseries.html#disqus_thread">0 Comments</a></div><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-margin-top-16 m-display_block m-border-width_1 m-border-color_gray m-border-style-top_solid m-height_40 m-line-height_40 m-text-transform_uppercase m-letter-spacing_2 m-white-space_nowrap m-cursor_pointer m-overflow_hidden m-padding-left_16 m-padding-right_16 m-padding-top_0 m-padding-bottom_0 m-outline-style_dotted--focus m-outline-width_2 m-outline-color_teal m-outline-offset_n2 m-button m-box_border m-text-align_center m-display_inline-block m-color_secondary m-background-position_50p m-background-size_5000p m-transition-property_background-color m-transition-duration_fast m-button--secondary" href="https://blog.allegro.tech/2021/12/performance-evaluation-of-timeseries.html">przejdź do wpisu</a></div></article></div><div class="m-grid__col m-grid__col--12 m-grid__col--6@sm m-grid__col--3@xl m-display-flex m-flex-direction_column"><article class="m-margin-bottom_16 m-display-flex m-flex-column m-flex-grow_1"><a href="https://blog.allegro.tech/2021/12/clean-architecture-story.html" title="Clean Architecture Story"><img width="388" src="images/post-headers/default.jpg" alt="Clean Architecture Story" class="m-display-block m-width-fluid"/></a><div class="m-padding-top_16 m-padding-top_24_lg m-padding-right_16 m-padding-right_24_lg m-padding-left_16 m-padding-left_24_lg m-card m-display-flex m-flex-column m-flex-grow_1 m-padding-bottom-0 m-color-bg_card"><a href="https://blog.allegro.tech/2021/12/clean-architecture-story.html" title="Clean Architecture Story" class="m-text-decoration_none"><h2 class="m-font-family_roboto m-margin-left_0 m-margin-right_0 m-margin-top_0 m-color_text m-font-weight_500 m-line-height_130 m-margin-bottom_8 m-margin-bottom_16_sm m-font-size_21 m-font-size_25_sm" style="text-overflow:ellipsis;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;min-height:2em;overflow:hidden">Clean Architecture Story</h2></a><time class="m-font-family_sans m-line-height_21 m-font-size_14 m-text-size-adjust_100p m-margin-top_0 m-margin-right_0 m-margin-bottom_0 m-margin-left_0 m-color_text m-padding-bottom-16">około miesiąc temu</time><ul class="m-font-family_sans m-font-size_14 m-line-height_21 m-color_text m-text-size-adjust_100p m-list-style-type_none m-margin-top_0 m-margin-right_0 m-margin-bottom_0 m-margin-left_0 m-padding-top_0 m-padding-right_0 m-padding-bottom_0 m-padding-left_0"><li class="m-margin-right-8 m-display-inline-block"><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-line-height_21" href="https://twitter.com/hashtag/tech">#<!-- -->tech</a></li><li class="m-margin-right-8 m-display-inline-block"><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-line-height_21" href="https://twitter.com/hashtag/architecture">#<!-- -->architecture</a></li><li class="m-margin-right-8 m-display-inline-block"><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-line-height_21" href="https://twitter.com/hashtag/clean-architecture">#<!-- -->clean-architecture</a></li><li class="m-margin-right-8 m-display-inline-block"><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-line-height_21" href="https://twitter.com/hashtag/ddd">#<!-- -->ddd</a></li><li class="m-margin-right-8 m-display-inline-block"><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-line-height_21" href="https://twitter.com/hashtag/kotlin">#<!-- -->kotlin</a></li></ul><p class="m-font-family_sans m-line-height_21 m-font-size_14 m-text-size-adjust_100p m-margin-top_0 m-margin-right_0 m-margin-bottom_0 m-margin-left_0 m-color_text m-flex-grow-1 m-padding-top-16">The Clean Architecture concept has been
around for some time and keeps surfacing in one place or another, yet it is not widely adopted. In this…</p><div class="m-display-flex m-flex-justify-between m-padding-top-16 m-flex-items_center"><div class="m-display-flex m-flex-items_center"><div class="MuiAvatarGroup-root m-padding-right_16 Post_avatars__1CeVw"><div class="MuiAvatar-root MuiAvatar-circle MuiAvatarGroup-avatar" style="z-index:1"><img alt="Michał Kowalcze" src="https://blog.allegro.tech/img/authors/michal.kowalcze.jpg" class="MuiAvatar-img" width="32" height="32"/></div></div><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-line-height_21" href="https://blog.allegro.tech/authors/michal.kowalcze">Michał Kowalcze</a></div><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-line-height_21" href="https://blog.allegro.tech/2021/12/clean-architecture-story.html#disqus_thread">0 Comments</a></div><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-margin-top-16 m-display_block m-border-width_1 m-border-color_gray m-border-style-top_solid m-height_40 m-line-height_40 m-text-transform_uppercase m-letter-spacing_2 m-white-space_nowrap m-cursor_pointer m-overflow_hidden m-padding-left_16 m-padding-right_16 m-padding-top_0 m-padding-bottom_0 m-outline-style_dotted--focus m-outline-width_2 m-outline-color_teal m-outline-offset_n2 m-button m-box_border m-text-align_center m-display_inline-block m-color_secondary m-background-position_50p m-background-size_5000p m-transition-property_background-color m-transition-duration_fast m-button--secondary" href="https://blog.allegro.tech/2021/12/clean-architecture-story.html">przejdź do wpisu</a></div></article></div><div class="m-grid__col m-grid__col--12 m-grid__col--6@sm m-grid__col--3@xl m-display-flex m-flex-direction_column"><article class="m-margin-bottom_16 m-display-flex m-flex-column m-flex-grow_1"><a href="https://blog.allegro.tech/2021/12/choose-your-skills.html" title="Which skills to choose in order to be more valuable"><img width="388" src="images/post-headers/default.jpg" alt="Which skills to choose in order to be more valuable" class="m-display-block m-width-fluid"/></a><div class="m-padding-top_16 m-padding-top_24_lg m-padding-right_16 m-padding-right_24_lg m-padding-left_16 m-padding-left_24_lg m-card m-display-flex m-flex-column m-flex-grow_1 m-padding-bottom-0 m-color-bg_card"><a href="https://blog.allegro.tech/2021/12/choose-your-skills.html" title="Which skills to choose in order to be more valuable" class="m-text-decoration_none"><h2 class="m-font-family_roboto m-margin-left_0 m-margin-right_0 m-margin-top_0 m-color_text m-font-weight_500 m-line-height_130 m-margin-bottom_8 m-margin-bottom_16_sm m-font-size_21 m-font-size_25_sm" style="text-overflow:ellipsis;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;min-height:2em;overflow:hidden">Which skills to choose in order to be more valuable</h2></a><time class="m-font-family_sans m-line-height_21 m-font-size_14 m-text-size-adjust_100p m-margin-top_0 m-margin-right_0 m-margin-bottom_0 m-margin-left_0 m-color_text m-padding-bottom-16">około miesiąc temu</time><ul class="m-font-family_sans m-font-size_14 m-line-height_21 m-color_text m-text-size-adjust_100p m-list-style-type_none m-margin-top_0 m-margin-right_0 m-margin-bottom_0 m-margin-left_0 m-padding-top_0 m-padding-right_0 m-padding-bottom_0 m-padding-left_0"><li class="m-margin-right-8 m-display-inline-block"><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-line-height_21" href="https://twitter.com/hashtag/tech">#<!-- -->tech</a></li><li class="m-margin-right-8 m-display-inline-block"><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-line-height_21" href="https://twitter.com/hashtag/education">#<!-- -->education</a></li><li class="m-margin-right-8 m-display-inline-block"><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-line-height_21" href="https://twitter.com/hashtag/skills">#<!-- -->skills</a></li><li class="m-margin-right-8 m-display-inline-block"><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-line-height_21" href="https://twitter.com/hashtag/startup">#<!-- -->startup</a></li><li class="m-margin-right-8 m-display-inline-block"><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-line-height_21" href="https://twitter.com/hashtag/lean startup">#<!-- -->lean startup</a></li><li class="m-margin-right-8 m-display-inline-block"><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-line-height_21" href="https://twitter.com/hashtag/mvp">#<!-- -->mvp</a></li></ul><p class="m-font-family_sans m-line-height_21 m-font-size_14 m-text-size-adjust_100p m-margin-top_0 m-margin-right_0 m-margin-bottom_0 m-margin-left_0 m-color_text m-flex-grow-1 m-padding-top-16">At some point in your career, you realize that it’s time to try to advance through the hierarchy. You think you are
doing a good job.…</p><div class="m-display-flex m-flex-justify-between m-padding-top-16 m-flex-items_center"><div class="m-display-flex m-flex-items_center"><div class="MuiAvatarGroup-root m-padding-right_16 Post_avatars__1CeVw"><div class="MuiAvatar-root MuiAvatar-circle MuiAvatarGroup-avatar" style="z-index:1"><img alt="Piotr Prusiński" src="https://blog.allegro.tech/img/authors/piotr.prusinski.jpg" class="MuiAvatar-img" width="32" height="32"/></div></div><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-line-height_21" href="https://blog.allegro.tech/authors/piotr.prusinski">Piotr Prusiński</a></div><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-line-height_21" href="https://blog.allegro.tech/2021/12/choose-your-skills.html#disqus_thread">0 Comments</a></div><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-margin-top-16 m-display_block m-border-width_1 m-border-color_gray m-border-style-top_solid m-height_40 m-line-height_40 m-text-transform_uppercase m-letter-spacing_2 m-white-space_nowrap m-cursor_pointer m-overflow_hidden m-padding-left_16 m-padding-right_16 m-padding-top_0 m-padding-bottom_0 m-outline-style_dotted--focus m-outline-width_2 m-outline-color_teal m-outline-offset_n2 m-button m-box_border m-text-align_center m-display_inline-block m-color_secondary m-background-position_50p m-background-size_5000p m-transition-property_background-color m-transition-duration_fast m-button--secondary" href="https://blog.allegro.tech/2021/12/choose-your-skills.html">przejdź do wpisu</a></div></article></div></div><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-display_block m-margin-bottom_8 m-width_100 m-height_40 m-line-height_40 m-text-transform_uppercase m-letter-spacing_2 m-white-space_nowrap m-cursor_pointer m-overflow_hidden m-padding-left_16 m-padding-right_16 m-padding-top_0 m-padding-bottom_0 m-outline-style_dotted--focus m-outline-width_2 m-outline-color_teal m-outline-offset_n2 m-button m-box_border m-text-align_center m-display_inline-block m-color_secondary m-background-position_50p m-background-size_5000p m-transition-property_background-color m-transition-duration_fast m-button--secondary" href="https://blog.allegro.tech">Zobacz więcej wpisów</a></div><div class="m-width-max_1600 m-margin-left_auto m-margin-right_auto m-padding-top-24"><h2 class="m-font-family_roboto m-margin-left_0 m-margin-right_0 m-margin-top_0 m-color_text m-font-weight_300 m-font-size_27 m-font-size_36_sm m-margin-bottom_16 m-margin-bottom_24_sm m-line-height_125 m-padding-left-24 m-padding-right-24">Podcasty</h2><div class="m-display_flex m-flex-wrap_1 m-flex-grow_1 m-grid"><div class="m-grid__col m-grid__col--12 m-grid__col--6@sm m-grid__col--3@xl m-display-flex m-flex-direction_column"><article class="m-margin-bottom_16 m-display-flex m-flex-column m-flex-grow_1"><a href="https://podcast.allegro.tech/rola_architekta_w_allegro" title="Rola architekta w Allegro"><img src="images/podcast.png" alt="Rola architekta w Allegro" class="m-display-block m-width-fluid"/></a><div class="m-padding-top_16 m-padding-top_24_lg m-padding-right_16 m-padding-right_24_lg m-padding-left_16 m-padding-left_24_lg m-card m-display-flex m-flex-column m-flex-grow_1 m-padding-bottom-0 m-color-bg_card"><a href="https://podcast.allegro.tech/rola_architekta_w_allegro" title="Rola architekta w Allegro" class="m-text-decoration_none"><h2 class="m-font-family_roboto m-margin-left_0 m-margin-right_0 m-margin-top_0 m-color_text m-font-weight_500 m-line-height_130 m-margin-bottom_8 m-margin-bottom_16_sm m-font-size_21 m-font-size_25_sm" style="text-overflow:ellipsis;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;min-height:2em;overflow:hidden">Rola architekta w Allegro</h2></a><time class="m-font-family_sans m-line-height_21 m-font-size_14 m-text-size-adjust_100p m-margin-top_0 m-margin-right_0 m-margin-bottom_0 m-margin-left_0 m-color_text m-padding-bottom-16">7 miesięcy temu</time><p class="m-font-family_sans m-line-height_21 m-font-size_14 m-text-size-adjust_100p m-margin-top_0 m-margin-right_0 m-margin-bottom_0 m-margin-left_0 m-color_text m-flex-grow-1">Od kodowania do tworzenia strategii technicznej... Jak wygląda rola architekta w Allegro? Ile takich osób pracuje w naszej firmie i dlaczego ta rola jest tak różnorodna? Czym jest Andamio i jak rozwijamy naszą platformę – o tym wszystkim opowie Piotr Betkier – Inżynier, Architekt Platformy Technicznej w Allegro oraz twórca piosenek o IT :)</p><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-margin-top-16 m-display_block m-border-width_1 m-border-color_gray m-border-style-top_solid m-height_40 m-line-height_40 m-text-transform_uppercase m-letter-spacing_2 m-white-space_nowrap m-cursor_pointer m-overflow_hidden m-padding-left_16 m-padding-right_16 m-padding-top_0 m-padding-bottom_0 m-outline-style_dotted--focus m-outline-width_2 m-outline-color_teal m-outline-offset_n2 m-button m-box_border m-text-align_center m-display_inline-block m-color_secondary m-background-position_50p m-background-size_5000p m-transition-property_background-color m-transition-duration_fast m-button--secondary" href="https://podcast.allegro.tech/rola_architekta_w_allegro">Posłuchaj odcinka</a></div></article></div><div class="m-grid__col m-grid__col--12 m-grid__col--6@sm m-grid__col--3@xl m-display-flex m-flex-direction_column"><article class="m-margin-bottom_16 m-display-flex m-flex-column m-flex-grow_1"><a href="https://podcast.allegro.tech/infrastruktura_Allegro" title="Infrastruktura Allegro"><img src="images/podcast.png" alt="Infrastruktura Allegro" class="m-display-block m-width-fluid"/></a><div class="m-padding-top_16 m-padding-top_24_lg m-padding-right_16 m-padding-right_24_lg m-padding-left_16 m-padding-left_24_lg m-card m-display-flex m-flex-column m-flex-grow_1 m-padding-bottom-0 m-color-bg_card"><a href="https://podcast.allegro.tech/infrastruktura_Allegro" title="Infrastruktura Allegro" class="m-text-decoration_none"><h2 class="m-font-family_roboto m-margin-left_0 m-margin-right_0 m-margin-top_0 m-color_text m-font-weight_500 m-line-height_130 m-margin-bottom_8 m-margin-bottom_16_sm m-font-size_21 m-font-size_25_sm" style="text-overflow:ellipsis;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;min-height:2em;overflow:hidden">Infrastruktura Allegro</h2></a><time class="m-font-family_sans m-line-height_21 m-font-size_14 m-text-size-adjust_100p m-margin-top_0 m-margin-right_0 m-margin-bottom_0 m-margin-left_0 m-color_text m-padding-bottom-16">8 miesięcy temu</time><p class="m-font-family_sans m-line-height_21 m-font-size_14 m-text-size-adjust_100p m-margin-top_0 m-margin-right_0 m-margin-bottom_0 m-margin-left_0 m-color_text m-flex-grow-1">Jak jest zbudowane środowisko uruchomienia aplikacji Allegro? Jak działają serwerownie firmy i ile ich potrzeba, a które elementy Allegro działają w chmurze publicznej? Jak przebiegała transformacja w Allegro i co zmieniało się przez lata? Jak wzrost biznesu wpływa na wielkość infrastruktury i jak infrastruktura Allegro odczuła przyjście pandemii? O tym, a także o rozwoju liderów technologii w Allegro oraz o historii powstania dżingla do naszych podcastów, opowie Piotr Michoński - menadżer Zespołów tworzących infrastrukturę Allegro.</p><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-margin-top-16 m-display_block m-border-width_1 m-border-color_gray m-border-style-top_solid m-height_40 m-line-height_40 m-text-transform_uppercase m-letter-spacing_2 m-white-space_nowrap m-cursor_pointer m-overflow_hidden m-padding-left_16 m-padding-right_16 m-padding-top_0 m-padding-bottom_0 m-outline-style_dotted--focus m-outline-width_2 m-outline-color_teal m-outline-offset_n2 m-button m-box_border m-text-align_center m-display_inline-block m-color_secondary m-background-position_50p m-background-size_5000p m-transition-property_background-color m-transition-duration_fast m-button--secondary" href="https://podcast.allegro.tech/infrastruktura_Allegro">Posłuchaj odcinka</a></div></article></div><div class="m-grid__col m-grid__col--12 m-grid__col--6@sm m-grid__col--3@xl m-display-flex m-flex-direction_column"><article class="m-margin-bottom_16 m-display-flex m-flex-column m-flex-grow_1"><a href="https://podcast.allegro.tech/praca_architekta_ekosystemu_big_data_w_Allegro" title="Praca architekta ekosystemu big data w Allegro"><img src="images/podcast.png" alt="Praca architekta ekosystemu big data w Allegro" class="m-display-block m-width-fluid"/></a><div class="m-padding-top_16 m-padding-top_24_lg m-padding-right_16 m-padding-right_24_lg m-padding-left_16 m-padding-left_24_lg m-card m-display-flex m-flex-column m-flex-grow_1 m-padding-bottom-0 m-color-bg_card"><a href="https://podcast.allegro.tech/praca_architekta_ekosystemu_big_data_w_Allegro" title="Praca architekta ekosystemu big data w Allegro" class="m-text-decoration_none"><h2 class="m-font-family_roboto m-margin-left_0 m-margin-right_0 m-margin-top_0 m-color_text m-font-weight_500 m-line-height_130 m-margin-bottom_8 m-margin-bottom_16_sm m-font-size_21 m-font-size_25_sm" style="text-overflow:ellipsis;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;min-height:2em;overflow:hidden">Praca architekta ekosystemu big data w Allegro</h2></a><time class="m-font-family_sans m-line-height_21 m-font-size_14 m-text-size-adjust_100p m-margin-top_0 m-margin-right_0 m-margin-bottom_0 m-margin-left_0 m-color_text m-padding-bottom-16">8 miesięcy temu</time><p class="m-font-family_sans m-line-height_21 m-font-size_14 m-text-size-adjust_100p m-margin-top_0 m-margin-right_0 m-margin-bottom_0 m-margin-left_0 m-color_text m-flex-grow-1">Jak wygląda praca architekta ekosystemu big data w Allegro? Jakie zadania realizuje nasz zespół odpowiedzialny za narzędzia i infrastrukturę dla przetwarzania danych? Kiedy możemy mówić o dużych danych i ile petabajtów przetwarza Allegro? Skąd pochodzą dane Allegro i dlaczego jest ich tak dużo oraz z jakiego powodu dopiero teraz przenosimy się do chmury? O tym wszystkim opowie zdobywca statuetki Allegro Tech Hero - Dariusz Eliasz – Team Manager &amp; Platform Architect w Allegro.</p><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-margin-top-16 m-display_block m-border-width_1 m-border-color_gray m-border-style-top_solid m-height_40 m-line-height_40 m-text-transform_uppercase m-letter-spacing_2 m-white-space_nowrap m-cursor_pointer m-overflow_hidden m-padding-left_16 m-padding-right_16 m-padding-top_0 m-padding-bottom_0 m-outline-style_dotted--focus m-outline-width_2 m-outline-color_teal m-outline-offset_n2 m-button m-box_border m-text-align_center m-display_inline-block m-color_secondary m-background-position_50p m-background-size_5000p m-transition-property_background-color m-transition-duration_fast m-button--secondary" href="https://podcast.allegro.tech/praca_architekta_ekosystemu_big_data_w_Allegro">Posłuchaj odcinka</a></div></article></div><div class="m-grid__col m-grid__col--12 m-grid__col--6@sm m-grid__col--3@xl m-display-flex m-flex-direction_column"><article class="m-margin-bottom_16 m-display-flex m-flex-column m-flex-grow_1"><a href="https://podcast.allegro.tech/od_inzyniera_do_lidera_w_allegro" title="Od inżyniera do lidera w Allegro"><img src="images/podcast.png" alt="Od inżyniera do lidera w Allegro" class="m-display-block m-width-fluid"/></a><div class="m-padding-top_16 m-padding-top_24_lg m-padding-right_16 m-padding-right_24_lg m-padding-left_16 m-padding-left_24_lg m-card m-display-flex m-flex-column m-flex-grow_1 m-padding-bottom-0 m-color-bg_card"><a href="https://podcast.allegro.tech/od_inzyniera_do_lidera_w_allegro" title="Od inżyniera do lidera w Allegro" class="m-text-decoration_none"><h2 class="m-font-family_roboto m-margin-left_0 m-margin-right_0 m-margin-top_0 m-color_text m-font-weight_500 m-line-height_130 m-margin-bottom_8 m-margin-bottom_16_sm m-font-size_21 m-font-size_25_sm" style="text-overflow:ellipsis;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;min-height:2em;overflow:hidden">Od inżyniera do lidera w Allegro</h2></a><time class="m-font-family_sans m-line-height_21 m-font-size_14 m-text-size-adjust_100p m-margin-top_0 m-margin-right_0 m-margin-bottom_0 m-margin-left_0 m-color_text m-padding-bottom-16">8 miesięcy temu</time><p class="m-font-family_sans m-line-height_21 m-font-size_14 m-text-size-adjust_100p m-margin-top_0 m-margin-right_0 m-margin-bottom_0 m-margin-left_0 m-color_text m-flex-grow-1">Czym jest Opbox i jakie wyzwania przed nim stoją? Jak w Allegro angażujemy się w rozwój kultury Open Source? Ile mamy projektów na GitHubie i jak świętujemy Hacktoberfest? W jaki sposób można rozwinąć się od inżyniera do lidera? Na te pytania w najnowszym Allegro Tech Podcast odpowie Bartek Gałek, Team Leader w Allegro.</p><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-margin-top-16 m-display_block m-border-width_1 m-border-color_gray m-border-style-top_solid m-height_40 m-line-height_40 m-text-transform_uppercase m-letter-spacing_2 m-white-space_nowrap m-cursor_pointer m-overflow_hidden m-padding-left_16 m-padding-right_16 m-padding-top_0 m-padding-bottom_0 m-outline-style_dotted--focus m-outline-width_2 m-outline-color_teal m-outline-offset_n2 m-button m-box_border m-text-align_center m-display_inline-block m-color_secondary m-background-position_50p m-background-size_5000p m-transition-property_background-color m-transition-duration_fast m-button--secondary" href="https://podcast.allegro.tech/od_inzyniera_do_lidera_w_allegro">Posłuchaj odcinka</a></div></article></div></div><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-display_block m-margin-bottom_8 m-width_100 m-height_40 m-line-height_40 m-text-transform_uppercase m-letter-spacing_2 m-white-space_nowrap m-cursor_pointer m-overflow_hidden m-padding-left_16 m-padding-right_16 m-padding-top_0 m-padding-bottom_0 m-outline-style_dotted--focus m-outline-width_2 m-outline-color_teal m-outline-offset_n2 m-button m-box_border m-text-align_center m-display_inline-block m-color_secondary m-background-position_50p m-background-size_5000p m-transition-property_background-color m-transition-duration_fast m-button--secondary" href="https://podcast.allegro.tech">Zobacz więcej podcastów</a></div><div class="m-width-max_1600 m-margin-left_auto m-margin-right_auto m-padding-top-24"><h2 class="m-font-family_roboto m-margin-left_0 m-margin-right_0 m-margin-top_0 m-color_text m-font-weight_300 m-font-size_27 m-font-size_36_sm m-margin-bottom_16 m-margin-bottom_24_sm m-line-height_125 m-padding-left-24 m-padding-right-24">Wydarzenia</h2><div class="m-display_flex m-flex-wrap_1 m-flex-grow_1 m-grid"><div class="m-grid__col m-grid__col--12 m-grid__col--6@sm m-grid__col--6@xl m-display-flex m-flex-direction_column"><div class="m-margin-bottom_16 m-display-flex m-flex-direction_column m-flex-direction_row_sm m-padding-bottom_0"><a href="https://www.meetup.com/allegrotech/events/282421464/" title="Allegro Tech Labs #9 Online: System design workshop" class="m-display_none m-display_block_lg" style="background-color:#fd4a02"><img width="218" src="images/event.png" alt="Allegro Tech Labs #9 Online: System design workshop"/></a><article class="m-padding-top_16 m-padding-top_24_lg m-padding-right_16 m-padding-right_24_lg m-padding-left_16 m-padding-left_24_lg m-card m-display-flex m-flex-direction_column m-padding-bottom_0 m-flex_1 m-flex-justify_between m-color-bg_card"><a href="https://www.meetup.com/allegrotech/events/282421464/" title="Allegro Tech Labs #9 Online: System design workshop" class="m-text-decoration_none"><h2 class="m-font-family_roboto m-margin-left_0 m-margin-right_0 m-margin-top_0 m-color_text m-font-weight_500 m-line-height_130 m-margin-bottom_8 m-margin-bottom_16_sm m-font-size_21 m-font-size_25_sm" style="text-overflow:ellipsis;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;min-height:2em;overflow:hidden">Allegro Tech Labs #9 Online: System design workshop</h2></a><time class="m-font-family_sans m-line-height_21 m-font-size_14 m-text-size-adjust_100p m-margin-top_0 m-margin-right_0 m-margin-bottom_0 m-margin-left_0 m-color_text">29 dni temu<!-- -->, Online event</time><time class="m-font-family_sans m-line-height_21 m-font-size_14 m-text-size-adjust_100p m-margin-top_0 m-margin-right_0 m-margin-bottom_0 m-margin-left_0 m-color_text m-padding-top-8">❗NA WYDARZENIE OBOWIĄZUJE REJESTRACJA: Liczba miejsc jest organiczona: https://app.evenea.pl/event/allegro-tech-labs-9/ ❗ To już druga edycja naszych warsztatów System Design Workshop! Czy chcesz poznać tajniki tworzenia systemów?…</time><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-margin-top-16 m-display_block m-border-width_1 m-border-color_gray m-border-style-top_solid m-height_40 m-line-height_40 m-text-transform_uppercase m-letter-spacing_2 m-white-space_nowrap m-cursor_pointer m-overflow_hidden m-padding-left_16 m-padding-right_16 m-padding-top_0 m-padding-bottom_0 m-outline-style_dotted--focus m-outline-width_2 m-outline-color_teal m-outline-offset_n2 m-button m-box_border m-text-align_center m-display_inline-block m-color_secondary m-background-position_50p m-background-size_5000p m-transition-property_background-color m-transition-duration_fast m-button--secondary" href="https://www.meetup.com/allegrotech/events/282421464/">Szczegóły</a></article></div></div><div class="m-grid__col m-grid__col--12 m-grid__col--6@sm m-grid__col--6@xl m-display-flex m-flex-direction_column"><div class="m-margin-bottom_16 m-display-flex m-flex-direction_column m-flex-direction_row_sm m-padding-bottom_0"><a href="https://www.meetup.com/allegrotech/events/281692274/" title="Allegro Tech Live #23 - Przygody backendowców w C#" class="m-display_none m-display_block_lg" style="background-color:#fd4a02"><img width="218" src="images/event.png" alt="Allegro Tech Live #23 - Przygody backendowców w C#"/></a><article class="m-padding-top_16 m-padding-top_24_lg m-padding-right_16 m-padding-right_24_lg m-padding-left_16 m-padding-left_24_lg m-card m-display-flex m-flex-direction_column m-padding-bottom_0 m-flex_1 m-flex-justify_between m-color-bg_card"><a href="https://www.meetup.com/allegrotech/events/281692274/" title="Allegro Tech Live #23 - Przygody backendowców w C#" class="m-text-decoration_none"><h2 class="m-font-family_roboto m-margin-left_0 m-margin-right_0 m-margin-top_0 m-color_text m-font-weight_500 m-line-height_130 m-margin-bottom_8 m-margin-bottom_16_sm m-font-size_21 m-font-size_25_sm" style="text-overflow:ellipsis;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;min-height:2em;overflow:hidden">Allegro Tech Live #23 - Przygody backendowców w C#</h2></a><time class="m-font-family_sans m-line-height_21 m-font-size_14 m-text-size-adjust_100p m-margin-top_0 m-margin-right_0 m-margin-bottom_0 m-margin-left_0 m-color_text">2 miesiące temu</time><time class="m-font-family_sans m-line-height_21 m-font-size_14 m-text-size-adjust_100p m-margin-top_0 m-margin-right_0 m-margin-bottom_0 m-margin-left_0 m-color_text m-padding-top-8">------ Rejestracja: https://app.evenea.pl/event/allegro-tech-live-23/------- Allegro Tech Live to w 100% zdalna odsłona naszych stacjonarnych meetupów Allegro Tech Talks. Kiedyś spotykaliśmy się w naszych biurach, a teraz…</time><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-margin-top-16 m-display_block m-border-width_1 m-border-color_gray m-border-style-top_solid m-height_40 m-line-height_40 m-text-transform_uppercase m-letter-spacing_2 m-white-space_nowrap m-cursor_pointer m-overflow_hidden m-padding-left_16 m-padding-right_16 m-padding-top_0 m-padding-bottom_0 m-outline-style_dotted--focus m-outline-width_2 m-outline-color_teal m-outline-offset_n2 m-button m-box_border m-text-align_center m-display_inline-block m-color_secondary m-background-position_50p m-background-size_5000p m-transition-property_background-color m-transition-duration_fast m-button--secondary" href="https://www.meetup.com/allegrotech/events/281692274/">Szczegóły</a></article></div></div><div class="m-grid__col m-grid__col--12 m-grid__col--6@sm m-grid__col--6@xl m-display-flex m-flex-direction_column"><div class="m-margin-bottom_16 m-display-flex m-flex-direction_column m-flex-direction_row_sm m-padding-bottom_0"><a href="https://www.meetup.com/allegrotech/events/281441586/" title="Allegro Tech Live #22 - Jak wygląda codzienność lidera w Allegro?" class="m-display_none m-display_block_lg" style="background-color:#fd4a02"><img width="218" src="images/event.png" alt="Allegro Tech Live #22 - Jak wygląda codzienność lidera w Allegro?"/></a><article class="m-padding-top_16 m-padding-top_24_lg m-padding-right_16 m-padding-right_24_lg m-padding-left_16 m-padding-left_24_lg m-card m-display-flex m-flex-direction_column m-padding-bottom_0 m-flex_1 m-flex-justify_between m-color-bg_card"><a href="https://www.meetup.com/allegrotech/events/281441586/" title="Allegro Tech Live #22 - Jak wygląda codzienność lidera w Allegro?" class="m-text-decoration_none"><h2 class="m-font-family_roboto m-margin-left_0 m-margin-right_0 m-margin-top_0 m-color_text m-font-weight_500 m-line-height_130 m-margin-bottom_8 m-margin-bottom_16_sm m-font-size_21 m-font-size_25_sm" style="text-overflow:ellipsis;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;min-height:2em;overflow:hidden">Allegro Tech Live #22 - Jak wygląda codzienność lidera w Allegro?</h2></a><time class="m-font-family_sans m-line-height_21 m-font-size_14 m-text-size-adjust_100p m-margin-top_0 m-margin-right_0 m-margin-bottom_0 m-margin-left_0 m-color_text">3 miesiące temu<!-- -->, Online event</time><time class="m-font-family_sans m-line-height_21 m-font-size_14 m-text-size-adjust_100p m-margin-top_0 m-margin-right_0 m-margin-bottom_0 m-margin-left_0 m-color_text m-padding-top-8">!!!! Rejestracja: https://app.evenea.pl/event/allegro-tech-live-22/ !!!! Allegro Tech Live to w 100% zdalna odsłona naszych stacjonarnych meetupów Allegro Tech Talks. Zazwyczaj spotykaliśmy się w naszych biurach, ale…</time><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-margin-top-16 m-display_block m-border-width_1 m-border-color_gray m-border-style-top_solid m-height_40 m-line-height_40 m-text-transform_uppercase m-letter-spacing_2 m-white-space_nowrap m-cursor_pointer m-overflow_hidden m-padding-left_16 m-padding-right_16 m-padding-top_0 m-padding-bottom_0 m-outline-style_dotted--focus m-outline-width_2 m-outline-color_teal m-outline-offset_n2 m-button m-box_border m-text-align_center m-display_inline-block m-color_secondary m-background-position_50p m-background-size_5000p m-transition-property_background-color m-transition-duration_fast m-button--secondary" href="https://www.meetup.com/allegrotech/events/281441586/">Szczegóły</a></article></div></div><div class="m-grid__col m-grid__col--12 m-grid__col--6@sm m-grid__col--6@xl m-display-flex m-flex-direction_column"><div class="m-margin-bottom_16 m-display-flex m-flex-direction_column m-flex-direction_row_sm m-padding-bottom_0"><a href="https://www.meetup.com/allegrotech/events/281199452/" title="Allegro Tech Live #21 - Jak zautomatyzować bezpieczeństwo IT?" class="m-display_none m-display_block_lg" style="background-color:#fd4a02"><img width="218" src="images/event.png" alt="Allegro Tech Live #21 - Jak zautomatyzować bezpieczeństwo IT?"/></a><article class="m-padding-top_16 m-padding-top_24_lg m-padding-right_16 m-padding-right_24_lg m-padding-left_16 m-padding-left_24_lg m-card m-display-flex m-flex-direction_column m-padding-bottom_0 m-flex_1 m-flex-justify_between m-color-bg_card"><a href="https://www.meetup.com/allegrotech/events/281199452/" title="Allegro Tech Live #21 - Jak zautomatyzować bezpieczeństwo IT?" class="m-text-decoration_none"><h2 class="m-font-family_roboto m-margin-left_0 m-margin-right_0 m-margin-top_0 m-color_text m-font-weight_500 m-line-height_130 m-margin-bottom_8 m-margin-bottom_16_sm m-font-size_21 m-font-size_25_sm" style="text-overflow:ellipsis;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;min-height:2em;overflow:hidden">Allegro Tech Live #21 - Jak zautomatyzować bezpieczeństwo IT?</h2></a><time class="m-font-family_sans m-line-height_21 m-font-size_14 m-text-size-adjust_100p m-margin-top_0 m-margin-right_0 m-margin-bottom_0 m-margin-left_0 m-color_text">3 miesiące temu</time><time class="m-font-family_sans m-line-height_21 m-font-size_14 m-text-size-adjust_100p m-margin-top_0 m-margin-right_0 m-margin-bottom_0 m-margin-left_0 m-color_text m-padding-top-8">Allegro Tech Live to w 100% zdalna odsłona naszych stacjonarnych meetupów Allegro Tech Talks. Zazwyczaj spotykaliśmy się w naszych biurach, ale tym razem to my…</time><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-margin-top-16 m-display_block m-border-width_1 m-border-color_gray m-border-style-top_solid m-height_40 m-line-height_40 m-text-transform_uppercase m-letter-spacing_2 m-white-space_nowrap m-cursor_pointer m-overflow_hidden m-padding-left_16 m-padding-right_16 m-padding-top_0 m-padding-bottom_0 m-outline-style_dotted--focus m-outline-width_2 m-outline-color_teal m-outline-offset_n2 m-button m-box_border m-text-align_center m-display_inline-block m-color_secondary m-background-position_50p m-background-size_5000p m-transition-property_background-color m-transition-duration_fast m-button--secondary" href="https://www.meetup.com/allegrotech/events/281199452/">Szczegóły</a></article></div></div></div><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-display_block m-margin-bottom_8 m-width_100 m-height_40 m-line-height_40 m-text-transform_uppercase m-letter-spacing_2 m-white-space_nowrap m-cursor_pointer m-overflow_hidden m-padding-left_16 m-padding-right_16 m-padding-top_0 m-padding-bottom_0 m-outline-style_dotted--focus m-outline-width_2 m-outline-color_teal m-outline-offset_n2 m-button m-box_border m-text-align_center m-display_inline-block m-color_secondary m-background-position_50p m-background-size_5000p m-transition-property_background-color m-transition-duration_fast m-button--secondary" href="https://www.meetup.com/allegrotech/events/">Zobacz więcej wydarzeń</a></div><div class="m-width-max_1600 m-margin-left_auto m-margin-right_auto m-padding-top-24"><h2 class="m-font-family_roboto m-margin-left_0 m-margin-right_0 m-margin-top_0 m-color_text m-font-weight_300 m-font-size_27 m-font-size_36_sm m-margin-bottom_16 m-margin-bottom_24_sm m-line-height_125 m-padding-left-24 m-padding-right-24">Oferty pracy</h2><div class="m-width-max_1600 m-margin-left_auto m-margin-right_auto"><article class="m-padding-top_16 m-padding-top_24_lg m-padding-right_16 m-padding-right_24_lg m-padding-bottom_16 m-padding-bottom_24_lg m-padding-left_16 m-padding-left_24_lg m-card m-margin-bottom_16 m-display-flex m-flex-justify_between m-flex-items-center m-flex-direction_column m-flex-direction_row_md m-color-bg_card"><h2 class="m-font-family_roboto m-margin-left_0 m-margin-right_0 m-margin-top_0 m-color_text m-font-weight_500 m-line-height_130 m-margin-bottom_8 m-margin-bottom_16_sm m-font-size_21 m-font-size_25_sm m-margin-bottom_0_sm m-flex-grow_1">Research Engineer - Machine Learning (Reinforcement Learning)</h2><p class="m-font-family_sans m-line-height_21 m-font-size_14 m-text-size-adjust_100p m-margin-top_0 m-margin-right_0 m-margin-bottom_0 m-margin-left_0 m-color_text m-margin-right_0 m-margin-bottom_0 m-margin-left_0 m-color_text m-font-size_21 m-font-size_25_sm m-font-weight_300 m-line-height_normal m-margin-top_16 m-text-align_left m-padding-right_16">Warszawa, Kraków, Poznań, Toruń, Wrocław, Gdańsk, Katowice, Łódź, Lublin</p><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-height_40 m-line-height_40 m-text-transform_uppercase m-letter-spacing_2 m-white-space_nowrap m-cursor_pointer m-overflow_hidden m-padding-left_16 m-padding-right_16 m-padding-top_0 m-padding-bottom_0 m-outline-style_dotted--focus m-outline-width_2 m-outline-color_teal m-outline-offset_n2 m-button m-box_border m-text-align_center m-display_inline-block m-color_secondary m-background-position_50p m-background-size_5000p m-transition-property_background-color m-transition-duration_fast m-button--secondary" href="https://www.smartrecruiters.com/Allegro/743999785422127-research-engineer-machine-learning-reinforcement-learning?trid=de9dfdf3-7f9e-4ebf-8a64-49f6c69ad640">Sprawdź</a></article><article class="m-padding-top_16 m-padding-top_24_lg m-padding-right_16 m-padding-right_24_lg m-padding-bottom_16 m-padding-bottom_24_lg m-padding-left_16 m-padding-left_24_lg m-card m-margin-bottom_16 m-display-flex m-flex-justify_between m-flex-items-center m-flex-direction_column m-flex-direction_row_md m-color-bg_card"><h2 class="m-font-family_roboto m-margin-left_0 m-margin-right_0 m-margin-top_0 m-color_text m-font-weight_500 m-line-height_130 m-margin-bottom_8 m-margin-bottom_16_sm m-font-size_21 m-font-size_25_sm m-margin-bottom_0_sm m-flex-grow_1">Research Engineer - Machine Learning (Ranking and Recommendations)</h2><p class="m-font-family_sans m-line-height_21 m-font-size_14 m-text-size-adjust_100p m-margin-top_0 m-margin-right_0 m-margin-bottom_0 m-margin-left_0 m-color_text m-margin-right_0 m-margin-bottom_0 m-margin-left_0 m-color_text m-font-size_21 m-font-size_25_sm m-font-weight_300 m-line-height_normal m-margin-top_16 m-text-align_left m-padding-right_16">Warszawa, Poznań, Kraków, Toruń, Wrocław, Gdańsk, Katowice, Łódź, Lublin</p><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-height_40 m-line-height_40 m-text-transform_uppercase m-letter-spacing_2 m-white-space_nowrap m-cursor_pointer m-overflow_hidden m-padding-left_16 m-padding-right_16 m-padding-top_0 m-padding-bottom_0 m-outline-style_dotted--focus m-outline-width_2 m-outline-color_teal m-outline-offset_n2 m-button m-box_border m-text-align_center m-display_inline-block m-color_secondary m-background-position_50p m-background-size_5000p m-transition-property_background-color m-transition-duration_fast m-button--secondary" href="https://www.smartrecruiters.com/Allegro/743999785421861-research-engineer-machine-learning-ranking-and-recommendations?trid=de9dfdf3-7f9e-4ebf-8a64-49f6c69ad640">Sprawdź</a></article><article class="m-padding-top_16 m-padding-top_24_lg m-padding-right_16 m-padding-right_24_lg m-padding-bottom_16 m-padding-bottom_24_lg m-padding-left_16 m-padding-left_24_lg m-card m-margin-bottom_16 m-display-flex m-flex-justify_between m-flex-items-center m-flex-direction_column m-flex-direction_row_md m-color-bg_card"><h2 class="m-font-family_roboto m-margin-left_0 m-margin-right_0 m-margin-top_0 m-color_text m-font-weight_500 m-line-height_130 m-margin-bottom_8 m-margin-bottom_16_sm m-font-size_21 m-font-size_25_sm m-margin-bottom_0_sm m-flex-grow_1">Research Engineer - Machine Learning (Reinforcement Learning)</h2><p class="m-font-family_sans m-line-height_21 m-font-size_14 m-text-size-adjust_100p m-margin-top_0 m-margin-right_0 m-margin-bottom_0 m-margin-left_0 m-color_text m-margin-right_0 m-margin-bottom_0 m-margin-left_0 m-color_text m-font-size_21 m-font-size_25_sm m-font-weight_300 m-line-height_normal m-margin-top_16 m-text-align_left m-padding-right_16">Warszawa, Kraków, Poznań, Toruń, Wrocław, Gdańsk, Katowice, Łódź, Lublin</p><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-height_40 m-line-height_40 m-text-transform_uppercase m-letter-spacing_2 m-white-space_nowrap m-cursor_pointer m-overflow_hidden m-padding-left_16 m-padding-right_16 m-padding-top_0 m-padding-bottom_0 m-outline-style_dotted--focus m-outline-width_2 m-outline-color_teal m-outline-offset_n2 m-button m-box_border m-text-align_center m-display_inline-block m-color_secondary m-background-position_50p m-background-size_5000p m-transition-property_background-color m-transition-duration_fast m-button--secondary" href="https://www.smartrecruiters.com/Allegro/743999779448775-research-engineer-machine-learning-reinforcement-learning?trid=de9dfdf3-7f9e-4ebf-8a64-49f6c69ad640">Sprawdź</a></article><article class="m-padding-top_16 m-padding-top_24_lg m-padding-right_16 m-padding-right_24_lg m-padding-bottom_16 m-padding-bottom_24_lg m-padding-left_16 m-padding-left_24_lg m-card m-margin-bottom_16 m-display-flex m-flex-justify_between m-flex-items-center m-flex-direction_column m-flex-direction_row_md m-color-bg_card"><h2 class="m-font-family_roboto m-margin-left_0 m-margin-right_0 m-margin-top_0 m-color_text m-font-weight_500 m-line-height_130 m-margin-bottom_8 m-margin-bottom_16_sm m-font-size_21 m-font-size_25_sm m-margin-bottom_0_sm m-flex-grow_1">Research Engineer - Machine Learning (Ranking and Recommendations)</h2><p class="m-font-family_sans m-line-height_21 m-font-size_14 m-text-size-adjust_100p m-margin-top_0 m-margin-right_0 m-margin-bottom_0 m-margin-left_0 m-color_text m-margin-right_0 m-margin-bottom_0 m-margin-left_0 m-color_text m-font-size_21 m-font-size_25_sm m-font-weight_300 m-line-height_normal m-margin-top_16 m-text-align_left m-padding-right_16">Warszawa, Poznań, Kraków, Toruń, Wrocław, Gdańsk, Katowice, Łódź, Lublin</p><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-height_40 m-line-height_40 m-text-transform_uppercase m-letter-spacing_2 m-white-space_nowrap m-cursor_pointer m-overflow_hidden m-padding-left_16 m-padding-right_16 m-padding-top_0 m-padding-bottom_0 m-outline-style_dotted--focus m-outline-width_2 m-outline-color_teal m-outline-offset_n2 m-button m-box_border m-text-align_center m-display_inline-block m-color_secondary m-background-position_50p m-background-size_5000p m-transition-property_background-color m-transition-duration_fast m-button--secondary" href="https://www.smartrecruiters.com/Allegro/743999779448676-research-engineer-machine-learning-ranking-and-recommendations?trid=de9dfdf3-7f9e-4ebf-8a64-49f6c69ad640">Sprawdź</a></article><article class="m-padding-top_16 m-padding-top_24_lg m-padding-right_16 m-padding-right_24_lg m-padding-bottom_16 m-padding-bottom_24_lg m-padding-left_16 m-padding-left_24_lg m-card m-margin-bottom_16 m-display-flex m-flex-justify_between m-flex-items-center m-flex-direction_column m-flex-direction_row_md m-color-bg_card"><h2 class="m-font-family_roboto m-margin-left_0 m-margin-right_0 m-margin-top_0 m-color_text m-font-weight_500 m-line-height_130 m-margin-bottom_8 m-margin-bottom_16_sm m-font-size_21 m-font-size_25_sm m-margin-bottom_0_sm m-flex-grow_1">Data Analyst (Consumer Analytics)</h2><p class="m-font-family_sans m-line-height_21 m-font-size_14 m-text-size-adjust_100p m-margin-top_0 m-margin-right_0 m-margin-bottom_0 m-margin-left_0 m-color_text m-margin-right_0 m-margin-bottom_0 m-margin-left_0 m-color_text m-font-size_21 m-font-size_25_sm m-font-weight_300 m-line-height_normal m-margin-top_16 m-text-align_left m-padding-right_16">Warszawa, Poznań</p><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-height_40 m-line-height_40 m-text-transform_uppercase m-letter-spacing_2 m-white-space_nowrap m-cursor_pointer m-overflow_hidden m-padding-left_16 m-padding-right_16 m-padding-top_0 m-padding-bottom_0 m-outline-style_dotted--focus m-outline-width_2 m-outline-color_teal m-outline-offset_n2 m-button m-box_border m-text-align_center m-display_inline-block m-color_secondary m-background-position_50p m-background-size_5000p m-transition-property_background-color m-transition-duration_fast m-button--secondary" href="https://www.smartrecruiters.com/Allegro/743999779015147-data-analyst-consumer-analytics?trid=de9dfdf3-7f9e-4ebf-8a64-49f6c69ad640">Sprawdź</a></article></div><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-display_block m-margin-bottom_8 m-width_100 m-height_40 m-line-height_40 m-text-transform_uppercase m-letter-spacing_2 m-white-space_nowrap m-cursor_pointer m-overflow_hidden m-padding-left_16 m-padding-right_16 m-padding-top_0 m-padding-bottom_0 m-outline-style_dotted--focus m-outline-width_2 m-outline-color_teal m-outline-offset_n2 m-button m-box_border m-text-align_center m-display_inline-block m-color_secondary m-background-position_50p m-background-size_5000p m-transition-property_background-color m-transition-duration_fast m-button--secondary" href="https://allegro.pl/praca">Zobacz więcej ofert</a></div><footer class="m-color-bg_navy m-margin-top-32"><div class="m-width-max_1600 m-margin-left_auto m-margin-right_auto m-padding-top-24 m-padding-bottom-24 m-display-flex@sm m-flex-justify-between m-flex-items-center m-text-align_center"><p class="m-font-family_sans m-line-height_21 m-font-size_14 m-text-size-adjust_100p m-margin-top_0 m-margin-right_0 m-margin-bottom_0 m-margin-left_0 m-color_text m-color_white m-padding-left-24@sm">Proudly built by Allegro Tech engineers</p><ul class="m-font-family_sans m-font-size_14 m-line-height_21 m-color_text m-text-size-adjust_100p m-list-style-type_none m-margin-top_0 m-margin-right_0 m-margin-bottom_0 m-margin-left_0 m-padding-top_0 m-padding-right_0 m-padding-bottom_0 m-padding-left_0 m-display-flex m-flex-justify-center"><li style="filter:brightness(0) invert(1);opacity:0.5" class="m-margin-right-8 m-margin-top-16 m-margin-top-0@sm m-color_white"><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-line-height_21" href="https://github.com/allegro"><img src="https://assets.allegrostatic.com/metrum/icon/github-6a18df1729.svg" alt="Github" class="m-icon"/></a></li><li style="filter:brightness(0) invert(1);opacity:0.5" class="m-margin-right-8 m-margin-top-16 m-margin-top-0@sm m-color_white"><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-line-height_21" href="https://www.facebook.com/allegro.tech/"><img src="https://assets.allegrostatic.com/metrum/icon/facebook-a2b92f9dcb.svg" alt="Facebook" class="m-icon"/></a></li><li style="filter:brightness(0) invert(1);opacity:0.5" class="m-margin-right-8 m-margin-top-16 m-margin-top-0@sm m-color_white"><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-line-height_21" href="https://twitter.com/allegrotech"><img src="https://assets.allegrostatic.com/metrum/icon/twitter-25164a58aa.svg" alt="Twitter" class="m-icon"/></a></li></ul></div></footer><div style="visibility:hidden;height:0;overflow:hidden;position:relative"><img alt="doubleclick" width="1" height="1" style="position:absolute" src="https://pubads.g.doubleclick.net/activity;dc_iu=/21612525419/DFPAudiencePixel;ord=319065030013.03485;dc_seg=507368552?"/><img alt="fb" height="1" width="1" style="position:absolute" src="https://www.facebook.com/tr?id=1650870088530325&amp;ev=PageView&amp;noscript=1"/></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"posts":[{"title":"Shrinking the size of a monorepo","link":"https://blog.allegro.tech/2022/01/shrinking-size-of-monorepo.html","pubDate":"Wed, 12 Jan 2022 00:00:00 +0100","authors":{"author":[{"name":["Maciej Piotrowski"],"photo":["https://blog.allegro.tech/img/authors/maciej.piotrowski.jpg"],"url":["https://blog.allegro.tech/authors/maciej.piotrowski"]}]},"content":"\u003cp\u003eThe source code of Allegro iOS app for buyers used to be divided into separate modules hosted in multiple repositories\n(polyrepo). The\nsource code was migrated to a monorepo a few years back along with the history of all repos that constituted the app.\nUpdating source code of a module on one repository could affect another module hosted on a separate repository.\nVersioning modules and propagation of dependency update led to long release process of the entire application.\nOur main\nrepository for the iOS application thus became our monorepo. After 9 years of development of the app the repo size has\ngrown\nenormously and the \u003ccode class=\"language-plaintext highlighter-rouge\"\u003egit clone\u003c/code\u003e command became a nightmare taking too much time. We had a possibility to shrink the\nproject size during the\nmigration from an on-premise to an external git repo hosting provider.\u003c/p\u003e\n\n\u003ch2 id=\"monorepo-scale\"\u003eMonorepo scale\u003c/h2\u003e\n\n\u003ch3 id=\"general-repo-scale\"\u003eGeneral repo scale\u003c/h3\u003e\n\n\u003cp\u003eThe General scale of our old repository was as follows:\u003c/p\u003e\n\n\u003cul\u003e\n  \u003cli\u003ealmost 9 years of history with \u003cstrong\u003e91k +\u003c/strong\u003e commits\u003c/li\u003e\n  \u003cli\u003e\u003cstrong\u003e440k\u003c/strong\u003e \u003ca href=\"https://en.wikipedia.org/wiki/Binary_large_object\"\u003eBLOBs\u003c/a\u003e were stored in the repo: multiple \u003ccode class=\"language-plaintext highlighter-rouge\"\u003e.png\u003c/code\u003e and\n\u003ccode class=\"language-plaintext highlighter-rouge\"\u003e.jpeg\u003c/code\u003e files, 3rd-party frameworks and toolset binaries. The unpacked size of the BLOBs would add up to \u003cstrong\u003e36 GB\u003c/strong\u003e and\nthe biggest BLOB stored was \u003cstrong\u003e100+ MB\u003c/strong\u003e\u003c/li\u003e\n  \u003cli\u003e\u003cstrong\u003e680k\u003c/strong\u003e git \u003cem\u003etree\u003c/em\u003e objects\u003c/li\u003e\n  \u003cli\u003ethe unpacked repo size on the main development branch was \u003cstrong\u003e8+ GB\u003c/strong\u003e where the \u003ccode class=\"language-plaintext highlighter-rouge\"\u003e.git\u003c/code\u003e dir size after a clone was\n\u003cstrong\u003e7+ GB\u003c/strong\u003e. The \u003ccode class=\"language-plaintext highlighter-rouge\"\u003e.git\u003c/code\u003e directory contained compressed \u003ccode class=\"language-plaintext highlighter-rouge\"\u003e.png\u003c/code\u003e (\u003cstrong\u003e4.5+ GB\u003c/strong\u003e 🤯) and \u003ccode class=\"language-plaintext highlighter-rouge\"\u003e.pbxproj\u003c/code\u003e (\u003cstrong\u003e600+ MB\u003c/strong\u003e) files\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch3 id=\"new-repo-scale\"\u003eNew repo scale\u003c/h3\u003e\n\n\u003cp\u003eAfter the migration and history rewrite we shrank the repo size to:\u003c/p\u003e\n\n\u003cul\u003e\n  \u003cli\u003e\u003cstrong\u003e71k +\u003c/strong\u003e commits\u003c/li\u003e\n  \u003cli\u003e\u003cstrong\u003e230k\u003c/strong\u003e \u003ca href=\"https://en.wikipedia.org/wiki/Binary_large_object\"\u003eBLOBs\u003c/a\u003e, where all BLOBs unpacked would add up to\n\u003cstrong\u003e1.6 GB\u003c/strong\u003e - this\nnumber also includes size of source code files, whereas assets and binaries were migrated to an external storage\u003c/li\u003e\n  \u003cli\u003e\u003cstrong\u003e455k+\u003c/strong\u003e git \u003cem\u003etree\u003c/em\u003e objects\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch2 id=\"how-did-we-do-it\"\u003eHow did we do it?\u003c/h2\u003e\n\n\u003cp\u003eThe history-rewrite process required proper planning and a few steps:\u003c/p\u003e\n\u003col\u003e\n  \u003cli\u003eAnalysis of the old repo contents and its history\u003c/li\u003e\n  \u003cli\u003eCreating a reproducible procedure for the history rewrite\u003c/li\u003e\n  \u003cli\u003eDry running the procedure to test out the process\u003c/li\u003e\n  \u003cli\u003ePlanning and scheduling activities necessary to migrate the repo\u003c/li\u003e\n  \u003cli\u003eProper communication about the process to stakeholders (a.k.a. developers 👩‍💻👨‍💻)\u003c/li\u003e\n  \u003cli\u003eThe actual migration\u003c/li\u003e\n\u003c/ol\u003e\n\n\u003ch3 id=\"the-repo-analysis\"\u003eThe repo analysis\u003c/h3\u003e\n\n\u003cp\u003eGoals:\u003c/p\u003e\n\u003cul\u003e\n  \u003cli\u003efind items that can be removed from the history\u003c/li\u003e\n  \u003cli\u003eselect items that can be migrated to an external storage\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eWe used tools such as \u003ca href=\"https://github.com/github/git-sizer\"\u003egit-sizer\u003c/a\u003e and\n\u003ca href=\"https://github.com/newren/git-filter-repo\"\u003egit-filter-repo tool\u003c/a\u003e to\nget information about types of files stored in the repository. If you wanted to do the same the workshops from\n\u003ca href=\"https://githubuniverse.com/professional-services-workshop-2-how-to-keep-git-monorepos-manageable/\"\u003eGitHub Universe\u003c/a\u003e and\n\u003ca href=\"https://github.com/githubuniverseworkshops/grafting-monorepos/issues/2\"\u003ethe scripts introduced there\u003c/a\u003e might be a good\nstarting point.\u003c/p\u003e\n\n\u003cp\u003eFrom the analysis we were able to select the following items for complete removal from the history:\u003c/p\u003e\n\n\u003cul\u003e\n  \u003cli\u003edeleted dirs and files\u003c/li\u003e\n  \u003cli\u003eunwanted paths: e.g. \u003ccode class=\"language-plaintext highlighter-rouge\"\u003ePods/\u003c/code\u003e, invalid symlinks causing deep nesting of paths\u003c/li\u003e\n  \u003cli\u003eunwanted history of paths: e.g. \u003ccode class=\"language-plaintext highlighter-rouge\"\u003eVendor\u003c/code\u003e for storing 3rd party dependencies or \u003ccode class=\"language-plaintext highlighter-rouge\"\u003eToolset\u003c/code\u003e with binaries\u003c/li\u003e\n  \u003cli\u003eunwanted files: .e.g \u003ccode class=\"language-plaintext highlighter-rouge\"\u003e.pbxproj\u003c/code\u003e that can be generated by \u003ca href=\"https://github.com/yonaskolb/XcodeGen\"\u003eXcodeGen\u003c/a\u003e and their\nhistory is meaningless (\u003cstrong\u003e600+ MB\u003c/strong\u003e savings in our case), history of BLOB files such as \u003ccode class=\"language-plaintext highlighter-rouge\"\u003e.jpg\u003c/code\u003e, \u003ccode class=\"language-plaintext highlighter-rouge\"\u003e.png\u003c/code\u003e, \u003ccode class=\"language-plaintext highlighter-rouge\"\u003e.a\u003c/code\u003e,\n\u003ccode class=\"language-plaintext highlighter-rouge\"\u003e.dylib\u003c/code\u003e, \u003ccode class=\"language-plaintext highlighter-rouge\"\u003e.pdf\u003c/code\u003e, \u003ccode class=\"language-plaintext highlighter-rouge\"\u003e.zip\u003c/code\u003e, \u003ccode class=\"language-plaintext highlighter-rouge\"\u003e.mp4\u003c/code\u003e, \u003ccode class=\"language-plaintext highlighter-rouge\"\u003e.json\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eWe decided to track BLOBs using \u003ca href=\"https://git-lfs.github.com/\"\u003eGit LFS (Large File Storage)\u003c/a\u003e. In our case the\nfollowing were a good use case for it:\u003c/p\u003e\n\u003cul\u003e\n  \u003cli\u003elarge binary files \u003ccode class=\"language-plaintext highlighter-rouge\"\u003e.jpg\u003c/code\u003e, \u003ccode class=\"language-plaintext highlighter-rouge\"\u003e.png\u003c/code\u003e, \u003ccode class=\"language-plaintext highlighter-rouge\"\u003e.a\u003c/code\u003e, \u003ccode class=\"language-plaintext highlighter-rouge\"\u003e.dylib\u003c/code\u003e, \u003ccode class=\"language-plaintext highlighter-rouge\"\u003e.pdf\u003c/code\u003e, \u003ccode class=\"language-plaintext highlighter-rouge\"\u003e.zip\u003c/code\u003e, \u003ccode class=\"language-plaintext highlighter-rouge\"\u003e.mp4\u003c/code\u003e, \u003ccode class=\"language-plaintext highlighter-rouge\"\u003e.json\u003c/code\u003e\u003c/li\u003e\n  \u003cli\u003eframework binaries\u003c/li\u003e\n  \u003cli\u003etoolset binaries\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch3 id=\"reproducible-procedure-and-dry-runs\"\u003eReproducible procedure and dry runs\u003c/h3\u003e\n\n\u003cp\u003eWe created a script that contained all commands that removed redundant items from the history. To remove items we used\n\u003ca href=\"https://github.com/newren/git-filter-repo\"\u003egit filter-repo\u003c/a\u003e - it‘s much more performant than git‘s built-in\n \u003ccode class=\"language-plaintext highlighter-rouge\"\u003egit filter-branch\u003c/code\u003e (do not use it!). Some examples of usage:\u003c/p\u003e\n\n\u003cdiv class=\"language-shell highlighter-rouge\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight\"\u003e\u003ccode\u003egit filter-repo \u003cspan class=\"nt\"\u003e--invert-paths\u003c/span\u003e \u003cspan class=\"nt\"\u003e--path\u003c/span\u003e Pods/ \u003cspan class=\"nt\"\u003e--force\u003c/span\u003e\ngit filter-repo \u003cspan class=\"nt\"\u003e--invert-paths\u003c/span\u003e \u003cspan class=\"nt\"\u003e--paths-from-file\u003c/span\u003e remove.txt \u003cspan class=\"nt\"\u003e--force\u003c/span\u003e\ngit filter-repo \u003cspan class=\"nt\"\u003e--invert-paths\u003c/span\u003e \u003cspan class=\"nt\"\u003e--path-glob\u003c/span\u003e \u003cspan class=\"s1\"\u003e'*.pbxproj'\u003c/span\u003e \u003cspan class=\"nt\"\u003e--force\u003c/span\u003e\n\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eAfter the removal we restored the most-recent version of binaries, frameworks and BLOBs to the repo and we tracked them\nwith Git LFS:\u003c/p\u003e\n\n\u003cdiv class=\"language-shell highlighter-rouge\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight\"\u003e\u003ccode\u003egit lfs track \u003cspan class=\"s2\"\u003e\"*.png\"\u003c/span\u003e\ngit lfs track \u003cspan class=\"s2\"\u003e\"Vendor/SomeSDK/SomeSDK.framework/SomeSDK\"\u003c/span\u003e\n\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eWe ran the script a few times to verify the output size of the repo. One crucial aspect after the run was to verify\nthat \u003cstrong\u003eall plans\u003c/strong\u003e on the CI (Continuous Integration) pass - we did it to check that the app still compiles, tests pass\nand no more files that the ones we had wanted were actually deleted.\u003c/p\u003e\n\n\u003ch3 id=\"communication\"\u003eCommunication\u003c/h3\u003e\n\n\u003cp\u003eThe crucial aspect of introducing any change is communication. It‘s good to prepare it in advance, have team members\nreview it. We used a few channels so that our devs would get important info about the migration and history rewrite\nthrough the channel that suited their working habits best (e-mails, instant messaging tool, dev forums).\u003c/p\u003e\n\n\u003ch2 id=\"some-final-thoughts\"\u003eSome final thoughts\u003c/h2\u003e\n\n\u003cp\u003eIt took a large amount of time to prepare the migration, understand the history of the repository and select proper\nitems and\nstrategies for the migration. The links here might be a good starting point if you wanted to rewrite histories of your\noverweight repos:\u003c/p\u003e\n\n\u003cul\u003e\n  \u003cli\u003e\u003ca href=\"https://www.youtube.com/watch?v=bk7akV8nyAM\"\u003eGitHub Universe Workshops\u003c/a\u003e and corresponding\n\u003ca href=\"https://github.com/githubuniverseworkshops/grafting-monorepos\"\u003erepository\u003c/a\u003e\u003c/li\u003e\n  \u003cli\u003e\u003ca href=\"https://github.com/github/git-sizer\"\u003egit-sizer\u003c/a\u003e\u003c/li\u003e\n  \u003cli\u003e\u003ca href=\"https://github.com/newren/git-filter-repo\"\u003egit filter-repo\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eWhen creating a plan for the rewrite, remember to have a checklist that you can use to verify outcomes and to remember\nall the steps involved in the process. If the repository migration from one provider to another hosting provider is\nrequired execute it together with the history rewrite. Plan the rewrite for a time that folks would not want to\npush code to the repo. We used Friday evening, and yes, we had to fix some issues over the weekend - not everything\nwent smoothly.\u003c/p\u003e\n\n\u003cp\u003eYou can have a copy of your old repository in READ-ONLY mode on the servers - it will serve as a \u003cstrong\u003ebackup\u003c/strong\u003e and will\ncontain the actual history.\u003c/p\u003e\n","contentSnippet":"The source code of Allegro iOS app for buyers used to be divided into separate modules hosted in multiple repositories\n(polyrepo). The\nsource code was migrated to a monorepo a few years back along with the history of all repos that constituted the app.\nUpdating source code of a module on one repository could affect another module hosted on a separate repository.\nVersioning modules and propagation of dependency update led to long release process of the entire application.\nOur main\nrepository for the iOS application thus became our monorepo. After 9 years of development of the app the repo size has\ngrown\nenormously and the git clone command became a nightmare taking too much time. We had a possibility to shrink the\nproject size during the\nmigration from an on-premise to an external git repo hosting provider.\nMonorepo scale\nGeneral repo scale\nThe General scale of our old repository was as follows:\nalmost 9 years of history with 91k + commits\n440k BLOBs were stored in the repo: multiple .png and\n.jpeg files, 3rd-party frameworks and toolset binaries. The unpacked size of the BLOBs would add up to 36 GB and\nthe biggest BLOB stored was 100+ MB\n680k git tree objects\nthe unpacked repo size on the main development branch was 8+ GB where the .git dir size after a clone was\n7+ GB. The .git directory contained compressed .png (4.5+ GB 🤯) and .pbxproj (600+ MB) files\nNew repo scale\nAfter the migration and history rewrite we shrank the repo size to:\n71k + commits\n230k BLOBs, where all BLOBs unpacked would add up to\n1.6 GB - this\nnumber also includes size of source code files, whereas assets and binaries were migrated to an external storage\n455k+ git tree objects\nHow did we do it?\nThe history-rewrite process required proper planning and a few steps:\nAnalysis of the old repo contents and its history\nCreating a reproducible procedure for the history rewrite\nDry running the procedure to test out the process\nPlanning and scheduling activities necessary to migrate the repo\nProper communication about the process to stakeholders (a.k.a. developers 👩‍💻👨‍💻)\nThe actual migration\nThe repo analysis\nGoals:\nfind items that can be removed from the history\nselect items that can be migrated to an external storage\nWe used tools such as git-sizer and\ngit-filter-repo tool to\nget information about types of files stored in the repository. If you wanted to do the same the workshops from\nGitHub Universe and\nthe scripts introduced there might be a good\nstarting point.\nFrom the analysis we were able to select the following items for complete removal from the history:\ndeleted dirs and files\nunwanted paths: e.g. Pods/, invalid symlinks causing deep nesting of paths\nunwanted history of paths: e.g. Vendor for storing 3rd party dependencies or Toolset with binaries\nunwanted files: .e.g .pbxproj that can be generated by XcodeGen and their\nhistory is meaningless (600+ MB savings in our case), history of BLOB files such as .jpg, .png, .a,\n.dylib, .pdf, .zip, .mp4, .json\nWe decided to track BLOBs using Git LFS (Large File Storage). In our case the\nfollowing were a good use case for it:\nlarge binary files .jpg, .png, .a, .dylib, .pdf, .zip, .mp4, .json\nframework binaries\ntoolset binaries\nReproducible procedure and dry runs\nWe created a script that contained all commands that removed redundant items from the history. To remove items we used\ngit filter-repo - it‘s much more performant than git‘s built-in\n git filter-branch (do not use it!). Some examples of usage:\n\ngit filter-repo --invert-paths --path Pods/ --force\ngit filter-repo --invert-paths --paths-from-file remove.txt --force\ngit filter-repo --invert-paths --path-glob '*.pbxproj' --force\n\n\n\nAfter the removal we restored the most-recent version of binaries, frameworks and BLOBs to the repo and we tracked them\nwith Git LFS:\n\ngit lfs track \"*.png\"\ngit lfs track \"Vendor/SomeSDK/SomeSDK.framework/SomeSDK\"\n\n\n\nWe ran the script a few times to verify the output size of the repo. One crucial aspect after the run was to verify\nthat all plans on the CI (Continuous Integration) pass - we did it to check that the app still compiles, tests pass\nand no more files that the ones we had wanted were actually deleted.\nCommunication\nThe crucial aspect of introducing any change is communication. It‘s good to prepare it in advance, have team members\nreview it. We used a few channels so that our devs would get important info about the migration and history rewrite\nthrough the channel that suited their working habits best (e-mails, instant messaging tool, dev forums).\nSome final thoughts\nIt took a large amount of time to prepare the migration, understand the history of the repository and select proper\nitems and\nstrategies for the migration. The links here might be a good starting point if you wanted to rewrite histories of your\noverweight repos:\nGitHub Universe Workshops and corresponding\nrepository\ngit-sizer\ngit filter-repo\nWhen creating a plan for the rewrite, remember to have a checklist that you can use to verify outcomes and to remember\nall the steps involved in the process. If the repository migration from one provider to another hosting provider is\nrequired execute it together with the history rewrite. Plan the rewrite for a time that folks would not want to\npush code to the repo. We used Friday evening, and yes, we had to fix some issues over the weekend - not everything\nwent smoothly.\nYou can have a copy of your old repository in READ-ONLY mode on the servers - it will serve as a backup and will\ncontain the actual history.","guid":"https://blog.allegro.tech/2022/01/shrinking-size-of-monorepo.html","categories":["tech","ios","git","mobile","swift","objectivec"],"isoDate":"2022-01-11T23:00:00.000Z","thumbnail":"images/post-headers/ios.png"},{"title":"Evaluating performance of time series collections","link":"https://blog.allegro.tech/2021/12/performance-evaluation-of-timeseries.html","pubDate":"Mon, 20 Dec 2021 00:00:00 +0100","authors":{"author":[{"name":["Michał Knasiecki"],"photo":["https://blog.allegro.tech/img/authors/michal.knasiecki.jpg"],"url":["https://blog.allegro.tech/authors/michal.knasiecki"]}]},"content":"\u003cp\u003eA few years ago, I was working on a new version of \u003ca href=\"https://allegro.tech\"\u003eAllegro\u003c/a\u003e purchase ratings.\nIt was a time of a pretty large revolution in the rating system when we moved this product away from our monolith, also\nintroducing quite significant changes to the concept of purchase rating itself. Replacing the system of positive, neutral\nor negative rating, we introduced an approach based on “thumbs up” and “thumbs down” as well as the option to rate several\nelements of the purchase separately: the time and cost of delivery, or products’ conformity with its description. The\nproduct-related revolution was accompanied by a major change in technology. Apart from transitioning towards the\nmicroservices architecture, we also decided to migrate data from a large relational database to MongoDB. There were many\nreasons for this decision: from the non-relational nature of our model, through the need for easier scaling, to the wish\nfor cost reduction. Upon completion of the works, we were for the most part content with the decision that we made. The\nnew solution was more user-friendly, easier to maintain and worked smoothly. The sole exception was aggregation queries,\nspecifically: determining the average of seller ratings in a specified period of time. While at the level of the 99th\npercentile times were very low, some queries were much slower. We spent a lot of time optimising both queries and the\ncode, and had to use some programming tricks to achieve satisfactory results. While we were able to solve our problems in\nthe end, the final conclusion was that the aggregation of data in large MongoDB collections is quite challenging.\u003c/p\u003e\n\n\u003ch2 id=\"to-the-rescue-time-series\"\u003eTo the rescue: Time series\u003c/h2\u003e\n\u003cp\u003eA new version of MongoDB, 5.0, has been recently launched. The list of changes included one that I found particularly\ninteresting: the time series collections. It is a method of effective storing and processing of time-ordered value series.\nA classic example for this case is measuring the temperature of air. These measurements are taken\nperiodically (for instance every hour), and their sequence forms time series. We then often review such data in an\nappropriate order, as well as calculate the maximum and minimum values, or the arithmetic mean. Therefore, in the said\ncase of use, a database must be highly efficient when saving the data, store records in a compact manner due to the\nlarge number thereof, and must quickly calculate aggregates. Although in the case of temperature readings database write\noperations are made on a regular basis, it turns out that in the case of time series it is not mandatory, and the only\nthing that truly matters is the presence of time. While reading about this topic, I instantly remembered my countless\nlate nights struggling with slow ratings aggregations. Therefore, I decided to explore this topic and see how the\nsolution works in practice.\u003c/p\u003e\n\n\u003cp\u003eBefore the release of MongoDB 5.0, the only way to efficiently process time series was to store pre-calculated\naggregates, or use a \u003ca href=\"https://www.mongodb.com/blog/post/building-with-patterns-the-bucket-pattern\"\u003ebucket pattern\u003c/a\u003e,\nwhich was obviously associated with additional work and complexity of the\ncode. Now, things have been made much easier as this additional complexity is covered by a convenient abstraction. In\nMongoDB, time series are not actual collections, but materialised views that cover physical collections. This\nabstraction is intended to simplify complicated operations based on “buckets” of documents. You can read more about the\nconcept of storing data in the new kind of collection on the MongoDB \u003ca href=\"https://www.mongodb.com/developer/how-to/new-time-series-collections/\"\u003eofficial blog\u003c/a\u003e.\nEveryone who is interested in using this solution should take a look at it. In my article, on the other hand, I would\nlike to verify whether the processing of time series is really as fast as promised by the authors.\u003c/p\u003e\n\n\u003ch2 id=\"data-preparation\"\u003eData preparation\u003c/h2\u003e\n\u003cp\u003eFor the purposes of our considerations I will use a simple document describing the rating in the form of:\u003c/p\u003e\n\n\u003cdiv class=\"language-plaintext highlighter-rouge\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight\"\u003e\u003ccode\u003e{\n    \"timestamp\" : ISODate(\"2021-10-22T00:00:00.000Z\"),\n    \"rating\" : 2.0\n}\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eAttentive readers will immediately notice the absence of the field containing the ID of the seller whom the rating\nconcerns. It was done intentionally, otherwise I would have to\ncreate an additional index covering this field. However, I did not want to introduce any additional elements in my\nexperiment that could have any impact on the results. Let’s assume for this experiment that we are rating a\nrestaurant, not Allegro sellers, therefore all ratings in the collection concern the restaurant only.\u003c/p\u003e\n\n\u003cp\u003eNow we can create two collections storing an identical set of data. One will be a standard collection, and the other will\nbe a time series. The time series collection has to be created manually by indicating the field specifying the time label:\u003c/p\u003e\n\n\u003cdiv class=\"language-javascript highlighter-rouge\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight\"\u003e\u003ccode\u003e\u003cspan class=\"nx\"\u003edb\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003ecreateCollection\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003ecoll-ts\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"na\"\u003etimeseries\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"na\"\u003etimeField\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003etimestamp\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e \u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eIf you did not install Mongo 5.0 from scratch, but updated its previous version, you should make sure that\nit is set to an adequate level of compatibility. Otherwise, the above command will not create a time series collection.\nYou can check it with this command:\u003c/p\u003e\n\n\u003cdiv class=\"language-javascript highlighter-rouge\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight\"\u003e\u003ccode\u003e\u003cspan class=\"nx\"\u003edb\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eadminCommand\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"na\"\u003egetParameter\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"na\"\u003efeatureCompatibilityVersion\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e \u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eIf the returned value is less than 5.0, you need to issue:\u003c/p\u003e\n\n\u003cdiv class=\"language-javascript highlighter-rouge\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight\"\u003e\u003ccode\u003e\u003cspan class=\"nx\"\u003edb\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eadminCommand\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"na\"\u003esetFeatureCompatibilityVersion\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003e5.0\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e \u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eUpon creating a collection, it is also worth checking that a time series has actually been created:\u003c/p\u003e\n\n\u003cdiv class=\"language-javascript highlighter-rouge\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight\"\u003e\u003ccode\u003e\u003cspan class=\"nx\"\u003edb\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003erunCommand\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"na\"\u003elistCollections\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"mf\"\u003e1.0\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e \u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eWe look for \u003ccode class=\"language-plaintext highlighter-rouge\"\u003e\"type\" : \"timeseries\"\u003c/code\u003e entry:\u003c/p\u003e\n\n\u003cdiv class=\"language-plaintext highlighter-rouge\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight\"\u003e\u003ccode\u003e{\n    \"name\" : \"coll-ts\",\n    \"type\" : \"timeseries\",\n    \"options\" : {\n        \"timeseries\" : {\n            \"timeField\" : \"timestamp\",\n            \"granularity\" : \"seconds\",\n            \"bucketMaxSpanSeconds\" : 3600\n        }\n    },\n    \"info\" : {\n        \"readOnly\" : false\n    }\n}\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eWe will also create the second collection manually (although it is not necessary, because it would be created with the\nfirst INSERT command). We will want to check the speed of data search based on time field, so we will create a unique index:\u003c/p\u003e\n\n\u003cdiv class=\"language-javascript highlighter-rouge\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight\"\u003e\u003ccode\u003e\u003cspan class=\"nx\"\u003edb\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003ecreateCollection\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003ecoll-ord\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"nx\"\u003edb\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003egetCollection\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"s1\"\u003ecoll-ord\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"nx\"\u003ecreateIndex\u003c/span\u003e\u003cspan class=\"p\"\u003e({\u003c/span\u003e\u003cspan class=\"na\"\u003etimestamp\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e},\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"na\"\u003eunique\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"kc\"\u003etrue\u003c/span\u003e\u003cspan class=\"p\"\u003e})\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eLet’s use the following scripts to fill both collections with 10 million documents:\u003c/p\u003e\n\n\u003cdiv class=\"language-javascript highlighter-rouge\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight\"\u003e\u003ccode\u003e\u003cspan class=\"c1\"\u003e// Save as fill-ts.js\u003c/span\u003e\n\u003cspan class=\"kd\"\u003evar\u003c/span\u003e \u003cspan class=\"nx\"\u003ebulk\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003edb\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003egetCollection\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003ecoll-ts\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"nx\"\u003einitializeUnorderedBulkOp\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\u003cspan class=\"kd\"\u003evar\u003c/span\u003e \u003cspan class=\"nx\"\u003estartTime\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nb\"\u003eDate\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003e2021-10-22T00:00:00.000Z\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"k\"\u003efor\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kd\"\u003elet\u003c/span\u003e \u003cspan class=\"nx\"\u003ei\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"nx\"\u003ei\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"mi\"\u003e10000000\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"nx\"\u003ei\u003c/span\u003e\u003cspan class=\"o\"\u003e++\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"nx\"\u003ebulk\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003einsert\u003c/span\u003e\u003cspan class=\"p\"\u003e({\u003c/span\u003e\n       \u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003etimestamp\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nb\"\u003eDate\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003estartTime\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003egetTime\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e \u003cspan class=\"nx\"\u003ei\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"mi\"\u003e60000\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e\n       \u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003erating\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"nb\"\u003eMath\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003efloor\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e \u003cspan class=\"nb\"\u003eMath\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003erandom\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"mi\"\u003e4\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e})\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"nx\"\u003ebulk\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eexecute\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cdiv class=\"language-javascript highlighter-rouge\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight\"\u003e\u003ccode\u003e\u003cspan class=\"c1\"\u003e// Save as fill-ord.js\u003c/span\u003e\n\u003cspan class=\"kd\"\u003evar\u003c/span\u003e \u003cspan class=\"nx\"\u003ebulk\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003edb\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003egetCollection\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003ecoll-ord\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"nx\"\u003einitializeUnorderedBulkOp\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\u003cspan class=\"kd\"\u003evar\u003c/span\u003e \u003cspan class=\"nx\"\u003estartTime\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nb\"\u003eDate\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003e2021-10-22T00:00:00.000Z\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"k\"\u003efor\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kd\"\u003elet\u003c/span\u003e \u003cspan class=\"nx\"\u003ei\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"nx\"\u003ei\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"mi\"\u003e10000000\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"nx\"\u003ei\u003c/span\u003e\u003cspan class=\"o\"\u003e++\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"nx\"\u003ebulk\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003einsert\u003c/span\u003e\u003cspan class=\"p\"\u003e({\u003c/span\u003e\n       \u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003etimestamp\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nb\"\u003eDate\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003estartTime\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003egetTime\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e \u003cspan class=\"nx\"\u003ei\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"mi\"\u003e60000\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e\n       \u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003erating\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"nb\"\u003eMath\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003efloor\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e \u003cspan class=\"nb\"\u003eMath\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003erandom\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"mi\"\u003e4\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e})\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"nx\"\u003ebulk\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eexecute\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eIt is worth to measure the execution time of scripts to compare write times to both collections. For this purpose I use\n\u003ccode class=\"language-plaintext highlighter-rouge\"\u003etime\u003c/code\u003e command and \u003ccode class=\"language-plaintext highlighter-rouge\"\u003emongo\u003c/code\u003e command-line client, \u003ccode class=\"language-plaintext highlighter-rouge\"\u003etest\u003c/code\u003e is the name of my database.\nTo avoid network latency I perform the measurements on my laptop with a local instance of MongoDB version 5.0.3 running.\u003c/p\u003e\n\n\u003cdiv class=\"language-shell highlighter-rouge\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight\"\u003e\u003ccode\u003e\u003cspan class=\"nb\"\u003etime \u003c/span\u003emongo \u003cspan class=\"nb\"\u003etest \u003c/span\u003efill-ts.js\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cdiv class=\"language-shell highlighter-rouge\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight\"\u003e\u003ccode\u003e\u003cspan class=\"nb\"\u003etime \u003c/span\u003emongo \u003cspan class=\"nb\"\u003etest \u003c/span\u003efill-ord.js\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eAs expected, the filling of the time series collection was faster: 3:30,11 vs 4:39,48. Such a difference can be essential\nif our system performs many write operations in a short period of time. At the very beginning of our experiments\ncollection of a new type comes to the forefront.\u003c/p\u003e\n\n\u003cp\u003eNow when our collections already contain data, we can take a look at the size of files. On the\n\u003ca href=\"https://docs.mongodb.com/manual/core/timeseries-collections/\"\u003emanual page\u003c/a\u003e we can read that:\u003c/p\u003e\n\n\u003cblockquote\u003e\n  \u003cp\u003eCompared to normal collections, storing time series data in time series collections improves query efficiency and\nreduces the disk usage\u003c/p\u003e\n\u003c/blockquote\u003e\n\n\u003cp\u003eLet’s find out how true that is.\u003c/p\u003e\n\n\u003ch2 id=\"a-closer-look-at-the-data\"\u003eA closer look at the data\u003c/h2\u003e\n\n\u003cp\u003eIn the first place, it is worth making sure that documents in both collections look the same:\u003c/p\u003e\n\n\u003cdiv class=\"language-javascript highlighter-rouge\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight\"\u003e\u003ccode\u003e\u003cspan class=\"nx\"\u003edb\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003egetCollection\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"s1\"\u003ecoll-ts\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"nx\"\u003efind\u003c/span\u003e\u003cspan class=\"p\"\u003e({}).\u003c/span\u003e\u003cspan class=\"nx\"\u003elimit\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"nx\"\u003edb\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003egetCollection\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"s1\"\u003ecoll-ord\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"nx\"\u003efind\u003c/span\u003e\u003cspan class=\"p\"\u003e({}).\u003c/span\u003e\u003cspan class=\"nx\"\u003elimit\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eBoth documents should be similar to this one:\u003c/p\u003e\n\n\u003cdiv class=\"language-plaintext highlighter-rouge\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight\"\u003e\u003ccode\u003e{\n    \"timestamp\" : ISODate(\"2021-10-22T00:00:00.000Z\"),\n    \"_id\" : ObjectId(\"6184126fc42d1ab73d5208e4\"),\n    \"rating\" : 2.0\n}\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eThe documents have the same schema. In addition, the \u003ccode class=\"language-plaintext highlighter-rouge\"\u003e_id\u003c/code\u003e key was automatically generated in both cases, although our\nfilling script did not contain them.\u003c/p\u003e\n\n\u003cp\u003eLet’s move on to indexes now and use the commands: \u003ccode class=\"language-plaintext highlighter-rouge\"\u003edb.getCollection('coll-ord').getIndexes()\u003c/code\u003e and \u003ccode class=\"language-plaintext highlighter-rouge\"\u003edb.getCollection('coll-ts').getIndexes()\u003c/code\u003e\nto get the indexes of both collections.\u003c/p\u003e\n\n\u003cp\u003eThe normal collection has two indexes, one that was created automatically for the \u003ccode class=\"language-plaintext highlighter-rouge\"\u003e_id\u003c/code\u003e key and the one that we created manually:\u003c/p\u003e\n\n\u003cdiv class=\"language-plaintext highlighter-rouge\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight\"\u003e\u003ccode\u003e// coll-ord:\n[\n    {\n        \"v\" : 2,\n        \"key\" : {\n            \"_id\" : 1\n        },\n        \"name\" : \"_id_\"\n    },\n    {\n        \"v\" : 2,\n        \"key\" : {\n            \"timestamp\" : 1.0\n        },\n        \"name\" : \"timestamp_1\",\n        \"unique\" : true\n    }\n]\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eWhat is interesting is that the time series collection has no index at all:\u003c/p\u003e\n\n\u003cdiv class=\"language-plaintext highlighter-rouge\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight\"\u003e\u003ccode\u003e// coll-ts:\n[]\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eThe lack of the index for the \u003ccode class=\"language-plaintext highlighter-rouge\"\u003e_id\u003c/code\u003e key of\ncourse means that, by default, the time series collection will have to perform the \u003ccode class=\"language-plaintext highlighter-rouge\"\u003eCOLLSCAN\u003c/code\u003e operation if we want to\nsearch documents based on \u003ccode class=\"language-plaintext highlighter-rouge\"\u003e_id\u003c/code\u003e. The index is probably missing simply to save disc space and storage time,\nstemming from the assumption that the time series collections are mainly used to search based on time. The lack of\nthe index for the timestamp field is much more surprising. Does it mean that time-based searches in time series will\nalso cause \u003ccode class=\"language-plaintext highlighter-rouge\"\u003eCOLLCSAN\u003c/code\u003e and work slowly? The answer to this question can be found in the documentation:\u003c/p\u003e\n\u003cblockquote\u003e\n  \u003cp\u003eThe internal index for a time series collection is not displayed\u003c/p\u003e\n\u003c/blockquote\u003e\n\n\u003cp\u003eSo, there actually is an index, but it is different from those created manually, and even from indexes created\nautomatically for the \u003ccode class=\"language-plaintext highlighter-rouge\"\u003e_id\u003c/code\u003e key.\nAs I wrote in another \u003ca href=\"/2021/10/comparing-mongodb-composite-indexes.html\"\u003epost\u003c/a\u003e, indexes are not all the\nsame, so it’s worth taking a closer look at this one. Let’s check the query execution plans:\u003c/p\u003e\n\n\u003cdiv class=\"language-javascript highlighter-rouge\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight\"\u003e\u003ccode\u003e\u003cspan class=\"nx\"\u003edb\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003egetCollection\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"s1\"\u003ecoll-ord\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"nx\"\u003efind\u003c/span\u003e\u003cspan class=\"p\"\u003e({\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003etimestamp\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"nx\"\u003eISODate\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003e2021-10-22T00:00:00.000Z\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)}).\u003c/span\u003e\u003cspan class=\"nx\"\u003eexplain\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"s1\"\u003eexecutionStats\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"nx\"\u003edb\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003egetCollection\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"s1\"\u003ecoll-ts\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"nx\"\u003efind\u003c/span\u003e\u003cspan class=\"p\"\u003e({\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003etimestamp\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"nx\"\u003eISODate\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003e2021-10-22T00:00:00.000Z\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)}).\u003c/span\u003e\u003cspan class=\"nx\"\u003eexplain\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"s1\"\u003eexecutionStats\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cdiv class=\"language-plaintext highlighter-rouge\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight\"\u003e\u003ccode\u003e//coll-ord\n\"winningPlan\" : {\n    \"stage\" : \"FETCH\",\n    \"inputStage\" : {\n        \"stage\" : \"IXSCAN\",\n        \"keyPattern\" : {\n            \"timestamp\" : 1.0\n        }\n    },\n    \"indexName\" : \"timestamp_1\",\n}\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cdiv class=\"language-plaintext highlighter-rouge\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight\"\u003e\u003ccode\u003e//coll-ts\n\"winningPlan\" : {\n    \"stage\" : \"COLLSCAN\",\n    \"filter\" : {\n        \"$and\" : [\n            {\n                \"_id\" : {\n                    \"$lte\" : ObjectId(\"6171ff00ffffffffffffffff\")\n                }\n            },\n            {\n                \"_id\" : {\n                    \"$gte\" : ObjectId(\"6171f0f00000000000000000\")\n                }\n            },\n            {\n                \"control.max.timestamp\" : {\n                    \"$_internalExprGte\" : ISODate(\"2021-10-22T00:00:00.000Z\")\n                }\n            },\n            {\n                \"control.min.timestamp\" : {\n                    \"$_internalExprLte\" : ISODate(\"2021-10-22T00:00:00.000Z\")\n                }\n            }\n        ]\n    },\n}\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eIt turns out that while in the case of the regular collection the plan shows the use of the index, in the time series\ncollection we see the \u003ccode class=\"language-plaintext highlighter-rouge\"\u003eCOLLSCAN\u003c/code\u003e operation. It doesn’t mean that this operation is slow, though. The execution times of\nboth operations were similar. We will move on to a more detailed time comparison in a moment; for now we should only\nnote that the hidden index in the time series collection follows specific rules, it is not only invisible, but it also\ncannot be seen in the execution plan, although it clearly affects the speed of the search.\u003c/p\u003e\n\n\u003cp\u003eAnd what happens if we add sorting?\u003c/p\u003e\n\n\u003cdiv class=\"language-javascript highlighter-rouge\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight\"\u003e\u003ccode\u003e\u003cspan class=\"nx\"\u003edb\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003egetCollection\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"s1\"\u003ecoll-ts\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"nx\"\u003efind\u003c/span\u003e\u003cspan class=\"p\"\u003e({}).\u003c/span\u003e\u003cspan class=\"nx\"\u003esort\u003c/span\u003e\u003cspan class=\"p\"\u003e({\u003c/span\u003e\u003cspan class=\"na\"\u003etimestamp\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e})\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cdiv class=\"language-plaintext highlighter-rouge\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight\"\u003e\u003ccode\u003e{\n \"ok\" : 0,\n \"errmsg\" : \"PlanExecutor error during aggregation :: caused by :: Sort exceeded memory limit of 104857600 bytes,\n but did not opt in to external sorting.\",\n \"code\" : 292,\n \"codeName\" : \"QueryExceededMemoryLimitNoDiskUseAllowed\"\n}\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eSurprise! The internal index for the time series collection does not have a sorting feature. This means that if we add\nthe sort clause to our query, the operation will take very long, or even fail because of exceeding the memory\nlimit. It is surprising because I did not find any information on this in the documentation. Therefore, if we plan to\nsort our data based on the field with time, we will need to index this field manually. It means, of\ncourse, that the benefits stemming from a lower disc usage and faster saving times will unfortunately diminish.\u003c/p\u003e\n\n\u003cp\u003eSince we are talking about the use of disc space, let’s check the data size:\u003c/p\u003e\n\n\u003cdiv class=\"language-javascript highlighter-rouge\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight\"\u003e\u003ccode\u003e\u003cspan class=\"nx\"\u003edb\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003egetCollection\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"s1\"\u003ecoll-ts\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"nx\"\u003estats\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n\u003cspan class=\"nx\"\u003edb\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003egetCollection\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"s1\"\u003ecoll-ord\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"nx\"\u003estats\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eWe will compare several fields:\u003c/p\u003e\n\n\u003cul\u003e\n  \u003cli\u003e\u003ccode class=\"language-plaintext highlighter-rouge\"\u003esize\u003c/code\u003e: data size before the compression,\u003c/li\u003e\n  \u003cli\u003e\u003ccode class=\"language-plaintext highlighter-rouge\"\u003estorageSize\u003c/code\u003e: size of data after the compression,\u003c/li\u003e\n  \u003cli\u003e\u003ccode class=\"language-plaintext highlighter-rouge\"\u003etotalIndexSize\u003c/code\u003e: size of indexes,\u003c/li\u003e\n  \u003cli\u003e\u003ccode class=\"language-plaintext highlighter-rouge\"\u003etotalSize\u003c/code\u003e: total size of data and indexes.\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eResults are gathered in the table below (in bytes, space is thousand separator):\u003c/p\u003e\n\n\u003ctable\u003e\n  \u003cthead\u003e\n    \u003ctr\u003e\n      \u003cth\u003eField\u003c/th\u003e\n      \u003cth style=\"text-align: right\"\u003eNormal collection\u003c/th\u003e\n      \u003cth style=\"text-align: right\"\u003eTime series collection\u003c/th\u003e\n      \u003cth style=\"text-align: center\"\u003eDiff\u003c/th\u003e\n    \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n    \u003ctr\u003e\n      \u003ctd\u003esize\u003c/td\u003e\n      \u003ctd style=\"text-align: right\"\u003e570 000 000\u003c/td\u003e\n      \u003ctd style=\"text-align: right\"\u003e747 855 228\u003c/td\u003e\n      \u003ctd style=\"text-align: center\"\u003e+ 31%\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003ctd\u003estorageSize\u003c/td\u003e\n      \u003ctd style=\"text-align: right\"\u003e175 407 104\u003c/td\u003e\n      \u003ctd style=\"text-align: right\"\u003e119 410 688\u003c/td\u003e\n      \u003ctd style=\"text-align: center\"\u003e-31%\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003ctd\u003etotalIndexSize\u003c/td\u003e\n      \u003ctd style=\"text-align: right\"\u003e232 701 952\u003c/td\u003e\n      \u003ctd style=\"text-align: right\"\u003e0\u003c/td\u003e\n      \u003ctd style=\"text-align: center\"\u003e-100%\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003ctd\u003etotalSize\u003c/td\u003e\n      \u003ctd style=\"text-align: right\"\u003e408 109 056\u003c/td\u003e\n      \u003ctd style=\"text-align: right\"\u003e119 410 688\u003c/td\u003e\n      \u003ctd style=\"text-align: center\"\u003e-70%\u003c/td\u003e\n    \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\n\u003cp\u003eAs you can see, raw data of the time series collection may take up more space, but after their compression the new-type\ncollection turns out to be the winner in the size-on-disc category. After adding the size of indexes created in the\nregular collection, the difference will be even greater. Therefore, we must admit that the way time series data are\npacked on the disc is impressive.\u003c/p\u003e\n\n\u003cp\u003eNow it’s time to compare query execution times for both collections.\u003c/p\u003e\n\n\u003ch2 id=\"speed-is-all-that-matters\"\u003eSpeed is all that matters\u003c/h2\u003e\n\n\u003cp\u003eUsing the script below (saved as \u003ccode class=\"language-plaintext highlighter-rouge\"\u003egen-find.sh\u003c/code\u003e file), I generated two files containing commands getting documents from\nboth collections based on the\ntime label:\u003c/p\u003e\n\n\u003cdiv class=\"language-shell highlighter-rouge\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight\"\u003e\u003ccode\u003e\u003cspan class=\"c\"\u003e#!/bin/bash\u003c/span\u003e\n\u003cspan class=\"nv\"\u003eRANDOM\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e42\n\u003cspan class=\"k\"\u003efor\u003c/span\u003e \u003cspan class=\"o\"\u003e((\u003c/span\u003ei \u003cspan class=\"o\"\u003e=\u003c/span\u003e 1\u003cspan class=\"p\"\u003e;\u003c/span\u003e i \u0026lt;\u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nv\"\u003e$1\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e i++ \u003cspan class=\"o\"\u003e))\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003edo\n  \u003c/span\u003e\u003cspan class=\"nv\"\u003ex\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"k\"\u003e$((\u003c/span\u003e \u003cspan class=\"nv\"\u003e$RANDOM\u003c/span\u003e \u003cspan class=\"o\"\u003e%\u003c/span\u003e \u003cspan class=\"m\"\u003e10000000\u003c/span\u003e\u003cspan class=\"k\"\u003e))\u003c/span\u003e\n  \u003cspan class=\"nv\"\u003et\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"si\"\u003e$(\u003c/span\u003e\u003cspan class=\"nb\"\u003edate\u003c/span\u003e \u003cspan class=\"nt\"\u003e-jv\u003c/span\u003e +\u003cspan class=\"k\"\u003e${\u003c/span\u003e\u003cspan class=\"nv\"\u003ex\u003c/span\u003e\u003cspan class=\"k\"\u003e}\u003c/span\u003eM \u003cspan class=\"nt\"\u003e-f\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"%Y-%m-%d %H:%M:%S\"\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"2021-10-22 0:00:00\"\u003c/span\u003e +%Y-%m-%dT%H:%M:%S\u003cspan class=\"si\"\u003e)\u003c/span\u003e\n  \u003cspan class=\"nb\"\u003eecho\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"db.getCollection('\u003c/span\u003e\u003cspan class=\"nv\"\u003e$2\u003c/span\u003e\u003cspan class=\"s2\"\u003e').find({'timestamp' : new ISODate('\u003c/span\u003e\u003cspan class=\"nv\"\u003e$t\u003c/span\u003e\u003cspan class=\"s2\"\u003e')})\"\u003c/span\u003e\n\u003cspan class=\"k\"\u003edone\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026gt;\u0026gt;\u003c/span\u003e find-\u003cspan class=\"nv\"\u003e$2\u003c/span\u003e.js\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eThe script takes as parameters: the number of queries, and the name of the collection that we want to search. I\ngenerated a million queries (it may take some time depending on your hardware, so you can start with a lower amount of\nqueries):\u003c/p\u003e\n\n\u003cdiv class=\"language-shell highlighter-rouge\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight\"\u003e\u003ccode\u003e./gen-find.sh 1000000 coll-ts\n./gen-find.sh 1000000 coll-ord\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eThen I checked the time of the execution of both query sequences using the command:\u003c/p\u003e\n\n\u003cdiv class=\"language-shell highlighter-rouge\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight\"\u003e\u003ccode\u003e\u003cspan class=\"nb\"\u003etime \u003c/span\u003emongo \u003cspan class=\"nb\"\u003etest \u003c/span\u003efind-coll-ts.js\n\u003cspan class=\"nb\"\u003etime \u003c/span\u003emongo \u003cspan class=\"nb\"\u003etest \u003c/span\u003efind-coll-ord.js\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eThe standard collection was a bit slower: 16,854 for \u003ccode class=\"language-plaintext highlighter-rouge\"\u003ecoll-ord\u003c/code\u003e vs 16,038 for \u003ccode class=\"language-plaintext highlighter-rouge\"\u003ecoll-ts\u003c/code\u003e. Although the difference is small,\nanother point goes to time series: simple search is slightly faster than in the case of the regular collection.\u003c/p\u003e\n\n\u003cp\u003eBut we’re yet to discuss the most interesting part. Time series is primarily used for quick aggregate counting. Let’s\nsee what the comparison looks like when calculating the arithmetic mean in a given time interval.\u003c/p\u003e\n\n\u003cp\u003eThe script below (saved as \u003ccode class=\"language-plaintext highlighter-rouge\"\u003egen-aggregate.sh\u003c/code\u003e) creates a list of queries calculating the arithmetic mean of ratings for\na randomly selected six-hour interval:\u003c/p\u003e\n\n\u003cdiv class=\"language-shell highlighter-rouge\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight\"\u003e\u003ccode\u003e\u003cspan class=\"c\"\u003e#!/bin/bash\u003c/span\u003e\n\u003cspan class=\"nv\"\u003eRANDOM\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e42\n\u003cspan class=\"k\"\u003efor\u003c/span\u003e \u003cspan class=\"o\"\u003e((\u003c/span\u003ei \u003cspan class=\"o\"\u003e=\u003c/span\u003e 1\u003cspan class=\"p\"\u003e;\u003c/span\u003e i \u0026lt;\u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nv\"\u003e$1\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e i++ \u003cspan class=\"o\"\u003e))\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003edo\n  \u003c/span\u003e\u003cspan class=\"nv\"\u003ex1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"k\"\u003e$((\u003c/span\u003e \u003cspan class=\"nv\"\u003e$RANDOM\u003c/span\u003e \u003cspan class=\"o\"\u003e%\u003c/span\u003e \u003cspan class=\"m\"\u003e10000000\u003c/span\u003e\u003cspan class=\"k\"\u003e))\u003c/span\u003e\n  \u003cspan class=\"nv\"\u003ex2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"k\"\u003e$((\u003c/span\u003e x1 \u003cspan class=\"o\"\u003e+\u003c/span\u003e \u003cspan class=\"m\"\u003e360\u003c/span\u003e\u003cspan class=\"k\"\u003e))\u003c/span\u003e\n  \u003cspan class=\"nv\"\u003et1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"si\"\u003e$(\u003c/span\u003e\u003cspan class=\"nb\"\u003edate\u003c/span\u003e \u003cspan class=\"nt\"\u003e-jv\u003c/span\u003e +\u003cspan class=\"k\"\u003e${\u003c/span\u003e\u003cspan class=\"nv\"\u003ex1\u003c/span\u003e\u003cspan class=\"k\"\u003e}\u003c/span\u003eM \u003cspan class=\"nt\"\u003e-f\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"%Y-%m-%d %H:%M:%S\"\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"2021-10-22 0:00:00\"\u003c/span\u003e +%Y-%m-%dT%H:%M:%S\u003cspan class=\"si\"\u003e)\u003c/span\u003e\n  \u003cspan class=\"nv\"\u003et2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"si\"\u003e$(\u003c/span\u003e\u003cspan class=\"nb\"\u003edate\u003c/span\u003e \u003cspan class=\"nt\"\u003e-jv\u003c/span\u003e +\u003cspan class=\"k\"\u003e${\u003c/span\u003e\u003cspan class=\"nv\"\u003ex2\u003c/span\u003e\u003cspan class=\"k\"\u003e}\u003c/span\u003eM \u003cspan class=\"nt\"\u003e-f\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"%Y-%m-%d %H:%M:%S\"\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"2021-10-22 0:00:00\"\u003c/span\u003e +%Y-%m-%dT%H:%M:%S\u003cspan class=\"si\"\u003e)\u003c/span\u003e\n  \u003cspan class=\"nb\"\u003eecho\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"db.getCollection('\u003c/span\u003e\u003cspan class=\"nv\"\u003e$2\u003c/span\u003e\u003cspan class=\"s2\"\u003e').aggregate([{ \u003c/span\u003e\u003cspan class=\"se\"\u003e\\$\u003c/span\u003e\u003cspan class=\"s2\"\u003ematch: { \"\u003c/span\u003etimestamp\u003cspan class=\"s2\"\u003e\" : \"\u003c/span\u003e \u003cspan class=\"se\"\u003e\\\u003c/span\u003e\n    \u003cspan class=\"s2\"\u003e\"{\u003c/span\u003e\u003cspan class=\"se\"\u003e\\$\u003c/span\u003e\u003cspan class=\"s2\"\u003egte:new ISODate('\u003c/span\u003e\u003cspan class=\"nv\"\u003e$t1\u003c/span\u003e\u003cspan class=\"s2\"\u003e'),\u003c/span\u003e\u003cspan class=\"se\"\u003e\\$\u003c/span\u003e\u003cspan class=\"s2\"\u003elt:new ISODate('\u003c/span\u003e\u003cspan class=\"nv\"\u003e$t2\u003c/span\u003e\u003cspan class=\"s2\"\u003e')} } },\"\u003c/span\u003e \u003cspan class=\"se\"\u003e\\\u003c/span\u003e\n    \u003cspan class=\"s2\"\u003e\"{ \u003c/span\u003e\u003cspan class=\"se\"\u003e\\$\u003c/span\u003e\u003cspan class=\"s2\"\u003egroup: { _id: null, avg: { \u003c/span\u003e\u003cspan class=\"se\"\u003e\\$\u003c/span\u003e\u003cspan class=\"s2\"\u003eavg: \u003c/span\u003e\u003cspan class=\"se\"\u003e\\\"\\$\u003c/span\u003e\u003cspan class=\"s2\"\u003erating\u003c/span\u003e\u003cspan class=\"se\"\u003e\\\"\u003c/span\u003e\u003cspan class=\"s2\"\u003e } } }])\"\u003c/span\u003e\n\u003cspan class=\"k\"\u003edone\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026gt;\u0026gt;\u003c/span\u003e aggregate-\u003cspan class=\"nv\"\u003e$2\u003c/span\u003e-\u003cspan class=\"nv\"\u003e$1\u003c/span\u003e.js\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eI prepared three script sets with: 10K, 50K and 100K queries for both collections:\u003c/p\u003e\n\n\u003cdiv class=\"language-shell highlighter-rouge\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight\"\u003e\u003ccode\u003e./gen-aggregate.sh 10000 coll-ts\n./gen-aggregate.sh 50000 coll-ts\n./gen-aggregate.sh 100000 coll-ts\n\n./gen-aggregate.sh 10000 coll-ord\n./gen-aggregate.sh 50000 coll-ord\n./gen-aggregate.sh 100000 coll-ord\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eI made the measurements using following commands:\u003c/p\u003e\n\n\u003cdiv class=\"language-shell highlighter-rouge\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight\"\u003e\u003ccode\u003e\u003cspan class=\"nb\"\u003etime \u003c/span\u003emongo \u003cspan class=\"nb\"\u003etest \u003c/span\u003eaggregate-coll-ts-10000.js\n\u003cspan class=\"nb\"\u003etime \u003c/span\u003emongo \u003cspan class=\"nb\"\u003etest \u003c/span\u003eaggregate-coll-ord-10000.js\n\n\u003cspan class=\"nb\"\u003etime \u003c/span\u003emongo \u003cspan class=\"nb\"\u003etest \u003c/span\u003eaggregate-coll-ts-50000.js\n\u003cspan class=\"nb\"\u003etime \u003c/span\u003emongo \u003cspan class=\"nb\"\u003etest \u003c/span\u003eaggregate-coll-ord-50000.js\n\n\u003cspan class=\"nb\"\u003etime \u003c/span\u003emongo \u003cspan class=\"nb\"\u003etest \u003c/span\u003eaggregate-coll-ts-100000.js\n\u003cspan class=\"nb\"\u003etime \u003c/span\u003emongo \u003cspan class=\"nb\"\u003etest \u003c/span\u003eaggregate-coll-ord-100000.js\n\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eThe results are shown in the table below:\u003c/p\u003e\n\n\u003ctable\u003e\n  \u003cthead\u003e\n    \u003ctr\u003e\n      \u003cth style=\"text-align: center\"\u003eNumber of queries\u003c/th\u003e\n      \u003cth style=\"text-align: right\"\u003eNormal collection [min:sec]\u003c/th\u003e\n      \u003cth style=\"text-align: right\"\u003eTime series [min:sec]\u003c/th\u003e\n      \u003cth style=\"text-align: center\"\u003eDiff\u003c/th\u003e\n    \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n    \u003ctr\u003e\n      \u003ctd style=\"text-align: center\"\u003e10000\u003c/td\u003e\n      \u003ctd style=\"text-align: right\"\u003e0:21,947\u003c/td\u003e\n      \u003ctd style=\"text-align: right\"\u003e0:16,835\u003c/td\u003e\n      \u003ctd style=\"text-align: center\"\u003e-23%\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003ctd style=\"text-align: center\"\u003e50000\u003c/td\u003e\n      \u003ctd style=\"text-align: right\"\u003e1:37,02\u003c/td\u003e\n      \u003ctd style=\"text-align: right\"\u003e1:11,18\u003c/td\u003e\n      \u003ctd style=\"text-align: center\"\u003e-26%\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003ctd style=\"text-align: center\"\u003e100000\u003c/td\u003e\n      \u003ctd style=\"text-align: right\"\u003e4:33,29\u003c/td\u003e\n      \u003ctd style=\"text-align: right\"\u003e2:21,37\u003c/td\u003e\n      \u003ctd style=\"text-align: center\"\u003e-48%\u003c/td\u003e\n    \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\n\u003cp\u003eAlthough there are far fewer queries this time than in the previous experiment, the differences in times are much\ngreater. It clearly proves that time series collections are indeed spreading their wings when we want to use aggregation\nqueries and have been developed mainly for this purpose. The reason is probably the sequential way of writing data,\nwhich shows a noticeable improvement when running ranged queries. The results clearly show also how much of an impact\nquery performance can have on an element that often doesn’t get the adequate attention: proper modelling the data.\u003c/p\u003e\n\n\u003ch2 id=\"limitations\"\u003eLimitations\u003c/h2\u003e\n\n\u003cp\u003eOf course, time series collections also have their limitations and should not be used as a golden hammer.\nWe have already mentioned the first one — the lack of the primary key index. It stems from the assumption\nthat searches will be primarily based on time, so there is no point in creating an index that will be useful for very\nfew people. Of course, we can create this index ourselves.\u003c/p\u003e\n\n\u003cp\u003eIt is also not possible to sort by time field, which is another inconvenience. If we want to have\nsorting queries, we have to create an additional index.\u003c/p\u003e\n\n\u003cp\u003eAlthough these two missing indexes may seem to be an easy thing to fix, we must remember that it involves additional use\nof disc space as well as longer indexing time during the saving of the document, which means that the benefits\nstemming from the use of time series will be somewhat reduced.\u003c/p\u003e\n\n\u003cp\u003eThe third, and perhaps most import limitation is the immutability of the document. Once saved, documents cannot be\nupdated or deleted. The only way to delete data is to use \u003ccode class=\"language-plaintext highlighter-rouge\"\u003edrop()\u003c/code\u003e command or to define retention for the collection\nusing the \u003ccode class=\"language-plaintext highlighter-rouge\"\u003eexpireAfterSeconds\u003c/code\u003e parameter, which, like TTL indexes, will automatically delete documents certain time\nafter creation.\u003c/p\u003e\n\n\u003cp\u003eThe lack of possibility to manipulate the saved documents will probably be the main reason why programmers will be\nhesitant to use time series. We should mention, however, that the authors of MongoDB will probably add the possibility\nto edit and delete documents in the future:\u003c/p\u003e\n\n\u003cblockquote\u003e\n  \u003cp\u003eWhile we know some of these limitations may be impactful to your current use case, we promise we’re working on this\nright now and would love for you to provide your feedback!\u003c/p\u003e\n\u003c/blockquote\u003e\n\n\u003ch2 id=\"summary\"\u003eSummary\u003c/h2\u003e\n\u003cp\u003eAdding the ability to store time series in MongoDB is a step in the right direction. First tests show that in certain\ncases the new type of collections really does work better than the regular ones. They use less disc space, are faster at\nsaving and searching by the time. But high performance always comes at a cost, in this case: the cost of reduced flexibility.\nTherefore, the final decision to use time series should be preceded by an analysis of\nadvantages and disadvantages of both in particular cases. We should also hope that the authors of the database are\nworking on improving it and will soon eliminate most limitations.\u003c/p\u003e\n","contentSnippet":"A few years ago, I was working on a new version of Allegro purchase ratings.\nIt was a time of a pretty large revolution in the rating system when we moved this product away from our monolith, also\nintroducing quite significant changes to the concept of purchase rating itself. Replacing the system of positive, neutral\nor negative rating, we introduced an approach based on “thumbs up” and “thumbs down” as well as the option to rate several\nelements of the purchase separately: the time and cost of delivery, or products’ conformity with its description. The\nproduct-related revolution was accompanied by a major change in technology. Apart from transitioning towards the\nmicroservices architecture, we also decided to migrate data from a large relational database to MongoDB. There were many\nreasons for this decision: from the non-relational nature of our model, through the need for easier scaling, to the wish\nfor cost reduction. Upon completion of the works, we were for the most part content with the decision that we made. The\nnew solution was more user-friendly, easier to maintain and worked smoothly. The sole exception was aggregation queries,\nspecifically: determining the average of seller ratings in a specified period of time. While at the level of the 99th\npercentile times were very low, some queries were much slower. We spent a lot of time optimising both queries and the\ncode, and had to use some programming tricks to achieve satisfactory results. While we were able to solve our problems in\nthe end, the final conclusion was that the aggregation of data in large MongoDB collections is quite challenging.\nTo the rescue: Time series\nA new version of MongoDB, 5.0, has been recently launched. The list of changes included one that I found particularly\ninteresting: the time series collections. It is a method of effective storing and processing of time-ordered value series.\nA classic example for this case is measuring the temperature of air. These measurements are taken\nperiodically (for instance every hour), and their sequence forms time series. We then often review such data in an\nappropriate order, as well as calculate the maximum and minimum values, or the arithmetic mean. Therefore, in the said\ncase of use, a database must be highly efficient when saving the data, store records in a compact manner due to the\nlarge number thereof, and must quickly calculate aggregates. Although in the case of temperature readings database write\noperations are made on a regular basis, it turns out that in the case of time series it is not mandatory, and the only\nthing that truly matters is the presence of time. While reading about this topic, I instantly remembered my countless\nlate nights struggling with slow ratings aggregations. Therefore, I decided to explore this topic and see how the\nsolution works in practice.\nBefore the release of MongoDB 5.0, the only way to efficiently process time series was to store pre-calculated\naggregates, or use a bucket pattern,\nwhich was obviously associated with additional work and complexity of the\ncode. Now, things have been made much easier as this additional complexity is covered by a convenient abstraction. In\nMongoDB, time series are not actual collections, but materialised views that cover physical collections. This\nabstraction is intended to simplify complicated operations based on “buckets” of documents. You can read more about the\nconcept of storing data in the new kind of collection on the MongoDB official blog.\nEveryone who is interested in using this solution should take a look at it. In my article, on the other hand, I would\nlike to verify whether the processing of time series is really as fast as promised by the authors.\nData preparation\nFor the purposes of our considerations I will use a simple document describing the rating in the form of:\n\n{\n    \"timestamp\" : ISODate(\"2021-10-22T00:00:00.000Z\"),\n    \"rating\" : 2.0\n}\n\n\nAttentive readers will immediately notice the absence of the field containing the ID of the seller whom the rating\nconcerns. It was done intentionally, otherwise I would have to\ncreate an additional index covering this field. However, I did not want to introduce any additional elements in my\nexperiment that could have any impact on the results. Let’s assume for this experiment that we are rating a\nrestaurant, not Allegro sellers, therefore all ratings in the collection concern the restaurant only.\nNow we can create two collections storing an identical set of data. One will be a standard collection, and the other will\nbe a time series. The time series collection has to be created manually by indicating the field specifying the time label:\n\ndb.createCollection(\"coll-ts\", { timeseries: { timeField: \"timestamp\" } } )\n\n\nIf you did not install Mongo 5.0 from scratch, but updated its previous version, you should make sure that\nit is set to an adequate level of compatibility. Otherwise, the above command will not create a time series collection.\nYou can check it with this command:\n\ndb.adminCommand( { getParameter: 1, featureCompatibilityVersion: 1 } )\n\n\nIf the returned value is less than 5.0, you need to issue:\n\ndb.adminCommand( { setFeatureCompatibilityVersion: \"5.0\" } )\n\n\nUpon creating a collection, it is also worth checking that a time series has actually been created:\n\ndb.runCommand( { listCollections: 1.0 } )\n\n\nWe look for \"type\" : \"timeseries\" entry:\n\n{\n    \"name\" : \"coll-ts\",\n    \"type\" : \"timeseries\",\n    \"options\" : {\n        \"timeseries\" : {\n            \"timeField\" : \"timestamp\",\n            \"granularity\" : \"seconds\",\n            \"bucketMaxSpanSeconds\" : 3600\n        }\n    },\n    \"info\" : {\n        \"readOnly\" : false\n    }\n}\n\n\nWe will also create the second collection manually (although it is not necessary, because it would be created with the\nfirst INSERT command). We will want to check the speed of data search based on time field, so we will create a unique index:\n\ndb.createCollection(\"coll-ord\")\ndb.getCollection('coll-ord').createIndex({timestamp: 1}, {unique: true})\n\n\nLet’s use the following scripts to fill both collections with 10 million documents:\n\n// Save as fill-ts.js\nvar bulk = db.getCollection(\"coll-ts\").initializeUnorderedBulkOp();\nvar startTime = new Date(\"2021-10-22T00:00:00.000Z\")\nfor (let i = 0; i \u003c 10000000; i++) {\n    bulk.insert({\n       \"timestamp\": new Date(startTime.getTime() + i * 60000),\n       \"rating\": Math.floor(1 + Math.random() * 4)\n    })\n}\nbulk.execute();\n\n\n\n// Save as fill-ord.js\nvar bulk = db.getCollection(\"coll-ord\").initializeUnorderedBulkOp();\nvar startTime = new Date(\"2021-10-22T00:00:00.000Z\")\nfor (let i = 0; i \u003c 10000000; i++) {\n    bulk.insert({\n       \"timestamp\": new Date(startTime.getTime() + i * 60000),\n       \"rating\": Math.floor(1 + Math.random() * 4)\n    })\n}\nbulk.execute();\n\n\nIt is worth to measure the execution time of scripts to compare write times to both collections. For this purpose I use\ntime command and mongo command-line client, test is the name of my database.\nTo avoid network latency I perform the measurements on my laptop with a local instance of MongoDB version 5.0.3 running.\n\ntime mongo test fill-ts.js\n\n\n\ntime mongo test fill-ord.js\n\n\nAs expected, the filling of the time series collection was faster: 3:30,11 vs 4:39,48. Such a difference can be essential\nif our system performs many write operations in a short period of time. At the very beginning of our experiments\ncollection of a new type comes to the forefront.\nNow when our collections already contain data, we can take a look at the size of files. On the\nmanual page we can read that:\nCompared to normal collections, storing time series data in time series collections improves query efficiency and\nreduces the disk usage\nLet’s find out how true that is.\nA closer look at the data\nIn the first place, it is worth making sure that documents in both collections look the same:\n\ndb.getCollection('coll-ts').find({}).limit(1)\ndb.getCollection('coll-ord').find({}).limit(1)\n\n\nBoth documents should be similar to this one:\n\n{\n    \"timestamp\" : ISODate(\"2021-10-22T00:00:00.000Z\"),\n    \"_id\" : ObjectId(\"6184126fc42d1ab73d5208e4\"),\n    \"rating\" : 2.0\n}\n\n\nThe documents have the same schema. In addition, the _id key was automatically generated in both cases, although our\nfilling script did not contain them.\nLet’s move on to indexes now and use the commands: db.getCollection('coll-ord').getIndexes() and db.getCollection('coll-ts').getIndexes()\nto get the indexes of both collections.\nThe normal collection has two indexes, one that was created automatically for the _id key and the one that we created manually:\n\n// coll-ord:\n[\n    {\n        \"v\" : 2,\n        \"key\" : {\n            \"_id\" : 1\n        },\n        \"name\" : \"_id_\"\n    },\n    {\n        \"v\" : 2,\n        \"key\" : {\n            \"timestamp\" : 1.0\n        },\n        \"name\" : \"timestamp_1\",\n        \"unique\" : true\n    }\n]\n\n\nWhat is interesting is that the time series collection has no index at all:\n\n// coll-ts:\n[]\n\n\nThe lack of the index for the _id key of\ncourse means that, by default, the time series collection will have to perform the COLLSCAN operation if we want to\nsearch documents based on _id. The index is probably missing simply to save disc space and storage time,\nstemming from the assumption that the time series collections are mainly used to search based on time. The lack of\nthe index for the timestamp field is much more surprising. Does it mean that time-based searches in time series will\nalso cause COLLCSAN and work slowly? The answer to this question can be found in the documentation:\nThe internal index for a time series collection is not displayed\nSo, there actually is an index, but it is different from those created manually, and even from indexes created\nautomatically for the _id key.\nAs I wrote in another post, indexes are not all the\nsame, so it’s worth taking a closer look at this one. Let’s check the query execution plans:\n\ndb.getCollection('coll-ord').find({\"timestamp\" : ISODate(\"2021-10-22T00:00:00.000Z\")}).explain('executionStats')\ndb.getCollection('coll-ts').find({\"timestamp\" : ISODate(\"2021-10-22T00:00:00.000Z\")}).explain('executionStats')\n\n\n\n//coll-ord\n\"winningPlan\" : {\n    \"stage\" : \"FETCH\",\n    \"inputStage\" : {\n        \"stage\" : \"IXSCAN\",\n        \"keyPattern\" : {\n            \"timestamp\" : 1.0\n        }\n    },\n    \"indexName\" : \"timestamp_1\",\n}\n\n\n\n//coll-ts\n\"winningPlan\" : {\n    \"stage\" : \"COLLSCAN\",\n    \"filter\" : {\n        \"$and\" : [\n            {\n                \"_id\" : {\n                    \"$lte\" : ObjectId(\"6171ff00ffffffffffffffff\")\n                }\n            },\n            {\n                \"_id\" : {\n                    \"$gte\" : ObjectId(\"6171f0f00000000000000000\")\n                }\n            },\n            {\n                \"control.max.timestamp\" : {\n                    \"$_internalExprGte\" : ISODate(\"2021-10-22T00:00:00.000Z\")\n                }\n            },\n            {\n                \"control.min.timestamp\" : {\n                    \"$_internalExprLte\" : ISODate(\"2021-10-22T00:00:00.000Z\")\n                }\n            }\n        ]\n    },\n}\n\n\nIt turns out that while in the case of the regular collection the plan shows the use of the index, in the time series\ncollection we see the COLLSCAN operation. It doesn’t mean that this operation is slow, though. The execution times of\nboth operations were similar. We will move on to a more detailed time comparison in a moment; for now we should only\nnote that the hidden index in the time series collection follows specific rules, it is not only invisible, but it also\ncannot be seen in the execution plan, although it clearly affects the speed of the search.\nAnd what happens if we add sorting?\n\ndb.getCollection('coll-ts').find({}).sort({timestamp: 1})\n\n\n\n{\n \"ok\" : 0,\n \"errmsg\" : \"PlanExecutor error during aggregation :: caused by :: Sort exceeded memory limit of 104857600 bytes,\n but did not opt in to external sorting.\",\n \"code\" : 292,\n \"codeName\" : \"QueryExceededMemoryLimitNoDiskUseAllowed\"\n}\n\n\nSurprise! The internal index for the time series collection does not have a sorting feature. This means that if we add\nthe sort clause to our query, the operation will take very long, or even fail because of exceeding the memory\nlimit. It is surprising because I did not find any information on this in the documentation. Therefore, if we plan to\nsort our data based on the field with time, we will need to index this field manually. It means, of\ncourse, that the benefits stemming from a lower disc usage and faster saving times will unfortunately diminish.\nSince we are talking about the use of disc space, let’s check the data size:\n\ndb.getCollection('coll-ts').stats()\ndb.getCollection('coll-ord').stats()\n\n\nWe will compare several fields:\nsize: data size before the compression,\nstorageSize: size of data after the compression,\ntotalIndexSize: size of indexes,\ntotalSize: total size of data and indexes.\nResults are gathered in the table below (in bytes, space is thousand separator):\nField\n      Normal collection\n      Time series collection\n      Diff\n    \nsize\n      570 000 000\n      747 855 228\n      + 31%\n    \nstorageSize\n      175 407 104\n      119 410 688\n      -31%\n    \ntotalIndexSize\n      232 701 952\n      0\n      -100%\n    \ntotalSize\n      408 109 056\n      119 410 688\n      -70%\n    \nAs you can see, raw data of the time series collection may take up more space, but after their compression the new-type\ncollection turns out to be the winner in the size-on-disc category. After adding the size of indexes created in the\nregular collection, the difference will be even greater. Therefore, we must admit that the way time series data are\npacked on the disc is impressive.\nNow it’s time to compare query execution times for both collections.\nSpeed is all that matters\nUsing the script below (saved as gen-find.sh file), I generated two files containing commands getting documents from\nboth collections based on the\ntime label:\n\n#!/bin/bash\nRANDOM=42\nfor ((i = 1; i \u003c= $1; i++ ));\ndo\n  x=$(( $RANDOM % 10000000))\n  t=$(date -jv +${x}M -f \"%Y-%m-%d %H:%M:%S\" \"2021-10-22 0:00:00\" +%Y-%m-%dT%H:%M:%S)\n  echo \"db.getCollection('$2').find({'timestamp' : new ISODate('$t')})\"\ndone \u003e\u003e find-$2.js\n\n\nThe script takes as parameters: the number of queries, and the name of the collection that we want to search. I\ngenerated a million queries (it may take some time depending on your hardware, so you can start with a lower amount of\nqueries):\n\n./gen-find.sh 1000000 coll-ts\n./gen-find.sh 1000000 coll-ord\n\n\nThen I checked the time of the execution of both query sequences using the command:\n\ntime mongo test find-coll-ts.js\ntime mongo test find-coll-ord.js\n\n\nThe standard collection was a bit slower: 16,854 for coll-ord vs 16,038 for coll-ts. Although the difference is small,\nanother point goes to time series: simple search is slightly faster than in the case of the regular collection.\nBut we’re yet to discuss the most interesting part. Time series is primarily used for quick aggregate counting. Let’s\nsee what the comparison looks like when calculating the arithmetic mean in a given time interval.\nThe script below (saved as gen-aggregate.sh) creates a list of queries calculating the arithmetic mean of ratings for\na randomly selected six-hour interval:\n\n#!/bin/bash\nRANDOM=42\nfor ((i = 1; i \u003c= $1; i++ ));\ndo\n  x1=$(( $RANDOM % 10000000))\n  x2=$(( x1 + 360))\n  t1=$(date -jv +${x1}M -f \"%Y-%m-%d %H:%M:%S\" \"2021-10-22 0:00:00\" +%Y-%m-%dT%H:%M:%S)\n  t2=$(date -jv +${x2}M -f \"%Y-%m-%d %H:%M:%S\" \"2021-10-22 0:00:00\" +%Y-%m-%dT%H:%M:%S)\n  echo \"db.getCollection('$2').aggregate([{ \\$match: { \"timestamp\" : \" \\\n    \"{\\$gte:new ISODate('$t1'),\\$lt:new ISODate('$t2')} } },\" \\\n    \"{ \\$group: { _id: null, avg: { \\$avg: \\\"\\$rating\\\" } } }])\"\ndone \u003e\u003e aggregate-$2-$1.js\n\n\nI prepared three script sets with: 10K, 50K and 100K queries for both collections:\n\n./gen-aggregate.sh 10000 coll-ts\n./gen-aggregate.sh 50000 coll-ts\n./gen-aggregate.sh 100000 coll-ts\n\n./gen-aggregate.sh 10000 coll-ord\n./gen-aggregate.sh 50000 coll-ord\n./gen-aggregate.sh 100000 coll-ord\n\n\nI made the measurements using following commands:\n\ntime mongo test aggregate-coll-ts-10000.js\ntime mongo test aggregate-coll-ord-10000.js\n\ntime mongo test aggregate-coll-ts-50000.js\ntime mongo test aggregate-coll-ord-50000.js\n\ntime mongo test aggregate-coll-ts-100000.js\ntime mongo test aggregate-coll-ord-100000.js\n\n\n\nThe results are shown in the table below:\nNumber of queries\n      Normal collection [min:sec]\n      Time series [min:sec]\n      Diff\n    \n10000\n      0:21,947\n      0:16,835\n      -23%\n    \n50000\n      1:37,02\n      1:11,18\n      -26%\n    \n100000\n      4:33,29\n      2:21,37\n      -48%\n    \nAlthough there are far fewer queries this time than in the previous experiment, the differences in times are much\ngreater. It clearly proves that time series collections are indeed spreading their wings when we want to use aggregation\nqueries and have been developed mainly for this purpose. The reason is probably the sequential way of writing data,\nwhich shows a noticeable improvement when running ranged queries. The results clearly show also how much of an impact\nquery performance can have on an element that often doesn’t get the adequate attention: proper modelling the data.\nLimitations\nOf course, time series collections also have their limitations and should not be used as a golden hammer.\nWe have already mentioned the first one — the lack of the primary key index. It stems from the assumption\nthat searches will be primarily based on time, so there is no point in creating an index that will be useful for very\nfew people. Of course, we can create this index ourselves.\nIt is also not possible to sort by time field, which is another inconvenience. If we want to have\nsorting queries, we have to create an additional index.\nAlthough these two missing indexes may seem to be an easy thing to fix, we must remember that it involves additional use\nof disc space as well as longer indexing time during the saving of the document, which means that the benefits\nstemming from the use of time series will be somewhat reduced.\nThe third, and perhaps most import limitation is the immutability of the document. Once saved, documents cannot be\nupdated or deleted. The only way to delete data is to use drop() command or to define retention for the collection\nusing the expireAfterSeconds parameter, which, like TTL indexes, will automatically delete documents certain time\nafter creation.\nThe lack of possibility to manipulate the saved documents will probably be the main reason why programmers will be\nhesitant to use time series. We should mention, however, that the authors of MongoDB will probably add the possibility\nto edit and delete documents in the future:\nWhile we know some of these limitations may be impactful to your current use case, we promise we’re working on this\nright now and would love for you to provide your feedback!\nSummary\nAdding the ability to store time series in MongoDB is a step in the right direction. First tests show that in certain\ncases the new type of collections really does work better than the regular ones. They use less disc space, are faster at\nsaving and searching by the time. But high performance always comes at a cost, in this case: the cost of reduced flexibility.\nTherefore, the final decision to use time series should be preceded by an analysis of\nadvantages and disadvantages of both in particular cases. We should also hope that the authors of the database are\nworking on improving it and will soon eliminate most limitations.","guid":"https://blog.allegro.tech/2021/12/performance-evaluation-of-timeseries.html","categories":["tech","mongodb","performance","time series"],"isoDate":"2021-12-19T23:00:00.000Z","thumbnail":"images/post-headers/mongodb.png"},{"title":"Clean Architecture Story","link":"https://blog.allegro.tech/2021/12/clean-architecture-story.html","pubDate":"Mon, 13 Dec 2021 00:00:00 +0100","authors":{"author":[{"name":["Michał Kowalcze"],"photo":["https://blog.allegro.tech/img/authors/michal.kowalcze.jpg"],"url":["https://blog.allegro.tech/authors/michal.kowalcze"]}]},"content":"\u003cp\u003e\u003ca href=\"https://blog.cleancoder.com/uncle-bob/2012/08/13/the-clean-architecture.html\"\u003eThe Clean Architecture\u003c/a\u003e concept has been\naround for some time and keeps surfacing in one place or another, yet it is not widely adopted. In this post I would\nlike to introduce this topic in a less conventional way: starting with customer’s needs and going through various\nstages to present a solution that is clean enough to satisfy concepts from the aforementioned blog (or\n\u003ca href=\"https://www.goodreads.com/book/show/18043011-clean-architecture\"\u003ethe book\u003c/a\u003e with the same name).\u003c/p\u003e\n\n\u003ch2 id=\"the-perspective\"\u003eThe perspective\u003c/h2\u003e\n\u003cp\u003eWhy do we need software architecture? What is it anyway? An extensive definition can be found in a place a bit unexpected\nfor an agile world — an enterprise-architecture definition from \u003ca href=\"https://en.wikipedia.org/wiki/The_Open_Group_Architecture_Framework\"\u003eTOGAF\u003c/a\u003e:\u003c/p\u003e\n\n\u003cul\u003e\n  \u003cli\u003eThe fundamental concepts or properties of a system in its environment embodied in its elements, relationships, and\nin the principles of its design and evolution. (Source: ISO/IEC/IEEE 42010:2011)\u003c/li\u003e\n  \u003cli\u003eThe structure of components, their inter-relationships, and the principles and guidelines governing their design and\nevolution over time.\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eAnd what do we need such a governing structure or shape for? Basically it allows us to make cost/time-efficient choices\nwhen it comes to development. And deployment. And operation. And maintenance.\u003c/p\u003e\n\n\u003cp\u003eIt also allows us to keep as many options open as possible, so our future choices are not limited by an overcommitment\nfrom the past.\u003c/p\u003e\n\n\u003cp\u003eSo — we have our perspective defined. Let’s dive into a real-world problem!\u003c/p\u003e\n\n\u003ch2 id=\"the-challenge\"\u003eThe challenge\u003c/h2\u003e\n\u003cp\u003eYou are a young, promising programmer sitting in a dorm and one afternoon a stranger appears. “I run a small company\nthat delivers packages from furniture shops to customers. I need a database that will allow reservation of slots. Is it\nsomething you are able to deliver?” “Of course!” — what else could a young, promising programmer answer?\u003c/p\u003e\n\n\u003ch2 id=\"the-false-start\"\u003eThe false start\u003c/h2\u003e\n\u003cp\u003eThe customer needs a database, so what can we start with? The database schema, of course! We can identify entities with\nease: a transport slot, a schedule, a user (we need some authentication, right?), a … something? Okay, perhaps it is\nnot the easiest way. So why don’t we start with something else?\u003c/p\u003e\n\n\u003cp\u003eLet’s choose the technology to use! Let’s go with React frontend, Java+Spring backend, some SQL as persistence. To\npresent a clickable version to our customer we need some warm-up work to set up an environment, create a deployable\nservice version or GUI mockups, configure persistence and so on. In general: to pay attention to technical details —\ncode necessary to set up something working, of which non-devs are usually not aware. It simply has to be done before we\nstart talking about nitty-gritty for business logic.\u003c/p\u003e\n\n\u003ch2 id=\"the-use-case-driven-approach\"\u003eThe use-case-driven approach\u003c/h2\u003e\n\u003cp\u003eWhat if instead of starting with what we already know — how to visualize relationships, how to build a web-system — we\nstarted with what we didn’t know? Simply — by asking questions such as: How is the system going to be used? By whom?\u003c/p\u003e\n\n\u003ch2 id=\"use-cases\"\u003eUse cases\u003c/h2\u003e\n\u003cp\u003eIn other words — what are the use cases for the system? Let’s define the challenge once more using high-level actors\nand interactions: \u003cimg src=\"/img/articles/2021-12-13-clean-architecture-story/use_cases.png\" alt=\"Use cases\" /\u003e and pick the first\nrequired interaction: shop makes a reservation. What is required to make a reservation? Hmm, I think that it would be\ngood to get the current schedule in the first place. Why am I using “get” instead of “display”? “Display” already\nsuggests a way of delivering output, when we hear “display” a computer screen comes to our minds, with a web\napplication. Single page web app, of course. “Get” is more neutral, it does not constrain our vision by a specific\npresentation method. Frankly — is there anything wrong with delivering the current schedule over the phone, for\nexample?\u003c/p\u003e\n\n\u003ch3 id=\"getting-the-schedule\"\u003eGetting the schedule\u003c/h3\u003e\n\u003cp\u003eSo, we can start thinking about our schedule model — let it be a single instance representing a day with slots inside.\nGreat, we have our entities! How to get one? Well, we need to check if there is already a stored schedule and if so\n— retrieve it from the repository. If the schedule is not available we have to create one. Based on…? Exactly — we do\nnot know yet, all we can say is that it will probably be something flexible. Something to discuss with our customer\n— but this does not prevent us from going forward with our first use case. Logic is indeed simple:\u003c/p\u003e\n\n\u003cdiv class=\"language-kotlin highlighter-rouge\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003efun\u003c/span\u003e \u003cspan class=\"nf\"\u003egetSchedule\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003escheduleDay\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"nc\"\u003eLocalDate\u003c/span\u003e\u003cspan class=\"p\"\u003e):\u003c/span\u003e \u003cspan class=\"nc\"\u003eDaySchedule\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"kd\"\u003eval\u003c/span\u003e \u003cspan class=\"py\"\u003edaySchedule\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003edaySchedulerRepository\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"k\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003escheduleDay\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n  \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003edaySchedule\u003c/span\u003e \u003cspan class=\"p\"\u003e!=\u003c/span\u003e \u003cspan class=\"k\"\u003enull\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003edaySchedule\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n  \u003cspan class=\"kd\"\u003eval\u003c/span\u003e \u003cspan class=\"py\"\u003enewSchedule\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003edayScheduleCreator\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003ecreate\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003escheduleDay\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n  \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003edaySchedulerRepository\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003esave\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003enewSchedule\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e(full commit: \u003ca href=\"https://github.com/michal-kowalcze/clean-architecture-example/commit/6dfeee53554a4ccf37e81aa50a2bd24af7e02cce\"\u003eGitHub\u003c/a\u003e)\u003c/p\u003e\n\n\u003cp\u003eAnd even with this simple logic we identified a hidden assumption regarding the schedule definition: that there is a\nrecipe for creating a daily schedule. What is more we can test retrieval of a schedule — with definition of schedule\ncreator if required — without any irrelevant details, like database, UI, framework and so on. Test only business rules,\nwithout unnecessary details.\u003c/p\u003e\n\n\u003ch2 id=\"reserving-the-slot\"\u003eReserving the slot\u003c/h2\u003e\n\u003cp\u003eTo finish the reservation we have to add at least one more use case — one for reservation of a free slot. Provided that\nwe re-use existing logic, the interaction is still simple:\u003c/p\u003e\n\n\u003cdiv class=\"language-kotlin highlighter-rouge\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003efun\u003c/span\u003e \u003cspan class=\"nf\"\u003ereserve\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eslotId\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"nc\"\u003eSlotId\u003c/span\u003e\u003cspan class=\"p\"\u003e):\u003c/span\u003e \u003cspan class=\"nc\"\u003eDaySchedule\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"kd\"\u003eval\u003c/span\u003e \u003cspan class=\"py\"\u003edaySchedule\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003egetScheduleUseCase\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003egetSchedule\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003escheduleDay\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eslotId\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eday\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\n  \u003cspan class=\"kd\"\u003eval\u003c/span\u003e \u003cspan class=\"py\"\u003emodifiedSchedule\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003edaySchedule\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003ereserveSlot\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eslotId\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eindex\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\n  \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003edayScheduleRepository\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003esave\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003emodifiedSchedule\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e(full commit: \u003ca href=\"https://github.com/michal-kowalcze/clean-architecture-example/commit/7b7961b28107c3c89d40ce69a8383bf9f32337b0\"\u003eGitHub\u003c/a\u003e)\u003c/p\u003e\n\n\u003cp\u003eAnd, as we can see — the slot reservation business rule (and constraint) is implemented at the domain model itself — so\nwe are safe, that any other interaction, any other use case, is not going to break these rules. This approach also\nsimplifies testing, as business rules can be verified in separation from the use case interaction logic.\u003c/p\u003e\n\n\u003ch2 id=\"where-is-the-clean-architecture\"\u003eWhere is the “Clean Architecture”?\u003c/h2\u003e\n\u003cp\u003eLet‘s stop with business logic for a moment. We created quite thoughtful, extensible code for sure, but why are we\ntalking about “Clean” architecture? We already used Domain-Driven Design and Hexagonal architecture concepts. Is there\nanything more? Imagine that another person is going to help us with implementation. She is not aware of the source code\nyet and simply would like to take a look at the codebase. And she sees: \u003cimg src=\"/img/articles/2021-12-13-clean-architecture-story/use_case_classes.png\" alt=\"Use case classes\" /\u003e\nIt looks like something to her, doesn‘t it? A kind of reservation system! It is not yet another domain service with\nsome methods that have no clear connection with possible uses — the list of classes itself describes what the system\ncan do.\u003c/p\u003e\n\n\u003ch2 id=\"the-first-assumption\"\u003eThe first assumption\u003c/h2\u003e\n\u003cp\u003eWe have a mocked implementation as the schedule creator. It is OK to test logic at the unit test level, but not enough\nto run a prototype.\u003c/p\u003e\n\n\u003cp\u003eAfter a short call with our customer we know more about the daily schedule — there are six slots, two hours each,\nstarting at 8:oo a.m. We also know that this recipe for the daily schedule is very, very simple and it is going to be\nchanged soon (e.g. to accommodate for holidays, etc.). All these issues will be solved later, now we are at the\nprototype stage and our desired outcome is to have a working demo for our stranger.\u003c/p\u003e\n\n\u003cp\u003eWhere to put this simple implementation of the schedule creator? So far, the domain used an interface for that. Are we\ngoing to put an implementation of this interface to the infrastructure package and treat it as something outside the\ndomain? Certainly not! It is not complicated and this is part of the domain itself, we simply replace the mocked\nimplementation of the schedule creator with class specification.\u003c/p\u003e\n\n\u003cdiv class=\"language-kotlin highlighter-rouge\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003epackage\u003c/span\u003e \u003cspan class=\"nn\"\u003eeu.kowalcze.michal.arch.clean.example.domain.model\u003c/span\u003e\n\n\u003cspan class=\"kd\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eDayScheduleCreator\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003efun\u003c/span\u003e \u003cspan class=\"nf\"\u003ecreate\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003escheduleDay\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"nc\"\u003eLocalDate\u003c/span\u003e\u003cspan class=\"p\"\u003e):\u003c/span\u003e \u003cspan class=\"nc\"\u003eDaySchedule\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"nc\"\u003eDaySchedule\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n        \u003cspan class=\"n\"\u003escheduleDay\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"nf\"\u003ecreateStandardSlots\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e//...\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e(full commit: \u003ca href=\"https://github.com/michal-kowalcze/clean-architecture-example/commit/2792fc31e98d76a610561636f03073dee73fbb47\"\u003eGitHub\u003c/a\u003e)\u003c/p\u003e\n\n\u003ch2 id=\"the-prototype\"\u003eThe prototype\u003c/h2\u003e\n\u003cp\u003eI will not be original here — for the first prototype version the REST API sounds like something reasonable. Do we care\nabout other infrastructure at the moment? Persistence? No! In the previous commits a map-based persistence layer is\nused for unit tests and this solution is good enough to start with. As long as the system is not restarted, of course.\u003c/p\u003e\n\n\u003cp\u003eWhat is important at this stage? We are introducing an \u003cstrong\u003eAPI\u003c/strong\u003e — this is a separate layer, so it is crucial to ensure\nthat domain classes are not exposed to the outside world — and that we do not introduce a dependency on the API into\nthe domain.\u003c/p\u003e\n\n\u003cdiv class=\"language-kotlin highlighter-rouge\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003epackage\u003c/span\u003e \u003cspan class=\"nn\"\u003eeu.kowalcze.michal.arch.clean.example.api\u003c/span\u003e\n\n\u003cspan class=\"nd\"\u003e@Controller\u003c/span\u003e\n\u003cspan class=\"kd\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eGetScheduleEndpoint\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"kd\"\u003eval\u003c/span\u003e \u003cspan class=\"py\"\u003egetScheduleUseCase\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"nc\"\u003eGetScheduleUseCase\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\n    \u003cspan class=\"nd\"\u003e@GetMapping\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"/schedules/{localDate}\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"k\"\u003efun\u003c/span\u003e \u003cspan class=\"nf\"\u003egetSchedules\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nd\"\u003e@PathVariable\u003c/span\u003e \u003cspan class=\"n\"\u003elocalDate\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"nc\"\u003eString\u003c/span\u003e\u003cspan class=\"p\"\u003e):\u003c/span\u003e \u003cspan class=\"nc\"\u003eDayScheduleDto\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"kd\"\u003eval\u003c/span\u003e \u003cspan class=\"py\"\u003escheduleDay\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"nc\"\u003eLocalDate\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eparse\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003elocalDate\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"kd\"\u003eval\u003c/span\u003e \u003cspan class=\"py\"\u003edaySchedule\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003egetScheduleUseCase\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003egetSchedule\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003escheduleDay\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003edaySchedule\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003etoApi\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e(full commit: \u003ca href=\"https://github.com/michal-kowalcze/clean-architecture-example/commit/b1d1c3fe3901d9328bdfaf560331d35131f8224b\"\u003eGitHub\u003c/a\u003e)\u003c/p\u003e\n\n\u003ch2 id=\"the-abstractions\"\u003eThe abstractions\u003c/h2\u003e\n\u003ch3 id=\"use-case\"\u003eUse Case\u003c/h3\u003e\n\u003cp\u003eChecking the implementation of endpoints (see comments in the code) we can see that conceptually each endpoint executes\nlogic according to the same structure: \u003cimg src=\"/img/articles/2021-12-13-clean-architecture-story/use_case_flow.png\" alt=\"Use case flow\" /\u003e\nWell, why don’t we make some abstraction for this? Sounds like a crazy idea? Let‘s check! Based on our code and the\ndiagram above we can identify the \u003ccode class=\"language-plaintext highlighter-rouge\"\u003eUseCase\u003c/code\u003e abstraction — something that takes some input (domain input, to be precise)\nand converts it to a (domain) output.\u003c/p\u003e\n\n\u003cdiv class=\"language-kotlin highlighter-rouge\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight\"\u003e\u003ccode\u003e\u003cspan class=\"kd\"\u003einterface\u003c/span\u003e \u003cspan class=\"nc\"\u003eUseCase\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nc\"\u003eINPUT\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nc\"\u003eOUTPUT\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003efun\u003c/span\u003e \u003cspan class=\"nf\"\u003eapply\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003einput\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"nc\"\u003eINPUT\u003c/span\u003e\u003cspan class=\"p\"\u003e):\u003c/span\u003e \u003cspan class=\"nc\"\u003eOUTPUT\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e(full commit: \u003ca href=\"https://github.com/michal-kowalcze/clean-architecture-example/commit/006811b49ae4531b96b300c964d3a66d725183bf\"\u003eGitHub\u003c/a\u003e)\u003c/p\u003e\n\n\u003ch3 id=\"use-case-executor\"\u003eUse Case Executor\u003c/h3\u003e\n\u003cp\u003eGreat! We have use cases and I just realized that I would like to have an email in my inbox each time an exception is\nthrown — and I do not want to depend on a spring-specific mechanism to do this. A common \u003ccode class=\"language-plaintext highlighter-rouge\"\u003eUseCaseExecutor\u003c/code\u003e will be a\ngreat help to address this non-functional requirement.\u003c/p\u003e\n\n\u003cdiv class=\"language-kotlin highlighter-rouge\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight\"\u003e\u003ccode\u003e\u003cspan class=\"kd\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eUseCaseExecutor\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"kd\"\u003eval\u003c/span\u003e \u003cspan class=\"py\"\u003enotificationGateway\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"nc\"\u003eNotificationGateway\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003efun\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nc\"\u003eINPUT\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nc\"\u003eOUTPUT\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"nf\"\u003eexecute\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003euseCase\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"nc\"\u003eUseCase\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nc\"\u003eINPUT\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nc\"\u003eOUTPUT\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;,\u003c/span\u003e \u003cspan class=\"n\"\u003einput\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"nc\"\u003eINPUT\u003c/span\u003e\u003cspan class=\"p\"\u003e):\u003c/span\u003e \u003cspan class=\"nc\"\u003eOUTPUT\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003etry\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003euseCase\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eapply\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003einput\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e \u003cspan class=\"k\"\u003ecatch\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ee\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"nc\"\u003eException\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"n\"\u003enotificationGateway\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003enotify\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003euseCase\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ee\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n            \u003cspan class=\"k\"\u003ethrow\u003c/span\u003e \u003cspan class=\"n\"\u003ee\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e(full commit: \u003ca href=\"https://github.com/michal-kowalcze/clean-architecture-example/commit/54d3187aed94427bb60af9781d0eec573c8c8db0\"\u003eGitHub\u003c/a\u003e)\u003c/p\u003e\n\n\u003ch3 id=\"framework-independent-response\"\u003eFramework-independent response\u003c/h3\u003e\n\u003cp\u003eIn order to handle the next requirements in our plan we have to change the logic a bit — add the possibility of returning\nspring-specific response entities from the executor itself. To make our code reusable in a non-spring world (ktor,\nanyone?) we separated the plain executor from spring specific decorator, so that it is possible to use this code easily\nin other frameworks.\u003c/p\u003e\n\n\u003cdiv class=\"language-kotlin highlighter-rouge\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight\"\u003e\u003ccode\u003e\u003cspan class=\"kd\"\u003edata class\u003c/span\u003e \u003cspan class=\"nc\"\u003eUseCaseApiResult\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nc\"\u003eAPI_OUTPUT\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\n    \u003cspan class=\"kd\"\u003eval\u003c/span\u003e \u003cspan class=\"py\"\u003eresponseCode\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"nc\"\u003eInt\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"kd\"\u003eval\u003c/span\u003e \u003cspan class=\"py\"\u003eoutput\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"nc\"\u003eAPI_OUTPUT\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\n\u003cspan class=\"kd\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eSpringUseCaseExecutor\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"kd\"\u003eval\u003c/span\u003e \u003cspan class=\"py\"\u003euseCaseExecutor\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"nc\"\u003eUseCaseExecutor\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003efun\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nc\"\u003eDOMAIN_INPUT\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nc\"\u003eDOMAIN_OUTPUT\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nc\"\u003eAPI_OUTPUT\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"nf\"\u003eexecute\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n        \u003cspan class=\"n\"\u003euseCase\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"nc\"\u003eUseCase\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nc\"\u003eDOMAIN_INPUT\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nc\"\u003eDOMAIN_OUTPUT\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;,\u003c/span\u003e\n        \u003cspan class=\"n\"\u003einput\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"nc\"\u003eDOMAIN_INPUT\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"n\"\u003etoApiConversion\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003edomainOutput\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"nc\"\u003eDOMAIN_OUTPUT\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e-\u0026gt;\u003c/span\u003e \u003cspan class=\"nc\"\u003eUseCaseApiResult\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nc\"\u003eAPI_OUTPUT\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e):\u003c/span\u003e \u003cspan class=\"nc\"\u003eResponseEntity\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nc\"\u003eAPI_OUTPUT\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003euseCaseExecutor\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eexecute\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003euseCase\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003einput\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003etoApiConversion\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"nf\"\u003etoSpringResponse\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"k\"\u003efun\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nc\"\u003eAPI_OUTPUT\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"nf\"\u003eUseCaseApiResult\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nc\"\u003eAPI_OUTPUT\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;.\u003c/span\u003e\u003cspan class=\"nf\"\u003etoSpringResponse\u003c/span\u003e\u003cspan class=\"p\"\u003e():\u003c/span\u003e \u003cspan class=\"nc\"\u003eResponseEntity\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nc\"\u003eAPI_OUTPUT\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e\n    \u003cspan class=\"nc\"\u003eResponseEntity\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003estatus\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eresponseCode\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"nf\"\u003ebody\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eoutput\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e(full commit: \u003ca href=\"https://github.com/michal-kowalcze/clean-architecture-example/commit/d44f7f993fab2e749e3048561b3ac4d3cff6fd88\"\u003eGitHub\u003c/a\u003e)\u003c/p\u003e\n\n\u003ch3 id=\"handle-domain-exceptions\"\u003eHandle domain exceptions\u003c/h3\u003e\n\u003cp\u003eOoops. Our prototype is running and we observe exceptions resulting in HTTP 500 errors. It would be nice to convert\nthese to dedicated response codes in a reasonable way yet without using much of spring infrastructure, for simplified\nmaintenance (and possible future changes). This can be easily achieved by adding another parameter to use case\nexecution, like this:\u003c/p\u003e\n\n\u003cdiv class=\"language-kotlin highlighter-rouge\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight\"\u003e\u003ccode\u003e\u003cspan class=\"kd\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eUseCaseExecutor\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"kd\"\u003eval\u003c/span\u003e \u003cspan class=\"py\"\u003enotificationGateway\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"nc\"\u003eNotificationGateway\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003efun\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nc\"\u003eDOMAIN_INPUT\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nc\"\u003eDOMAIN_OUTPUT\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"nf\"\u003eexecute\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n        \u003cspan class=\"n\"\u003euseCase\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"nc\"\u003eUseCase\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nc\"\u003eDOMAIN_INPUT\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nc\"\u003eDOMAIN_OUTPUT\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;,\u003c/span\u003e\n        \u003cspan class=\"n\"\u003einput\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"nc\"\u003eDOMAIN_INPUT\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"n\"\u003etoApiConversion\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003edomainOutput\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"nc\"\u003eDOMAIN_OUTPUT\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e-\u0026gt;\u003c/span\u003e \u003cspan class=\"nc\"\u003eUseCaseApiResult\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"err\"\u003e*\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;,\u003c/span\u003e\n        \u003cspan class=\"n\"\u003ehandledExceptions\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nc\"\u003eExceptionHandler\u003c/span\u003e\u003cspan class=\"p\"\u003e.()\u003c/span\u003e \u003cspan class=\"p\"\u003e-\u0026gt;\u003c/span\u003e \u003cspan class=\"nc\"\u003eAny\u003c/span\u003e\u003cspan class=\"p\"\u003e)?\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enull\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e):\u003c/span\u003e \u003cspan class=\"nc\"\u003eUseCaseApiResult\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"err\"\u003e*\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003etry\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"kd\"\u003eval\u003c/span\u003e \u003cspan class=\"py\"\u003edomainOutput\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003euseCase\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eapply\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003einput\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n            \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"nf\"\u003etoApiConversion\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003edomainOutput\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e \u003cspan class=\"k\"\u003ecatch\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ee\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"nc\"\u003eException\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"c1\"\u003e// conceptual logic\u003c/span\u003e\n            \u003cspan class=\"kd\"\u003eval\u003c/span\u003e \u003cspan class=\"py\"\u003eexceptionHandler\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"nc\"\u003eExceptionHandler\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ee\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n            \u003cspan class=\"n\"\u003ehandledExceptions\u003c/span\u003e\u003cspan class=\"o\"\u003e?.\u003c/span\u003e\u003cspan class=\"nf\"\u003elet\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"n\"\u003eexceptionHandler\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003ehandledExceptions\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n            \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"nc\"\u003eUseCaseApiResult\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eresponseCodeIfExceptionIsHandled\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eexceptionHandler\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003emessage\u003c/span\u003e \u003cspan class=\"o\"\u003e?:\u003c/span\u003e \u003cspan class=\"n\"\u003ee\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003emessage\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e(full commit: \u003ca href=\"https://github.com/michal-kowalcze/clean-architecture-example/commit/ac6763f19e2f3f61adc1f8b02bab6cb1e1a65c11\"\u003eGitHub\u003c/a\u003e)\u003c/p\u003e\n\n\u003ch3 id=\"handle-dto-conversion-exceptions\"\u003eHandle DTO conversion exceptions\u003c/h3\u003e\n\u003cp\u003eBy simply replacing input with:\u003c/p\u003e\n\n\u003cdiv class=\"language-kotlin highlighter-rouge\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight\"\u003e\u003ccode\u003e\u003cspan class=\"n\"\u003einputProvider\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"nc\"\u003eAny\u003c/span\u003e\u003cspan class=\"p\"\u003e.()\u003c/span\u003e \u003cspan class=\"p\"\u003e-\u0026gt;\u003c/span\u003e \u003cspan class=\"nc\"\u003eDOMAIN_INPUT\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e(full commit: \u003ca href=\"https://github.com/michal-kowalcze/clean-architecture-example/commit/a9ef4bb835977a4bd4a62eb754d8563340bd3d4e\"\u003eGitHub\u003c/a\u003e)\u003c/p\u003e\n\n\u003cp\u003ewe are able to handle exceptions raised during creation of input domain objects in a uniform way, without any\nadditional try/catches at the endpoint level.\u003c/p\u003e\n\n\u003ch2 id=\"the-outcome\"\u003eThe outcome\u003c/h2\u003e\n\n\u003cp\u003eWhat is the result of our journey across some functional requirements and a bit more non-functional requirements? By\nlooking at the definition of an endpoint we have full documentation of its behaviour, including exceptions. Our code is\neasily portable to some different API (e.g. EJB), we have fully-auditable modifications, and we can exchange layers\nquite freely. Also analysis of whole service is simplified, as possible use cases are explicitely stated.\u003c/p\u003e\n\n\u003cdiv class=\"language-kotlin highlighter-rouge\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight\"\u003e\u003ccode\u003e\u003cspan class=\"nd\"\u003e@PutMapping\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"/schedules/{localDate}/{index}\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eproduces\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"s\"\u003e\"application/json\"\u003c/span\u003e\u003cspan class=\"p\"\u003e],\u003c/span\u003e \u003cspan class=\"n\"\u003econsumes\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"s\"\u003e\"application/json\"\u003c/span\u003e\u003cspan class=\"p\"\u003e])\u003c/span\u003e\n\u003cspan class=\"k\"\u003efun\u003c/span\u003e \u003cspan class=\"nf\"\u003egetSchedules\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nd\"\u003e@PathVariable\u003c/span\u003e \u003cspan class=\"n\"\u003elocalDate\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"nc\"\u003eString\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nd\"\u003e@PathVariable\u003c/span\u003e \u003cspan class=\"n\"\u003eindex\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"nc\"\u003eInt\u003c/span\u003e\u003cspan class=\"p\"\u003e):\u003c/span\u003e \u003cspan class=\"nc\"\u003eResponseEntity\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"err\"\u003e*\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e\n    \u003cspan class=\"n\"\u003euseCaseExecutor\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eexecute\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n        \u003cspan class=\"n\"\u003euseCase\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ereserveSlotUseCase\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"n\"\u003einputProvider\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"nc\"\u003eSlotId\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nc\"\u003eLocalDate\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eparse\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003elocalDate\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e \u003cspan class=\"n\"\u003eindex\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e},\u003c/span\u003e\n        \u003cspan class=\"n\"\u003etoApiConversion\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"kd\"\u003eval\u003c/span\u003e \u003cspan class=\"py\"\u003edayScheduleDto\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eit\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003etoApi\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n            \u003cspan class=\"nc\"\u003eUseCaseApiResult\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nc\"\u003eHttpServletResponse\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nc\"\u003eSC_ACCEPTED\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003edayScheduleDto\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e},\u003c/span\u003e\n        \u003cspan class=\"n\"\u003ehandledExceptions\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"nf\"\u003eexception\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nc\"\u003eInvalidSlotIndexException\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"k\"\u003eclass\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nc\"\u003eUNPROCESSABLE_ENTITY\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s\"\u003e\"INVALID-SLOT-ID\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n            \u003cspan class=\"nf\"\u003eexception\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nc\"\u003eSlotAlreadyReservedException\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"k\"\u003eclass\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nc\"\u003eCONFLICT\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s\"\u003e\"SLOT-ALREADY-RESERVED\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e},\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e(repository: \u003ca href=\"https://github.com/michal-kowalcze/clean-architecture-example\"\u003eGitHub\u003c/a\u003e)\u003c/p\u003e\n\n\u003cp\u003eA simple evaluation of our solution with measures mentioned at the beginning:\u003c/p\u003e\n\n\u003ctable\u003e\n  \u003cthead\u003e\n    \u003ctr\u003e\n      \u003cth style=\"text-align: left\"\u003eAspect\u003c/th\u003e\n      \u003cth style=\"text-align: left\"\u003eEvaluation\u003c/th\u003e\n      \u003cth style=\"text-align: center\"\u003eHas advantage\u003c/th\u003e\n    \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n    \u003ctr\u003e\n      \u003ctd style=\"text-align: left\"\u003eDevelopment\u003c/td\u003e\n      \u003ctd style=\"text-align: left\"\u003e\u003ccode class=\"language-plaintext highlighter-rouge\"\u003eUseCase\u003c/code\u003e abstraction forces unification of approach across different teams in a more significant way than standard service approach.\u003c/td\u003e\n      \u003ctd style=\"text-align: center\"\u003e✓\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003ctd style=\"text-align: left\"\u003eDeployment\u003c/td\u003e\n      \u003ctd style=\"text-align: left\"\u003eWe did not consider deployment in our example. It certainly is not going to be different/harder than in case of hexagonal architecture.\u003c/td\u003e\n      \u003ctd style=\"text-align: center\"\u003e \u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003ctd style=\"text-align: left\"\u003eOperation\u003c/td\u003e\n      \u003ctd style=\"text-align: left\"\u003eUse case-based approach reveals operation of the system, which reduces learning curve for both development and maintenance.\u003c/td\u003e\n      \u003ctd style=\"text-align: center\"\u003e✓\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003ctd style=\"text-align: left\"\u003eMaintenance\u003c/td\u003e\n      \u003ctd style=\"text-align: left\"\u003eEntry threshold might be lower compared to hexagonal approach, as service is separated horizontally (into layers) and vertically (into use cases with common domain model).\u003c/td\u003e\n      \u003ctd style=\"text-align: center\"\u003e✓\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003ctd style=\"text-align: left\"\u003eKeeping options open\u003c/td\u003e\n      \u003ctd style=\"text-align: left\"\u003eSimilar to hexagonal architecture approach.\u003c/td\u003e\n      \u003ctd style=\"text-align: center\"\u003e \u003c/td\u003e\n    \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\n\u003ch3 id=\"tldr\"\u003eTL;DR\u003c/h3\u003e\n\u003cp\u003eIt is like hexagonal architecture with one additional dimension, composed of use cases, giving better insight into\noperations of a system and streamlining development and maintenance. Solution that was created during this narrative\nallows for creation of a self-documenting API endpoint.\u003c/p\u003e\n\n\u003ch2 id=\"high-level-overview\"\u003eHigh-level overview\u003c/h2\u003e\n\u003cp\u003eWith all this read we can switch our view to the high-level perspective:\u003c/p\u003e\n\n\u003cp\u003e\u003cimg src=\"/img/articles/2021-12-13-clean-architecture-story/clean_architecture_diagram.png\" alt=\"The Clean Architecture Diagram\" /\u003e\u003c/p\u003e\n\n\u003cp\u003eand describe abstractions. Starting from the inside we have:\u003c/p\u003e\n\u003cul\u003e\n  \u003cli\u003e\u003cstrong\u003eDomain Model\u003c/strong\u003e, \u003cstrong\u003eServices\u003c/strong\u003e and \u003cstrong\u003eGateways\u003c/strong\u003e, which are responsible for defining\nbusiness rules for the domain.\u003c/li\u003e\n  \u003cli\u003e\u003cstrong\u003eUseCase\u003c/strong\u003e, which orchestrates execution of business rules.\u003c/li\u003e\n  \u003cli\u003e\u003cstrong\u003eUseCaseExecutor\u003c/strong\u003e providing common behavior for all use cases.\u003c/li\u003e\n  \u003cli\u003e\u003cstrong\u003eAPI\u003c/strong\u003e connecting service with the outside world.\u003c/li\u003e\n  \u003cli\u003e\u003cstrong\u003eImplementation of gateways\u003c/strong\u003e, which connects with other services or persistence providers.\u003c/li\u003e\n  \u003cli\u003e\u003cstrong\u003eConfiguration\u003c/strong\u003e, responsible for gluing all elements together.\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eI hope that you enjoy this simple story and find the concept of\n\u003ca href=\"https://blog.cleancoder.com/uncle-bob/2012/08/13/the-clean-architecture.html\"\u003ethe Clean Architecture\u003c/a\u003e useful.\nThank you for reading!\u003c/p\u003e\n","contentSnippet":"The Clean Architecture concept has been\naround for some time and keeps surfacing in one place or another, yet it is not widely adopted. In this post I would\nlike to introduce this topic in a less conventional way: starting with customer’s needs and going through various\nstages to present a solution that is clean enough to satisfy concepts from the aforementioned blog (or\nthe book with the same name).\nThe perspective\nWhy do we need software architecture? What is it anyway? An extensive definition can be found in a place a bit unexpected\nfor an agile world — an enterprise-architecture definition from TOGAF:\nThe fundamental concepts or properties of a system in its environment embodied in its elements, relationships, and\nin the principles of its design and evolution. (Source: ISO/IEC/IEEE 42010:2011)\nThe structure of components, their inter-relationships, and the principles and guidelines governing their design and\nevolution over time.\nAnd what do we need such a governing structure or shape for? Basically it allows us to make cost/time-efficient choices\nwhen it comes to development. And deployment. And operation. And maintenance.\nIt also allows us to keep as many options open as possible, so our future choices are not limited by an overcommitment\nfrom the past.\nSo — we have our perspective defined. Let’s dive into a real-world problem!\nThe challenge\nYou are a young, promising programmer sitting in a dorm and one afternoon a stranger appears. “I run a small company\nthat delivers packages from furniture shops to customers. I need a database that will allow reservation of slots. Is it\nsomething you are able to deliver?” “Of course!” — what else could a young, promising programmer answer?\nThe false start\nThe customer needs a database, so what can we start with? The database schema, of course! We can identify entities with\nease: a transport slot, a schedule, a user (we need some authentication, right?), a … something? Okay, perhaps it is\nnot the easiest way. So why don’t we start with something else?\nLet’s choose the technology to use! Let’s go with React frontend, Java+Spring backend, some SQL as persistence. To\npresent a clickable version to our customer we need some warm-up work to set up an environment, create a deployable\nservice version or GUI mockups, configure persistence and so on. In general: to pay attention to technical details —\ncode necessary to set up something working, of which non-devs are usually not aware. It simply has to be done before we\nstart talking about nitty-gritty for business logic.\nThe use-case-driven approach\nWhat if instead of starting with what we already know — how to visualize relationships, how to build a web-system — we\nstarted with what we didn’t know? Simply — by asking questions such as: How is the system going to be used? By whom?\nUse cases\nIn other words — what are the use cases for the system? Let’s define the challenge once more using high-level actors\nand interactions:  and pick the first\nrequired interaction: shop makes a reservation. What is required to make a reservation? Hmm, I think that it would be\ngood to get the current schedule in the first place. Why am I using “get” instead of “display”? “Display” already\nsuggests a way of delivering output, when we hear “display” a computer screen comes to our minds, with a web\napplication. Single page web app, of course. “Get” is more neutral, it does not constrain our vision by a specific\npresentation method. Frankly — is there anything wrong with delivering the current schedule over the phone, for\nexample?\nGetting the schedule\nSo, we can start thinking about our schedule model — let it be a single instance representing a day with slots inside.\nGreat, we have our entities! How to get one? Well, we need to check if there is already a stored schedule and if so\n— retrieve it from the repository. If the schedule is not available we have to create one. Based on…? Exactly — we do\nnot know yet, all we can say is that it will probably be something flexible. Something to discuss with our customer\n— but this does not prevent us from going forward with our first use case. Logic is indeed simple:\n\nfun getSchedule(scheduleDay: LocalDate): DaySchedule {\n  val daySchedule = daySchedulerRepository.get(scheduleDay)\n  if (daySchedule != null) {\n    return daySchedule\n  }\n\n  val newSchedule = dayScheduleCreator.create(scheduleDay)\n  return daySchedulerRepository.save(newSchedule)\n}\n\n\n(full commit: GitHub)\nAnd even with this simple logic we identified a hidden assumption regarding the schedule definition: that there is a\nrecipe for creating a daily schedule. What is more we can test retrieval of a schedule — with definition of schedule\ncreator if required — without any irrelevant details, like database, UI, framework and so on. Test only business rules,\nwithout unnecessary details.\nReserving the slot\nTo finish the reservation we have to add at least one more use case — one for reservation of a free slot. Provided that\nwe re-use existing logic, the interaction is still simple:\n\nfun reserve(slotId: SlotId): DaySchedule {\n  val daySchedule = getScheduleUseCase.getSchedule(scheduleDay = slotId.day)\n\n  val modifiedSchedule = daySchedule.reserveSlot(slotId.index)\n\n  return dayScheduleRepository.save(modifiedSchedule)\n}\n\n\n(full commit: GitHub)\nAnd, as we can see — the slot reservation business rule (and constraint) is implemented at the domain model itself — so\nwe are safe, that any other interaction, any other use case, is not going to break these rules. This approach also\nsimplifies testing, as business rules can be verified in separation from the use case interaction logic.\nWhere is the “Clean Architecture”?\nLet‘s stop with business logic for a moment. We created quite thoughtful, extensible code for sure, but why are we\ntalking about “Clean” architecture? We already used Domain-Driven Design and Hexagonal architecture concepts. Is there\nanything more? Imagine that another person is going to help us with implementation. She is not aware of the source code\nyet and simply would like to take a look at the codebase. And she sees: \nIt looks like something to her, doesn‘t it? A kind of reservation system! It is not yet another domain service with\nsome methods that have no clear connection with possible uses — the list of classes itself describes what the system\ncan do.\nThe first assumption\nWe have a mocked implementation as the schedule creator. It is OK to test logic at the unit test level, but not enough\nto run a prototype.\nAfter a short call with our customer we know more about the daily schedule — there are six slots, two hours each,\nstarting at 8:oo a.m. We also know that this recipe for the daily schedule is very, very simple and it is going to be\nchanged soon (e.g. to accommodate for holidays, etc.). All these issues will be solved later, now we are at the\nprototype stage and our desired outcome is to have a working demo for our stranger.\nWhere to put this simple implementation of the schedule creator? So far, the domain used an interface for that. Are we\ngoing to put an implementation of this interface to the infrastructure package and treat it as something outside the\ndomain? Certainly not! It is not complicated and this is part of the domain itself, we simply replace the mocked\nimplementation of the schedule creator with class specification.\n\npackage eu.kowalcze.michal.arch.clean.example.domain.model\n\nclass DayScheduleCreator {\n    fun create(scheduleDay: LocalDate): DaySchedule = DaySchedule(\n        scheduleDay,\n        createStandardSlots()\n    )\n//...\n}\n\n\n(full commit: GitHub)\nThe prototype\nI will not be original here — for the first prototype version the REST API sounds like something reasonable. Do we care\nabout other infrastructure at the moment? Persistence? No! In the previous commits a map-based persistence layer is\nused for unit tests and this solution is good enough to start with. As long as the system is not restarted, of course.\nWhat is important at this stage? We are introducing an API — this is a separate layer, so it is crucial to ensure\nthat domain classes are not exposed to the outside world — and that we do not introduce a dependency on the API into\nthe domain.\n\npackage eu.kowalcze.michal.arch.clean.example.api\n\n@Controller\nclass GetScheduleEndpoint(private val getScheduleUseCase: GetScheduleUseCase) {\n\n    @GetMapping(\"/schedules/{localDate}\")\n    fun getSchedules(@PathVariable localDate: String): DayScheduleDto {\n        val scheduleDay = LocalDate.parse(localDate)\n        val daySchedule = getScheduleUseCase.getSchedule(scheduleDay)\n        return daySchedule.toApi()\n    }\n\n}\n\n\n(full commit: GitHub)\nThe abstractions\nUse Case\nChecking the implementation of endpoints (see comments in the code) we can see that conceptually each endpoint executes\nlogic according to the same structure: \nWell, why don’t we make some abstraction for this? Sounds like a crazy idea? Let‘s check! Based on our code and the\ndiagram above we can identify the UseCase abstraction — something that takes some input (domain input, to be precise)\nand converts it to a (domain) output.\n\ninterface UseCase\u003cINPUT, OUTPUT\u003e {\n    fun apply(input: INPUT): OUTPUT\n}\n\n\n(full commit: GitHub)\nUse Case Executor\nGreat! We have use cases and I just realized that I would like to have an email in my inbox each time an exception is\nthrown — and I do not want to depend on a spring-specific mechanism to do this. A common UseCaseExecutor will be a\ngreat help to address this non-functional requirement.\n\nclass UseCaseExecutor(private val notificationGateway: NotificationGateway) {\n    fun \u003cINPUT, OUTPUT\u003e execute(useCase: UseCase\u003cINPUT, OUTPUT\u003e, input: INPUT): OUTPUT {\n        try {\n            return useCase.apply(input)\n        } catch (e: Exception) {\n            notificationGateway.notify(useCase, e)\n            throw e\n        }\n    }\n}\n\n\n(full commit: GitHub)\nFramework-independent response\nIn order to handle the next requirements in our plan we have to change the logic a bit — add the possibility of returning\nspring-specific response entities from the executor itself. To make our code reusable in a non-spring world (ktor,\nanyone?) we separated the plain executor from spring specific decorator, so that it is possible to use this code easily\nin other frameworks.\n\ndata class UseCaseApiResult\u003cAPI_OUTPUT\u003e(\n    val responseCode: Int,\n    val output: API_OUTPUT,\n)\n\nclass SpringUseCaseExecutor(private val useCaseExecutor: UseCaseExecutor) {\n    fun \u003cDOMAIN_INPUT, DOMAIN_OUTPUT, API_OUTPUT\u003e execute(\n        useCase: UseCase\u003cDOMAIN_INPUT, DOMAIN_OUTPUT\u003e,\n        input: DOMAIN_INPUT,\n        toApiConversion: (domainOutput: DOMAIN_OUTPUT) -\u003e UseCaseApiResult\u003cAPI_OUTPUT\u003e\n    ): ResponseEntity\u003cAPI_OUTPUT\u003e {\n        return useCaseExecutor.execute(useCase, input, toApiConversion).toSpringResponse()\n    }\n}\n\nprivate fun \u003cAPI_OUTPUT\u003e UseCaseApiResult\u003cAPI_OUTPUT\u003e.toSpringResponse(): ResponseEntity\u003cAPI_OUTPUT\u003e =\n    ResponseEntity.status(responseCode).body(output)\n\n\n(full commit: GitHub)\nHandle domain exceptions\nOoops. Our prototype is running and we observe exceptions resulting in HTTP 500 errors. It would be nice to convert\nthese to dedicated response codes in a reasonable way yet without using much of spring infrastructure, for simplified\nmaintenance (and possible future changes). This can be easily achieved by adding another parameter to use case\nexecution, like this:\n\nclass UseCaseExecutor(private val notificationGateway: NotificationGateway) {\n    fun \u003cDOMAIN_INPUT, DOMAIN_OUTPUT\u003e execute(\n        useCase: UseCase\u003cDOMAIN_INPUT, DOMAIN_OUTPUT\u003e,\n        input: DOMAIN_INPUT,\n        toApiConversion: (domainOutput: DOMAIN_OUTPUT) -\u003e UseCaseApiResult\u003c*\u003e,\n        handledExceptions: (ExceptionHandler.() -\u003e Any)? = null,\n    ): UseCaseApiResult\u003c*\u003e {\n\n        try {\n            val domainOutput = useCase.apply(input)\n            return toApiConversion(domainOutput)\n        } catch (e: Exception) {\n            // conceptual logic\n            val exceptionHandler = ExceptionHandler(e)\n            handledExceptions?.let { exceptionHandler.handledExceptions() }\n            return UseCaseApiResult(responseCodeIfExceptionIsHandled, exceptionHandler.message ?: e.message)\n        }\n    }\n}\n\n\n(full commit: GitHub)\nHandle DTO conversion exceptions\nBy simply replacing input with:\n\ninputProvider: Any.() -\u003e DOMAIN_INPUT,\n\n\n(full commit: GitHub)\nwe are able to handle exceptions raised during creation of input domain objects in a uniform way, without any\nadditional try/catches at the endpoint level.\nThe outcome\nWhat is the result of our journey across some functional requirements and a bit more non-functional requirements? By\nlooking at the definition of an endpoint we have full documentation of its behaviour, including exceptions. Our code is\neasily portable to some different API (e.g. EJB), we have fully-auditable modifications, and we can exchange layers\nquite freely. Also analysis of whole service is simplified, as possible use cases are explicitely stated.\n\n@PutMapping(\"/schedules/{localDate}/{index}\", produces = [\"application/json\"], consumes = [\"application/json\"])\nfun getSchedules(@PathVariable localDate: String, @PathVariable index: Int): ResponseEntity\u003c*\u003e =\n    useCaseExecutor.execute(\n        useCase = reserveSlotUseCase,\n        inputProvider = { SlotId(LocalDate.parse(localDate), index) },\n        toApiConversion = {\n            val dayScheduleDto = it.toApi()\n            UseCaseApiResult(HttpServletResponse.SC_ACCEPTED, dayScheduleDto)\n        },\n        handledExceptions = {\n            exception(InvalidSlotIndexException::class, UNPROCESSABLE_ENTITY, \"INVALID-SLOT-ID\")\n            exception(SlotAlreadyReservedException::class, CONFLICT, \"SLOT-ALREADY-RESERVED\")\n        },\n    )\n\n\n(repository: GitHub)\nA simple evaluation of our solution with measures mentioned at the beginning:\nAspect\n      Evaluation\n      Has advantage\n    \nDevelopment\n      UseCase abstraction forces unification of approach across different teams in a more significant way than standard service approach.\n      ✓\n    \nDeployment\n      We did not consider deployment in our example. It certainly is not going to be different/harder than in case of hexagonal architecture.\n       \n    \nOperation\n      Use case-based approach reveals operation of the system, which reduces learning curve for both development and maintenance.\n      ✓\n    \nMaintenance\n      Entry threshold might be lower compared to hexagonal approach, as service is separated horizontally (into layers) and vertically (into use cases with common domain model).\n      ✓\n    \nKeeping options open\n      Similar to hexagonal architecture approach.\n       \n    \nTL;DR\nIt is like hexagonal architecture with one additional dimension, composed of use cases, giving better insight into\noperations of a system and streamlining development and maintenance. Solution that was created during this narrative\nallows for creation of a self-documenting API endpoint.\nHigh-level overview\nWith all this read we can switch our view to the high-level perspective:\n\nand describe abstractions. Starting from the inside we have:\nDomain Model, Services and Gateways, which are responsible for defining\nbusiness rules for the domain.\nUseCase, which orchestrates execution of business rules.\nUseCaseExecutor providing common behavior for all use cases.\nAPI connecting service with the outside world.\nImplementation of gateways, which connects with other services or persistence providers.\nConfiguration, responsible for gluing all elements together.\nI hope that you enjoy this simple story and find the concept of\nthe Clean Architecture useful.\nThank you for reading!","guid":"https://blog.allegro.tech/2021/12/clean-architecture-story.html","categories":["tech","architecture","clean-architecture","ddd","kotlin"],"isoDate":"2021-12-12T23:00:00.000Z","thumbnail":"images/post-headers/default.jpg"},{"title":"Which skills to choose in order to be more valuable","link":"https://blog.allegro.tech/2021/12/choose-your-skills.html","pubDate":"Thu, 09 Dec 2021 00:00:00 +0100","authors":{"author":[{"name":["Piotr Prusiński"],"photo":["https://blog.allegro.tech/img/authors/piotr.prusinski.jpg"],"url":["https://blog.allegro.tech/authors/piotr.prusinski"]}]},"content":"\u003cp\u003eAt some point in your career, you realize that it’s time to try to advance through the hierarchy. You think you are\ndoing a good job. You are constantly developing and learning something new. But at the same time, someone you know, with\nmuch less experience and knowledge than you, has long been higher up the hierarchy than you. Then you ask yourself:\n\u003cem\u003ewhat is wrong with me\u003c/em\u003e? In my case, the answer turned out to be properly gathering the expectations concerning my skills\nand work.\u003c/p\u003e\n\n\u003cp\u003eBelow, you can read my insight about it. You will find out how you can steer your development, so that you become much\nmore valuable to your team, leader or company and how to combine all this with your talents and interests.\u003c/p\u003e\n\n\u003ch2 id=\"how-to-start-the-development\"\u003eHow to start the development\u003c/h2\u003e\n\n\u003cp\u003eAs a member of a project team, you want to deliver a fully valuable solution. The key to success is to discover what’s\nbehind the word \u003cem\u003evaluable\u003c/em\u003e to your client. Is it enough to gather requirements? Unfortunately not. To find out exactly\nwhat stands behind the word \u003cem\u003evaluable\u003c/em\u003e you need to use a prototyping method, such as an iterative\n\u003ca href=\"https://www.wikipedia.org/wiki/Minimum_viable_product\"\u003eMVP\u003c/a\u003e (Minimum Viable Product) approach. For example, suppose you\nhave to paint your daughter’s room. You have several choices. You can choose the colour by yourself and paint the room\nwithout asking her for her opinion. The chance she will like the colour is small. So you will make a non-compliant\nproduct. You can bring her a sampler and ask her to choose a colour. The final colour when applied to the wall, may turn\nout to be different and then, the product will also not be as expected. You can also ask her about the colour and buy a\nfew samplers, paint a piece of wall with them and ask if any meet the requirements, if yes then paint the whole room\nwith the chosen colour, if not, buy another 5 colours and so on over and over until you get it right. This is the MVP\nprocess. First you gather requirements, then you prototype, which means you make a real product. You present it and\nreceive feedback (you learn) and decide what to do next. You repeat this process until you meet the client’s\nexpectations. This approach gives you the assurance that you have done exactly what was needed.\u003c/p\u003e\n\n\u003cp\u003eImagine that your skills and the work you do are products. We already know that to make a valuable product you need to\ngather requirements and prototype with the client. Your customer who cares most about your work and skills are the team,\nthe leader and the company you work for. However, what you do must also suit you. If you want your work and your\nknowledge to be of value to them, you need to gather their requirements first. Then quickly show the result and make\nsure it’s what they wanted. You are probably wondering what this prototyping is for in the case of your work? You have\ndone some work, it has been accepted so what more is there to talk about. There could be lots of reasons. You could have\nspent too much time on it, it’s even possible that what you did is wrong. You would have to put in a huge amount of time\nand work to improve it, which is why it was accepted as it is. Without prototyping, your work might appear to be of good\nquality to you, but the team might not be happy with it.\u003c/p\u003e\n\n\u003cp\u003eLet’s start with requirements gathering. Unfortunately it is impossible to gather universal requirements for a given\nposition since these requirements are different at different companies and even teams. The same person who has certain\nskills and performs certain tasks may be a senior in one company, where in another, he or she may be a junior. In one of\nthe companies I worked for, a good programmer was required to know the products and the business, then the tenure at the\ncompany mattered as well and being a support for the business. Performing a large number of tasks was not so important.\nIn another company, there were people who knew their product very well and were an excellent support to the business.\nHowever, they did not perform their tasks on time and did not take on issues that required them to undertake a lot of\nresponsibility. They still had junior or mid-level status.\u003c/p\u003e\n\n\u003cp\u003e\u003cimg src=\"/img/articles/2021-12-09-choose-your-skills/expectations.png\" alt=\"Expectations\" /\u003e\nThis begs the question: how do I gather my skills requirements?\u003c/p\u003e\n\n\u003ch2 id=\"assess-yourself-with-some-evaluation-sheets\"\u003eAssess yourself with some evaluation sheets\u003c/h2\u003e\n\n\u003cp\u003eAt Allegro, in the case of programmers and testers, we have a list of expectations prepared within the leadership\ncommunity. With such a list, it is much easier to collect requirements and talk about your own development towards\npromotion (in the team or in the company).\u003c/p\u003e\n\n\u003cp\u003eIn my case, after working at Allegro for a while, I decided that it might be a good idea to finally get my development\non track. My leader asked me to assess myself using a requirements sheet. This allowed me to identify the current stage\nI was at. The same sheet about me was completed by my leader. Then we calibrated ourselves. This sheet is divided into 3\nmain parts:\u003c/p\u003e\n\n\u003cul\u003e\n  \u003cli\u003eTechnical knowledge\u003c/li\u003e\n  \u003cli\u003eAttitude\u003c/li\u003e\n  \u003cli\u003eProduct knowledge\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eEach part has a list of skills, each with an extensive description. For example, one of the descriptions of technical\nknowledge looked like this:\u003c/p\u003e\n\n\u003cul\u003e\n  \u003cli\u003eYou know your technological stack very well (systems, applications, languages, tools). Having a technical problem to\nsolve, you know what your technological abilities are, and you know how to use them to achieve your goal.\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eI rated each skill on a scale of 1 to 5. Ideally, I would like each skill to be close to a 5. If I rated myself\nsomewhere at a 4 and my leader rated me a 3, during calibration, I found out that the requirements for that skill were\ndifferent from what I thought. He said, there were things I hadn’t used yet. To have a 4 at this point I need to know\nthem e.g. Cassandra database. With that I learned the first relevant requirement that I didn’t know about. After the\nwhole process of gathering requirements this way, I already knew what I needed to work on. Now all I had to do was\nselect a few of them and start working. But how to choose these requirements, which I will implement with passion and\nactually do them well?\u003c/p\u003e\n\n\u003ch2 id=\"how-to-choose-skills-to-improve\"\u003eHow to choose skills to improve?\u003c/h2\u003e\n\n\u003cp\u003eThere are many strategies on how to choose skills to develop. All in all, you need to use the right method for the right\ntype of skill to get a good result. The first step is to get a mentor. Usually it will be your leader, but it can also\nbe an experienced team member, e.g. a senior.\u003c/p\u003e\n\n\u003cp\u003eLeaders at Allegro gain their development knowledge from many available training sessions. You should find a similar\nperson in your environment. Such a person will help you on your way and will simulate the customer of the product that\nyou will be making. Show him or her a list of things you should develop. Ask them which are the most important for your\nteam. It is possible that the list of things will become very short. Now just pick two or three things and prepare\nprototypes. You can choose them intuitively or match them with your talents. Just take a Gallup\ntest (\u003ca href=\"https://www.gallup.com/cliftonstrengths/en/home.aspx\"\u003eCliftonStrengths\u003c/a\u003e) to discover them. This test will help\nyou choose a strategy for developing a particular skill. This test will work well for soft skills. For hard skills\na \u003ca href=\"https://en.wikipedia.org/wiki/Lean_startup\"\u003elean startup strategy\u003c/a\u003e may be better. Below are two examples of what this\ncan look like in practice.\u003c/p\u003e\n\n\u003ch2 id=\"how-gallup-test-can-help-you-find-activities-that-improve-you\"\u003eHow Gallup test can help you find activities that improve you\u003c/h2\u003e\n\n\u003cp\u003eThe \u003ca href=\"https://www.gallup.com/cliftonstrengths/en/home.aspx\"\u003eGallup test\u003c/a\u003e\nhelps you find activities that you naturally enjoy doing. This natural response to certain types of information,\nsituations and people in the context of the Gallup test is called a talent. The test result is divided into four main\ndomains:\u003c/p\u003e\n\n\u003cul\u003e\n  \u003cli\u003eExecuting\u003c/li\u003e\n  \u003cli\u003eInfluencing\u003c/li\u003e\n  \u003cli\u003eRelationship Building\u003c/li\u003e\n  \u003cli\u003eStrategic Thinking\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eSome of these will have a direct impact on your work, others will not. For example a description of your character in\nthe context of building relationships with people will be interesting information and will certainly raise your\nawareness, but will not help us in our challenge. Other talents that come out of the challenge may fit into the skill\nyou are developing or show how you should develop it.\u003c/p\u003e\n\n\u003cp\u003eOf course with these talents, the knowledge itself that you have a talent does not immediately translate into skills,\nfor example finding out that you have a talent for standing on your head, it does not mean that you will immediately\nstand on your head. You have to develop this talent, and you probably are already doing similar things because you\nsimply have a talent for it, and you enjoy it. So the Gallup test shows the things you should focus on. They are so\ngeneric that you can easily match them to your problems.\u003c/p\u003e\n\n\u003cp\u003e\u003cimg src=\"/img/articles/2021-12-09-choose-your-skills/gallup.png\" alt=\"Gallup\" /\u003e\u003c/p\u003e\n\n\u003cp\u003eHere’s what it was like for me. I did the Gallup test, and it came out that I am a learner. I like to learn, and I\nshould share knowledge - which should make me happy. Comparing this talent to the list of skills I should develop, I\nfound out that I don’t share knowledge with others. I decided that a good form of knowledge transfer is to make\npresentations. I completed training in making presentations. I also estimated the time for preparation and set a\ndeadline. While preparing, I realized that this knowledge sharing strategy was not for me. I finished this presentation\nand decided to change my knowledge sharing strategy. Such a change in strategy is called a pivot. I discussed the\nproblem with my mentor and decided to make a pivot towards writing articles. Being in this situation you have two\nchoices: either you do a pivot, which means you change your strategy, or you persevere, which means you continue to\ndevelop using your current strategy, after getting proper feedback from your mentor and team of course. Let us now look\nat the second type of skill.\u003c/p\u003e\n\n\u003ch2 id=\"how-startup-method-can-help-you-develop-your-skills\"\u003eHow startup method can help you develop your skills\u003c/h2\u003e\n\n\u003cp\u003eLet us divide hard skills into two groups. In the first group there are skills you acquire while learning by yourself,\ne.g. a new programming language. For this you need internal motivation and discipline to achieve the expected high\nlevel. The second group is the one where you acquire skills automatically e.g. you use some framework in your project.\nFor the first group you can use the startup method.\n\u003cimg src=\"/img/articles/2021-12-09-choose-your-skills/startup.png\" alt=\"Startup\" /\u003e\nAn example scenario of what the process of developing hard skills might look like:\u003c/p\u003e\n\n\u003col\u003e\n  \u003cli\u003eChoose one skill with your mentor (the order does not matter). Additionally, collect the requirements.\u003c/li\u003e\n  \u003cli\u003eEstimate how long it will take you to develop that skill. Put it on your calendar.\u003c/li\u003e\n  \u003cli\u003eTogether with your mentor, set a first stage, i.e. the first prototype of your work and work on it for e.g. 2-3\nweeks.\u003c/li\u003e\n  \u003cli\u003eAfter this time, show what you have done to your mentor or the whole team.\u003c/li\u003e\n  \u003cli\u003eDraw conclusions. Collect feedback. Do you like doing it? Did the result meet their expectations?\u003c/li\u003e\n  \u003cli\u003eIf not, make a pivot to another strategy or take another skill. If so, improve what you collected during the feedback\nand keep developing.\u003c/li\u003e\n\u003c/ol\u003e\n\n\u003cp\u003eIn the worst case scenario you will go through all the skills. You will then have a fairly broad knowledge base. I have\nnever heard the opinion that someone learned something and now regrets it. In a positive scenario you will probably find\nsomething you do well and enjoy it.\u003c/p\u003e\n\n\u003cp\u003eWe will now look at the second group of skills, which you develop automatically while working on a project. Here again,\nyou should first consult with your mentor on the best strategy to follow. There are two strategies in such cases: to\ngain deep knowledge in one of these skills or to learn a little about all of them. The mentor should know what the team\nexpects from a specialist in the given position. This automatically affects the implementation of the tasks in the\nproject:\u003c/p\u003e\n\n\u003col\u003e\n  \u003cli\u003eYou perform tasks only in the domain you know and after some time you become a specialist in this area, but you do\nnot take tasks from another domain that is new to you. Your value is the speed of task completion.\u003c/li\u003e\n  \u003cli\u003eYou always take tasks from a new domain, you are brave and not afraid of challenges. You will then have a broad\ngeneral knowledge of all products but will complete tasks much more slowly.\u003c/li\u003e\n\u003c/ol\u003e\n\n\u003cp\u003eThis is just one example. It is important that the mentor is clear about his requirements and that he gives you feedback\nafter you have done a few of these tasks to make sure that this is what you wanted.\u003c/p\u003e\n\n\u003ch2 id=\"pivot-or-persevere\"\u003ePivot or persevere\u003c/h2\u003e\n\n\u003cp\u003eFinally, let me explain the startup terms for pivot. The term pivot means to change from one strategy to another. For\nexample, I did one pivot during my development process. I was developing the skill of knowledge sharing. I had several\nstrategies to choose from:\u003c/p\u003e\n\n\u003cul\u003e\n  \u003cli\u003eMaking presentations\u003c/li\u003e\n  \u003cli\u003eWriting articles\u003c/li\u003e\n  \u003cli\u003eTraining preparation\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eI made a presentation and after collecting feedback I had to make a \u003ccode class=\"language-plaintext highlighter-rouge\"\u003epivot\u003c/code\u003e and changed my strategy to another one. I\nchose to share knowledge by writing articles. This article is the result of that. If this strategy works for me then I\nwill do a \u003ccode class=\"language-plaintext highlighter-rouge\"\u003epersevere\u003c/code\u003e and continue using the chosen strategy.\u003c/p\u003e\n\n\u003ch2 id=\"summary\"\u003eSummary\u003c/h2\u003e\n\n\u003cp\u003eIf you feel that you should already be in a higher position it is likely that the expectations for your job are quite\ndifferent than you think. To change this you should first find a mentor and then, with their help, gather the\nrequirements. A good place to start is with a list of requirements or a list of skills to begin discussing with your\nmentor. From this list you should select a few skills and then choose appropriate strategies for their development. To\nmake it easier for you to choose a strategy, do a Gallup test. Additionally, you can use the startup MVP approach.\nUltimately, the key to success is to gather requirements from your leader, team or entire company and then show the\nresults as quickly as possible. If the chosen skill or strategy doesn’t suit you or the feedback collected is strongly\nnegative, don’t worry, make a pivot and choose something else. After a few iterations you will definitely achieve your\ngoal.\u003c/p\u003e\n","contentSnippet":"At some point in your career, you realize that it’s time to try to advance through the hierarchy. You think you are\ndoing a good job. You are constantly developing and learning something new. But at the same time, someone you know, with\nmuch less experience and knowledge than you, has long been higher up the hierarchy than you. Then you ask yourself:\nwhat is wrong with me? In my case, the answer turned out to be properly gathering the expectations concerning my skills\nand work.\nBelow, you can read my insight about it. You will find out how you can steer your development, so that you become much\nmore valuable to your team, leader or company and how to combine all this with your talents and interests.\nHow to start the development\nAs a member of a project team, you want to deliver a fully valuable solution. The key to success is to discover what’s\nbehind the word valuable to your client. Is it enough to gather requirements? Unfortunately not. To find out exactly\nwhat stands behind the word valuable you need to use a prototyping method, such as an iterative\nMVP (Minimum Viable Product) approach. For example, suppose you\nhave to paint your daughter’s room. You have several choices. You can choose the colour by yourself and paint the room\nwithout asking her for her opinion. The chance she will like the colour is small. So you will make a non-compliant\nproduct. You can bring her a sampler and ask her to choose a colour. The final colour when applied to the wall, may turn\nout to be different and then, the product will also not be as expected. You can also ask her about the colour and buy a\nfew samplers, paint a piece of wall with them and ask if any meet the requirements, if yes then paint the whole room\nwith the chosen colour, if not, buy another 5 colours and so on over and over until you get it right. This is the MVP\nprocess. First you gather requirements, then you prototype, which means you make a real product. You present it and\nreceive feedback (you learn) and decide what to do next. You repeat this process until you meet the client’s\nexpectations. This approach gives you the assurance that you have done exactly what was needed.\nImagine that your skills and the work you do are products. We already know that to make a valuable product you need to\ngather requirements and prototype with the client. Your customer who cares most about your work and skills are the team,\nthe leader and the company you work for. However, what you do must also suit you. If you want your work and your\nknowledge to be of value to them, you need to gather their requirements first. Then quickly show the result and make\nsure it’s what they wanted. You are probably wondering what this prototyping is for in the case of your work? You have\ndone some work, it has been accepted so what more is there to talk about. There could be lots of reasons. You could have\nspent too much time on it, it’s even possible that what you did is wrong. You would have to put in a huge amount of time\nand work to improve it, which is why it was accepted as it is. Without prototyping, your work might appear to be of good\nquality to you, but the team might not be happy with it.\nLet’s start with requirements gathering. Unfortunately it is impossible to gather universal requirements for a given\nposition since these requirements are different at different companies and even teams. The same person who has certain\nskills and performs certain tasks may be a senior in one company, where in another, he or she may be a junior. In one of\nthe companies I worked for, a good programmer was required to know the products and the business, then the tenure at the\ncompany mattered as well and being a support for the business. Performing a large number of tasks was not so important.\nIn another company, there were people who knew their product very well and were an excellent support to the business.\nHowever, they did not perform their tasks on time and did not take on issues that required them to undertake a lot of\nresponsibility. They still had junior or mid-level status.\n\nThis begs the question: how do I gather my skills requirements?\nAssess yourself with some evaluation sheets\nAt Allegro, in the case of programmers and testers, we have a list of expectations prepared within the leadership\ncommunity. With such a list, it is much easier to collect requirements and talk about your own development towards\npromotion (in the team or in the company).\nIn my case, after working at Allegro for a while, I decided that it might be a good idea to finally get my development\non track. My leader asked me to assess myself using a requirements sheet. This allowed me to identify the current stage\nI was at. The same sheet about me was completed by my leader. Then we calibrated ourselves. This sheet is divided into 3\nmain parts:\nTechnical knowledge\nAttitude\nProduct knowledge\nEach part has a list of skills, each with an extensive description. For example, one of the descriptions of technical\nknowledge looked like this:\nYou know your technological stack very well (systems, applications, languages, tools). Having a technical problem to\nsolve, you know what your technological abilities are, and you know how to use them to achieve your goal.\nI rated each skill on a scale of 1 to 5. Ideally, I would like each skill to be close to a 5. If I rated myself\nsomewhere at a 4 and my leader rated me a 3, during calibration, I found out that the requirements for that skill were\ndifferent from what I thought. He said, there were things I hadn’t used yet. To have a 4 at this point I need to know\nthem e.g. Cassandra database. With that I learned the first relevant requirement that I didn’t know about. After the\nwhole process of gathering requirements this way, I already knew what I needed to work on. Now all I had to do was\nselect a few of them and start working. But how to choose these requirements, which I will implement with passion and\nactually do them well?\nHow to choose skills to improve?\nThere are many strategies on how to choose skills to develop. All in all, you need to use the right method for the right\ntype of skill to get a good result. The first step is to get a mentor. Usually it will be your leader, but it can also\nbe an experienced team member, e.g. a senior.\nLeaders at Allegro gain their development knowledge from many available training sessions. You should find a similar\nperson in your environment. Such a person will help you on your way and will simulate the customer of the product that\nyou will be making. Show him or her a list of things you should develop. Ask them which are the most important for your\nteam. It is possible that the list of things will become very short. Now just pick two or three things and prepare\nprototypes. You can choose them intuitively or match them with your talents. Just take a Gallup\ntest (CliftonStrengths) to discover them. This test will help\nyou choose a strategy for developing a particular skill. This test will work well for soft skills. For hard skills\na lean startup strategy may be better. Below are two examples of what this\ncan look like in practice.\nHow Gallup test can help you find activities that improve you\nThe Gallup test\nhelps you find activities that you naturally enjoy doing. This natural response to certain types of information,\nsituations and people in the context of the Gallup test is called a talent. The test result is divided into four main\ndomains:\nExecuting\nInfluencing\nRelationship Building\nStrategic Thinking\nSome of these will have a direct impact on your work, others will not. For example a description of your character in\nthe context of building relationships with people will be interesting information and will certainly raise your\nawareness, but will not help us in our challenge. Other talents that come out of the challenge may fit into the skill\nyou are developing or show how you should develop it.\nOf course with these talents, the knowledge itself that you have a talent does not immediately translate into skills,\nfor example finding out that you have a talent for standing on your head, it does not mean that you will immediately\nstand on your head. You have to develop this talent, and you probably are already doing similar things because you\nsimply have a talent for it, and you enjoy it. So the Gallup test shows the things you should focus on. They are so\ngeneric that you can easily match them to your problems.\n\nHere’s what it was like for me. I did the Gallup test, and it came out that I am a learner. I like to learn, and I\nshould share knowledge - which should make me happy. Comparing this talent to the list of skills I should develop, I\nfound out that I don’t share knowledge with others. I decided that a good form of knowledge transfer is to make\npresentations. I completed training in making presentations. I also estimated the time for preparation and set a\ndeadline. While preparing, I realized that this knowledge sharing strategy was not for me. I finished this presentation\nand decided to change my knowledge sharing strategy. Such a change in strategy is called a pivot. I discussed the\nproblem with my mentor and decided to make a pivot towards writing articles. Being in this situation you have two\nchoices: either you do a pivot, which means you change your strategy, or you persevere, which means you continue to\ndevelop using your current strategy, after getting proper feedback from your mentor and team of course. Let us now look\nat the second type of skill.\nHow startup method can help you develop your skills\nLet us divide hard skills into two groups. In the first group there are skills you acquire while learning by yourself,\ne.g. a new programming language. For this you need internal motivation and discipline to achieve the expected high\nlevel. The second group is the one where you acquire skills automatically e.g. you use some framework in your project.\nFor the first group you can use the startup method.\n\nAn example scenario of what the process of developing hard skills might look like:\nChoose one skill with your mentor (the order does not matter). Additionally, collect the requirements.\nEstimate how long it will take you to develop that skill. Put it on your calendar.\nTogether with your mentor, set a first stage, i.e. the first prototype of your work and work on it for e.g. 2-3\nweeks.\nAfter this time, show what you have done to your mentor or the whole team.\nDraw conclusions. Collect feedback. Do you like doing it? Did the result meet their expectations?\nIf not, make a pivot to another strategy or take another skill. If so, improve what you collected during the feedback\nand keep developing.\nIn the worst case scenario you will go through all the skills. You will then have a fairly broad knowledge base. I have\nnever heard the opinion that someone learned something and now regrets it. In a positive scenario you will probably find\nsomething you do well and enjoy it.\nWe will now look at the second group of skills, which you develop automatically while working on a project. Here again,\nyou should first consult with your mentor on the best strategy to follow. There are two strategies in such cases: to\ngain deep knowledge in one of these skills or to learn a little about all of them. The mentor should know what the team\nexpects from a specialist in the given position. This automatically affects the implementation of the tasks in the\nproject:\nYou perform tasks only in the domain you know and after some time you become a specialist in this area, but you do\nnot take tasks from another domain that is new to you. Your value is the speed of task completion.\nYou always take tasks from a new domain, you are brave and not afraid of challenges. You will then have a broad\ngeneral knowledge of all products but will complete tasks much more slowly.\nThis is just one example. It is important that the mentor is clear about his requirements and that he gives you feedback\nafter you have done a few of these tasks to make sure that this is what you wanted.\nPivot or persevere\nFinally, let me explain the startup terms for pivot. The term pivot means to change from one strategy to another. For\nexample, I did one pivot during my development process. I was developing the skill of knowledge sharing. I had several\nstrategies to choose from:\nMaking presentations\nWriting articles\nTraining preparation\nI made a presentation and after collecting feedback I had to make a pivot and changed my strategy to another one. I\nchose to share knowledge by writing articles. This article is the result of that. If this strategy works for me then I\nwill do a persevere and continue using the chosen strategy.\nSummary\nIf you feel that you should already be in a higher position it is likely that the expectations for your job are quite\ndifferent than you think. To change this you should first find a mentor and then, with their help, gather the\nrequirements. A good place to start is with a list of requirements or a list of skills to begin discussing with your\nmentor. From this list you should select a few skills and then choose appropriate strategies for their development. To\nmake it easier for you to choose a strategy, do a Gallup test. Additionally, you can use the startup MVP approach.\nUltimately, the key to success is to gather requirements from your leader, team or entire company and then show the\nresults as quickly as possible. If the chosen skill or strategy doesn’t suit you or the feedback collected is strongly\nnegative, don’t worry, make a pivot and choose something else. After a few iterations you will definitely achieve your\ngoal.","guid":"https://blog.allegro.tech/2021/12/choose-your-skills.html","categories":["tech","education","skills","startup","lean startup","mvp"],"isoDate":"2021-12-08T23:00:00.000Z","thumbnail":"images/post-headers/default.jpg"}],"jobs":[{"id":"743999785422127","name":"Research Engineer - Machine Learning (Reinforcement Learning)","uuid":"229d607a-333b-431b-9abe-78137730f5fd","refNumber":"REF2881V","company":{"identifier":"Allegro","name":"Allegro"},"releasedDate":"2021-11-08T09:56:17.000Z","location":{"city":"Warszawa, Kraków, Poznań, Toruń, Wrocław, Gdańsk, Katowice, Łódź, Lublin","country":"pl","remote":false},"industry":{"id":"internet","label":"Internet"},"department":{"id":"2572821","label":"IT - Machine Learning"},"function":{"id":"information_technology","label":"Information Technology"},"typeOfEmployment":{"label":"Full-time"},"experienceLevel":{"id":"mid_senior_level","label":"Mid-Senior Level"},"customField":[{"fieldId":"606235fe248e6f5bea0815ed","fieldLabel":"Katowice","valueId":"185eb5a9-b884-4ee8-8ebc-0e5f3e852b27","valueLabel":"Tak"},{"fieldId":"58c1575ee4b01d4b19ddf797","fieldLabel":"Kraków","valueId":"2cfcfcc1-da44-43f7-8eaa-3907faf2797c","valueLabel":"Tak"},{"fieldId":"606235bcefbac7156d6a470a","fieldLabel":"Łódź","valueId":"7d33e23d-3fa7-4d7d-86ae-7d7caff54fa9","valueLabel":"Tak"},{"fieldId":"58c158e9e4b0614667d5973e","fieldLabel":"Więcej lokalizacji","valueId":"3a186e8d-a82c-4955-af81-fcef9a63928a","valueLabel":"Tak"},{"fieldId":"58c1576ee4b0614667d59732","fieldLabel":"Toruń","valueId":"987e8884-bad1-4a8f-b149-99e4184cc221","valueLabel":"Tak"},{"fieldId":"6165609ee6b46b6506c66b63","fieldLabel":"Gdańsk","valueId":"cde0f8e7-5c9d-4d78-9f5c-e1c17ee499a8","valueLabel":"Tak"},{"fieldId":"58c156e6e4b01d4b19ddf793","fieldLabel":"Warszawa","valueId":"6a428533-1586-4372-89ec-65fb45366363","valueLabel":"Tak"},{"fieldId":"58c15608e4b01d4b19ddf790","fieldLabel":"Proces rekrutacji","valueId":"c807eec2-8a53-4b55-b7c5-c03180f2059b","valueLabel":"(Archive) IT Allegro"},{"fieldId":"COUNTRY","fieldLabel":"Country","valueId":"pl","valueLabel":"Poland"},{"fieldId":"58c15788e4b0614667d59733","fieldLabel":"Błonie","valueId":"25f6cb8c-81b3-434a-93ec-6dc851d5808d","valueLabel":"Nie"},{"fieldId":"58c15798e4b01d4b19ddf79b","fieldLabel":"Wrocław","valueId":"64818201-cdba-422e-8e8c-8ec633b0d327","valueLabel":"Tak"},{"fieldId":"58c13159e4b01d4b19ddf729","fieldLabel":"Department","valueId":"2572821","valueLabel":"IT - Machine Learning"},{"fieldId":"58c13159e4b01d4b19ddf728","fieldLabel":"Brands","valueId":"4ccb4fab-6c3f-4ed0-9140-8533fe17447f","valueLabel":"Allegro.pl sp. z o.o."},{"fieldId":"61656102a169ed164d546c31","fieldLabel":"Lublin","valueId":"02d54f00-48b9-4669-b7b3-10c16ac4bada","valueLabel":"Tak"},{"fieldId":"58c156b9e4b01d4b19ddf792","fieldLabel":"Poznań","valueId":"ac20917b-cb6a-4280-aff3-4fae2532a33e","valueLabel":"Tak"},{"fieldId":"5cdab2c84cedfd0006e7758c","fieldLabel":"Key words","valueLabel":"ML, Machine Learning, Python, Deep Learning, AI, Artificial Intelligence"}],"ref":"https://api.smartrecruiters.com/v1/companies/allegro/postings/743999785422127","creator":{"name":"Maciej Matwiejczyk"},"language":{"code":"en","label":"English","labelNative":"English (US)"}},{"id":"743999785421861","name":"Research Engineer - Machine Learning (Ranking and Recommendations)","uuid":"a6b2b59e-28e3-4bfa-89ab-b13ab97f06c8","refNumber":"REF2990T","company":{"identifier":"Allegro","name":"Allegro"},"releasedDate":"2021-11-08T09:54:52.000Z","location":{"city":"Warszawa, Poznań, Kraków, Toruń, Wrocław, Gdańsk, Katowice, Łódź, Lublin","country":"pl","remote":false},"industry":{"id":"internet","label":"Internet"},"department":{"id":"2572821","label":"IT - Machine Learning"},"function":{"id":"information_technology","label":"Information Technology"},"typeOfEmployment":{"label":"Full-time"},"experienceLevel":{"id":"mid_senior_level","label":"Mid-Senior Level"},"customField":[{"fieldId":"58c1575ee4b01d4b19ddf797","fieldLabel":"Kraków","valueId":"2cfcfcc1-da44-43f7-8eaa-3907faf2797c","valueLabel":"Tak"},{"fieldId":"58c158e9e4b0614667d5973e","fieldLabel":"Więcej lokalizacji","valueId":"3a186e8d-a82c-4955-af81-fcef9a63928a","valueLabel":"Tak"},{"fieldId":"58c1576ee4b0614667d59732","fieldLabel":"Toruń","valueId":"987e8884-bad1-4a8f-b149-99e4184cc221","valueLabel":"Tak"},{"fieldId":"58c156e6e4b01d4b19ddf793","fieldLabel":"Warszawa","valueId":"6a428533-1586-4372-89ec-65fb45366363","valueLabel":"Tak"},{"fieldId":"60cb31a9c87e511299a3a050","fieldLabel":"Department II","valueId":"b8a4596e-d9ce-42bb-8de5-10995e9ccf99","valueLabel":"IT - Machine Learning"},{"fieldId":"58c15608e4b01d4b19ddf790","fieldLabel":"Proces rekrutacji","valueId":"c807eec2-8a53-4b55-b7c5-c03180f2059b","valueLabel":"(Archive) IT Allegro"},{"fieldId":"COUNTRY","fieldLabel":"Country","valueId":"pl","valueLabel":"Poland"},{"fieldId":"58c15788e4b0614667d59733","fieldLabel":"Błonie","valueId":"25f6cb8c-81b3-434a-93ec-6dc851d5808d","valueLabel":"Nie"},{"fieldId":"58c15798e4b01d4b19ddf79b","fieldLabel":"Wrocław","valueId":"64818201-cdba-422e-8e8c-8ec633b0d327","valueLabel":"Tak"},{"fieldId":"58c13159e4b01d4b19ddf729","fieldLabel":"Department","valueId":"2572821","valueLabel":"IT - Machine Learning"},{"fieldId":"58c13159e4b01d4b19ddf728","fieldLabel":"Brands","valueId":"4ccb4fab-6c3f-4ed0-9140-8533fe17447f","valueLabel":"Allegro.pl sp. z o.o."},{"fieldId":"58c156b9e4b01d4b19ddf792","fieldLabel":"Poznań","valueId":"ac20917b-cb6a-4280-aff3-4fae2532a33e","valueLabel":"Tak"},{"fieldId":"5cdab2c84cedfd0006e7758c","fieldLabel":"Key words","valueLabel":"ML, AI, Ranking, Research, Machine Learning"}],"ref":"https://api.smartrecruiters.com/v1/companies/allegro/postings/743999785421861","creator":{"name":"Maciej Matwiejczyk"},"language":{"code":"en","label":"English","labelNative":"English (US)"}},{"id":"743999779448775","name":"Research Engineer - Machine Learning (Reinforcement Learning)","uuid":"c8e577cc-c93a-43e7-8e73-e430989798d7","refNumber":"REF2881V","company":{"identifier":"Allegro","name":"Allegro"},"releasedDate":"2021-10-14T10:29:36.000Z","location":{"city":"Warszawa, Kraków, Poznań, Toruń, Wrocław, Gdańsk, Katowice, Łódź, Lublin","country":"pl","remote":false},"industry":{"id":"internet","label":"Internet"},"department":{"id":"2572821","label":"IT - Machine Learning"},"function":{"id":"information_technology","label":"Information Technology"},"typeOfEmployment":{"label":"Full-time"},"experienceLevel":{"id":"mid_senior_level","label":"Mid-Senior Level"},"customField":[{"fieldId":"606235fe248e6f5bea0815ed","fieldLabel":"Katowice","valueId":"185eb5a9-b884-4ee8-8ebc-0e5f3e852b27","valueLabel":"Tak"},{"fieldId":"58c1575ee4b01d4b19ddf797","fieldLabel":"Kraków","valueId":"2cfcfcc1-da44-43f7-8eaa-3907faf2797c","valueLabel":"Tak"},{"fieldId":"606235bcefbac7156d6a470a","fieldLabel":"Łódź","valueId":"7d33e23d-3fa7-4d7d-86ae-7d7caff54fa9","valueLabel":"Tak"},{"fieldId":"58c158e9e4b0614667d5973e","fieldLabel":"Więcej lokalizacji","valueId":"3a186e8d-a82c-4955-af81-fcef9a63928a","valueLabel":"Tak"},{"fieldId":"58c1576ee4b0614667d59732","fieldLabel":"Toruń","valueId":"987e8884-bad1-4a8f-b149-99e4184cc221","valueLabel":"Tak"},{"fieldId":"6165609ee6b46b6506c66b63","fieldLabel":"Gdańsk","valueId":"cde0f8e7-5c9d-4d78-9f5c-e1c17ee499a8","valueLabel":"Tak"},{"fieldId":"58c156e6e4b01d4b19ddf793","fieldLabel":"Warszawa","valueId":"6a428533-1586-4372-89ec-65fb45366363","valueLabel":"Tak"},{"fieldId":"58c15608e4b01d4b19ddf790","fieldLabel":"Proces rekrutacji","valueId":"c807eec2-8a53-4b55-b7c5-c03180f2059b","valueLabel":"(Archive) IT Allegro"},{"fieldId":"COUNTRY","fieldLabel":"Country","valueId":"pl","valueLabel":"Poland"},{"fieldId":"58c15788e4b0614667d59733","fieldLabel":"Błonie","valueId":"25f6cb8c-81b3-434a-93ec-6dc851d5808d","valueLabel":"Nie"},{"fieldId":"58c15798e4b01d4b19ddf79b","fieldLabel":"Wrocław","valueId":"64818201-cdba-422e-8e8c-8ec633b0d327","valueLabel":"Tak"},{"fieldId":"58c13159e4b01d4b19ddf729","fieldLabel":"Department","valueId":"2572821","valueLabel":"IT - Machine Learning"},{"fieldId":"58c13159e4b01d4b19ddf728","fieldLabel":"Brands","valueId":"4ccb4fab-6c3f-4ed0-9140-8533fe17447f","valueLabel":"Allegro.pl sp. z o.o."},{"fieldId":"61656102a169ed164d546c31","fieldLabel":"Lublin","valueId":"02d54f00-48b9-4669-b7b3-10c16ac4bada","valueLabel":"Tak"},{"fieldId":"58c156b9e4b01d4b19ddf792","fieldLabel":"Poznań","valueId":"ac20917b-cb6a-4280-aff3-4fae2532a33e","valueLabel":"Tak"},{"fieldId":"5cdab2c84cedfd0006e7758c","fieldLabel":"Key words","valueLabel":"ML, Machine Learning, Python, Deep Learning, AI, Artificial Intelligence"}],"ref":"https://api.smartrecruiters.com/v1/companies/allegro/postings/743999779448775","creator":{"name":"Maciej Matwiejczyk"},"language":{"code":"pl","label":"Polish","labelNative":"polski"}},{"id":"743999779448676","name":"Research Engineer - Machine Learning (Ranking and Recommendations)","uuid":"7cb35dfc-f53c-4b51-81ac-61b683060f4c","refNumber":"REF2990T","company":{"identifier":"Allegro","name":"Allegro"},"releasedDate":"2021-10-14T10:29:00.000Z","location":{"city":"Warszawa, Poznań, Kraków, Toruń, Wrocław, Gdańsk, Katowice, Łódź, Lublin","country":"pl","remote":false},"industry":{"id":"internet","label":"Internet"},"department":{"id":"2572821","label":"IT - Machine Learning"},"function":{"id":"information_technology","label":"Information Technology"},"typeOfEmployment":{"label":"Full-time"},"experienceLevel":{"id":"mid_senior_level","label":"Mid-Senior Level"},"customField":[{"fieldId":"58c1575ee4b01d4b19ddf797","fieldLabel":"Kraków","valueId":"2cfcfcc1-da44-43f7-8eaa-3907faf2797c","valueLabel":"Tak"},{"fieldId":"58c158e9e4b0614667d5973e","fieldLabel":"Więcej lokalizacji","valueId":"3a186e8d-a82c-4955-af81-fcef9a63928a","valueLabel":"Tak"},{"fieldId":"58c1576ee4b0614667d59732","fieldLabel":"Toruń","valueId":"987e8884-bad1-4a8f-b149-99e4184cc221","valueLabel":"Tak"},{"fieldId":"58c156e6e4b01d4b19ddf793","fieldLabel":"Warszawa","valueId":"6a428533-1586-4372-89ec-65fb45366363","valueLabel":"Tak"},{"fieldId":"60cb31a9c87e511299a3a050","fieldLabel":"Department II","valueId":"b8a4596e-d9ce-42bb-8de5-10995e9ccf99","valueLabel":"IT - Machine Learning"},{"fieldId":"58c15608e4b01d4b19ddf790","fieldLabel":"Proces rekrutacji","valueId":"c807eec2-8a53-4b55-b7c5-c03180f2059b","valueLabel":"(Archive) IT Allegro"},{"fieldId":"COUNTRY","fieldLabel":"Country","valueId":"pl","valueLabel":"Poland"},{"fieldId":"58c15788e4b0614667d59733","fieldLabel":"Błonie","valueId":"25f6cb8c-81b3-434a-93ec-6dc851d5808d","valueLabel":"Nie"},{"fieldId":"58c15798e4b01d4b19ddf79b","fieldLabel":"Wrocław","valueId":"64818201-cdba-422e-8e8c-8ec633b0d327","valueLabel":"Tak"},{"fieldId":"58c13159e4b01d4b19ddf729","fieldLabel":"Department","valueId":"2572821","valueLabel":"IT - Machine Learning"},{"fieldId":"58c13159e4b01d4b19ddf728","fieldLabel":"Brands","valueId":"4ccb4fab-6c3f-4ed0-9140-8533fe17447f","valueLabel":"Allegro.pl sp. z o.o."},{"fieldId":"58c156b9e4b01d4b19ddf792","fieldLabel":"Poznań","valueId":"ac20917b-cb6a-4280-aff3-4fae2532a33e","valueLabel":"Tak"},{"fieldId":"5cdab2c84cedfd0006e7758c","fieldLabel":"Key words","valueLabel":"ML, AI, Ranking, Research, Machine Learning"}],"ref":"https://api.smartrecruiters.com/v1/companies/allegro/postings/743999779448676","creator":{"name":"Maciej Matwiejczyk"},"language":{"code":"pl","label":"Polish","labelNative":"polski"}},{"id":"743999779015147","name":"Data Analyst (Consumer Analytics)","uuid":"57b6c274-611c-402d-aeef-6b2753039c68","refNumber":"REF2827C","company":{"identifier":"Allegro","name":"Allegro"},"releasedDate":"2021-10-12T13:32:35.000Z","location":{"city":"Warszawa, Poznań","country":"pl","remote":false},"industry":{"id":"internet","label":"Internet"},"department":{"id":"2572804","label":"IT - Analytics \u0026 Consulting"},"function":{"id":"analyst","label":"Analyst"},"typeOfEmployment":{"label":"Full-time"},"experienceLevel":{"id":"mid_senior_level","label":"Mid-Senior Level"},"customField":[{"fieldId":"58c15608e4b01d4b19ddf790","fieldLabel":"Proces rekrutacji","valueId":"c807eec2-8a53-4b55-b7c5-c03180f2059b","valueLabel":"(Archive) IT Allegro"},{"fieldId":"COUNTRY","fieldLabel":"Country","valueId":"pl","valueLabel":"Poland"},{"fieldId":"58c158e9e4b0614667d5973e","fieldLabel":"Więcej lokalizacji","valueId":"3a186e8d-a82c-4955-af81-fcef9a63928a","valueLabel":"Tak"},{"fieldId":"58c13159e4b01d4b19ddf729","fieldLabel":"Department","valueId":"2572804","valueLabel":"IT - Analytics \u0026 Consulting"},{"fieldId":"58c13159e4b01d4b19ddf728","fieldLabel":"Brands","valueId":"4ccb4fab-6c3f-4ed0-9140-8533fe17447f","valueLabel":"Allegro.pl sp. z o.o."},{"fieldId":"58c156b9e4b01d4b19ddf792","fieldLabel":"Poznań","valueId":"ac20917b-cb6a-4280-aff3-4fae2532a33e","valueLabel":"Tak"},{"fieldId":"58c156e6e4b01d4b19ddf793","fieldLabel":"Warszawa","valueId":"6a428533-1586-4372-89ec-65fb45366363","valueLabel":"Tak"}],"ref":"https://api.smartrecruiters.com/v1/companies/allegro/postings/743999779015147","creator":{"name":"Ada Latańska"},"language":{"code":"pl","label":"Polish","labelNative":"polski"}}],"events":[{"created":1638356820000,"duration":7200000,"id":"282421464","name":"Allegro Tech Labs #9 Online: System design workshop","date_in_series_pattern":false,"status":"past","time":1639501200000,"local_date":"2021-12-14","local_time":"18:00","updated":1639514166000,"utc_offset":3600000,"waitlist_count":0,"yes_rsvp_count":62,"venue":{"id":26906060,"name":"Online event","repinned":false,"country":"","localized_country_name":""},"is_online_event":true,"group":{"created":1425052059000,"name":"allegro Tech","id":18465254,"join_mode":"open","lat":52.2599983215332,"lon":21.020000457763672,"urlname":"allegrotech","who":"Techs","localized_location":"Warsaw, Poland","state":"","country":"pl","region":"en_US","timezone":"Europe/Warsaw"},"link":"https://www.meetup.com/allegrotech/events/282421464/","description":"❗NA WYDARZENIE OBOWIĄZUJE REJESTRACJA: Liczba miejsc jest organiczona: https://app.evenea.pl/event/allegro-tech-labs-9/ ❗ To już druga edycja naszych warsztatów System Design Workshop! Czy chcesz poznać tajniki tworzenia systemów?…","how_to_find_us":"https://app.evenea.pl/event/allegro-tech-labs-9/","visibility":"public","member_pay_fee":false},{"created":1635344914000,"duration":7200000,"id":"281692274","name":"Allegro Tech Live #23 - Przygody backendowców w C#","date_in_series_pattern":false,"status":"past","time":1636045200000,"local_date":"2021-11-04","local_time":"18:00","updated":1636056125000,"utc_offset":3600000,"waitlist_count":0,"yes_rsvp_count":29,"is_online_event":false,"group":{"created":1425052059000,"name":"allegro Tech","id":18465254,"join_mode":"open","lat":52.2599983215332,"lon":21.020000457763672,"urlname":"allegrotech","who":"Techs","localized_location":"Warsaw, Poland","state":"","country":"pl","region":"en_US","timezone":"Europe/Warsaw"},"link":"https://www.meetup.com/allegrotech/events/281692274/","description":"------ Rejestracja: https://app.evenea.pl/event/allegro-tech-live-23/------- Allegro Tech Live to w 100% zdalna odsłona naszych stacjonarnych meetupów Allegro Tech Talks. Kiedyś spotykaliśmy się w naszych biurach, a teraz…","visibility":"public","member_pay_fee":false},{"created":1634290537000,"duration":5400000,"id":"281441586","name":"Allegro Tech Live #22 - Jak wygląda codzienność lidera w Allegro?","date_in_series_pattern":false,"status":"past","time":1634832000000,"local_date":"2021-10-21","local_time":"18:00","updated":1634841007000,"utc_offset":7200000,"waitlist_count":0,"yes_rsvp_count":67,"venue":{"id":26906060,"name":"Online event","repinned":false,"country":"","localized_country_name":""},"is_online_event":true,"group":{"created":1425052059000,"name":"allegro Tech","id":18465254,"join_mode":"open","lat":52.2599983215332,"lon":21.020000457763672,"urlname":"allegrotech","who":"Techs","localized_location":"Warsaw, Poland","state":"","country":"pl","region":"en_US","timezone":"Europe/Warsaw"},"link":"https://www.meetup.com/allegrotech/events/281441586/","description":"!!!! Rejestracja: https://app.evenea.pl/event/allegro-tech-live-22/ !!!! Allegro Tech Live to w 100% zdalna odsłona naszych stacjonarnych meetupów Allegro Tech Talks. Zazwyczaj spotykaliśmy się w naszych biurach, ale…","visibility":"public","member_pay_fee":false},{"created":1633336352000,"duration":7200000,"id":"281199452","name":"Allegro Tech Live #21 - Jak zautomatyzować bezpieczeństwo IT?","date_in_series_pattern":false,"status":"past","time":1633622400000,"local_date":"2021-10-07","local_time":"18:00","updated":1633634017000,"utc_offset":7200000,"waitlist_count":0,"yes_rsvp_count":48,"is_online_event":false,"group":{"created":1425052059000,"name":"allegro Tech","id":18465254,"join_mode":"open","lat":52.2599983215332,"lon":21.020000457763672,"urlname":"allegrotech","who":"Techs","localized_location":"Warsaw, Poland","state":"","country":"pl","region":"en_US","timezone":"Europe/Warsaw"},"link":"https://www.meetup.com/allegrotech/events/281199452/","description":"Allegro Tech Live to w 100% zdalna odsłona naszych stacjonarnych meetupów Allegro Tech Talks. Zazwyczaj spotykaliśmy się w naszych biurach, ale tym razem to my…","visibility":"public","member_pay_fee":false}],"podcasts":[{"creator":{"name":["Piotr Betkier"]},"title":"Rola architekta w Allegro","link":"https://podcast.allegro.tech/rola_architekta_w_allegro","pubDate":"Wed, 16 Jun 2021 00:00:00 GMT","author":{"name":["Piotr Betkier"]},"enclosure":{"url":"https://www.buzzsprout.com/887914/8712218.mp3","type":"audio/mpeg"},"content":"Od kodowania do tworzenia strategii technicznej... Jak wygląda rola architekta w Allegro? Ile takich osób pracuje w naszej firmie i dlaczego ta rola jest tak różnorodna? Czym jest Andamio i jak rozwijamy naszą platformę – o tym wszystkim opowie Piotr Betkier – Inżynier, Architekt Platformy Technicznej w Allegro oraz twórca piosenek o IT :)","contentSnippet":"Od kodowania do tworzenia strategii technicznej... Jak wygląda rola architekta w Allegro? Ile takich osób pracuje w naszej firmie i dlaczego ta rola jest tak różnorodna? Czym jest Andamio i jak rozwijamy naszą platformę – o tym wszystkim opowie Piotr Betkier – Inżynier, Architekt Platformy Technicznej w Allegro oraz twórca piosenek o IT :)","guid":"https://podcast.allegro.tech/rola_architekta_w_allegro","isoDate":"2021-06-16T00:00:00.000Z","itunes":{"author":"Piotr Betkier","summary":"Od kodowania do tworzenia strategii technicznej... Jak wygląda rola architekta w Allegro? Ile takich osób pracuje w naszej firmie i dlaczego ta rola jest tak różnorodna? Czym jest Andamio i jak rozwijamy naszą platformę – o tym wszystkim opowie Piotr Betkier – Inżynier, Architekt Platformy Technicznej w Allegro oraz twórca piosenek o IT :)","explicit":"false"}},{"creator":{"name":["Piotr Michoński"]},"title":"Infrastruktura Allegro","link":"https://podcast.allegro.tech/infrastruktura_Allegro","pubDate":"Tue, 01 Jun 2021 00:00:00 GMT","author":{"name":["Piotr Michoński"]},"enclosure":{"url":"https://www.buzzsprout.com/887914/8623783-sezon-ii-11-infrastruktura-allegro-piotr-michonski.mp3","type":"audio/mpeg"},"content":"Jak jest zbudowane środowisko uruchomienia aplikacji Allegro? Jak działają serwerownie firmy i ile ich potrzeba, a które elementy Allegro działają w chmurze publicznej? Jak przebiegała transformacja w Allegro i co zmieniało się przez lata? Jak wzrost biznesu wpływa na wielkość infrastruktury i jak infrastruktura Allegro odczuła przyjście pandemii? O tym, a także o rozwoju liderów technologii w Allegro oraz o historii powstania dżingla do naszych podcastów, opowie Piotr Michoński - menadżer Zespołów tworzących infrastrukturę Allegro.","contentSnippet":"Jak jest zbudowane środowisko uruchomienia aplikacji Allegro? Jak działają serwerownie firmy i ile ich potrzeba, a które elementy Allegro działają w chmurze publicznej? Jak przebiegała transformacja w Allegro i co zmieniało się przez lata? Jak wzrost biznesu wpływa na wielkość infrastruktury i jak infrastruktura Allegro odczuła przyjście pandemii? O tym, a także o rozwoju liderów technologii w Allegro oraz o historii powstania dżingla do naszych podcastów, opowie Piotr Michoński - menadżer Zespołów tworzących infrastrukturę Allegro.","guid":"https://podcast.allegro.tech/infrastruktura_Allegro","isoDate":"2021-06-01T00:00:00.000Z","itunes":{"author":"Piotr Michoński","summary":"Jak jest zbudowane środowisko uruchomienia aplikacji Allegro? Jak działają serwerownie firmy i ile ich potrzeba, a które elementy Allegro działają w chmurze publicznej? Jak przebiegała transformacja w Allegro i co zmieniało się przez lata? Jak wzrost biznesu wpływa na wielkość infrastruktury i jak infrastruktura Allegro odczuła przyjście pandemii? O tym, a także o rozwoju liderów technologii w Allegro oraz o historii powstania dżingla do naszych podcastów, opowie Piotr Michoński - menadżer Zespołów tworzących infrastrukturę Allegro.","explicit":"false"}},{"creator":{"name":["Dariusz Eliasz"]},"title":"Praca architekta ekosystemu big data w Allegro","link":"https://podcast.allegro.tech/praca_architekta_ekosystemu_big_data_w_Allegro","pubDate":"Thu, 20 May 2021 00:00:00 GMT","author":{"name":["Dariusz Eliasz"]},"enclosure":{"url":"https://www.buzzsprout.com/887914/8554742-sezon-ii-10-przetwarzanie-danych-w-allegro-dariusz-eliasz.mp3","type":"audio/mpeg"},"content":"Jak wygląda praca architekta ekosystemu big data w Allegro? Jakie zadania realizuje nasz zespół odpowiedzialny za narzędzia i infrastrukturę dla przetwarzania danych? Kiedy możemy mówić o dużych danych i ile petabajtów przetwarza Allegro? Skąd pochodzą dane Allegro i dlaczego jest ich tak dużo oraz z jakiego powodu dopiero teraz przenosimy się do chmury? O tym wszystkim opowie zdobywca statuetki Allegro Tech Hero - Dariusz Eliasz – Team Manager \u0026 Platform Architect w Allegro.","contentSnippet":"Jak wygląda praca architekta ekosystemu big data w Allegro? Jakie zadania realizuje nasz zespół odpowiedzialny za narzędzia i infrastrukturę dla przetwarzania danych? Kiedy możemy mówić o dużych danych i ile petabajtów przetwarza Allegro? Skąd pochodzą dane Allegro i dlaczego jest ich tak dużo oraz z jakiego powodu dopiero teraz przenosimy się do chmury? O tym wszystkim opowie zdobywca statuetki Allegro Tech Hero - Dariusz Eliasz – Team Manager \u0026 Platform Architect w Allegro.","guid":"https://podcast.allegro.tech/praca_architekta_ekosystemu_big_data_w_Allegro","isoDate":"2021-05-20T00:00:00.000Z","itunes":{"author":"Dariusz Eliasz","summary":"Jak wygląda praca architekta ekosystemu big data w Allegro? Jakie zadania realizuje nasz zespół odpowiedzialny za narzędzia i infrastrukturę dla przetwarzania danych? Kiedy możemy mówić o dużych danych i ile petabajtów przetwarza Allegro? Skąd pochodzą dane Allegro i dlaczego jest ich tak dużo oraz z jakiego powodu dopiero teraz przenosimy się do chmury? O tym wszystkim opowie zdobywca statuetki Allegro Tech Hero - Dariusz Eliasz – Team Manager \u0026 Platform Architect w Allegro.","explicit":"false"}},{"creator":{"name":["Bartosz Gałek"]},"title":"Od inżyniera do lidera w Allegro","link":"https://podcast.allegro.tech/od_inzyniera_do_lidera_w_allegro","pubDate":"Thu, 06 May 2021 00:00:00 GMT","author":{"name":["Bartosz Gałek"]},"enclosure":{"url":"https://www.buzzsprout.com/887914/8455586-sezon-ii-9-od-inzyniera-do-lidera-w-allegro-bartosz-galek.mp3","type":"audio/mpeg"},"content":"Czym jest Opbox i jakie wyzwania przed nim stoją? Jak w Allegro angażujemy się w rozwój kultury Open Source? Ile mamy projektów na GitHubie i jak świętujemy Hacktoberfest? W jaki sposób można rozwinąć się od inżyniera do lidera? Na te pytania w najnowszym Allegro Tech Podcast odpowie Bartek Gałek, Team Leader w Allegro.","contentSnippet":"Czym jest Opbox i jakie wyzwania przed nim stoją? Jak w Allegro angażujemy się w rozwój kultury Open Source? Ile mamy projektów na GitHubie i jak świętujemy Hacktoberfest? W jaki sposób można rozwinąć się od inżyniera do lidera? Na te pytania w najnowszym Allegro Tech Podcast odpowie Bartek Gałek, Team Leader w Allegro.","guid":"https://podcast.allegro.tech/od_inzyniera_do_lidera_w_allegro","isoDate":"2021-05-06T00:00:00.000Z","itunes":{"author":"Bartosz Gałek","summary":"Czym jest Opbox i jakie wyzwania przed nim stoją? Jak w Allegro angażujemy się w rozwój kultury Open Source? Ile mamy projektów na GitHubie i jak świętujemy Hacktoberfest? W jaki sposób można rozwinąć się od inżyniera do lidera? Na te pytania w najnowszym Allegro Tech Podcast odpowie Bartek Gałek, Team Leader w Allegro.","explicit":"false"}}]},"__N_SSG":true},"page":"/","query":{},"buildId":"QRY2s86BGNNZ02zKRbDh8","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>