<!DOCTYPE html><html lang="pl"><head><meta charSet="utf-8"/><link rel="prefetch" href="https://allegrotechio.disqus.com/count.js"/><meta name="viewport" content="initial-scale=1.0, width=device-width"/><meta name="description" content="Allegro Tech to miejsce, w którym nasi inżynierowie dzielą się wiedzą oraz case study z wybranych projektów w firmie - w formie artykułów, podcastów oraz eventów."/><title>Allegro Tech</title><meta property="og:site_name" content="allegro.tech"/><meta property="og:title" content="allegro.tech"/><meta property="og:url" content="https://allegro.tech"/><meta property="og:type" content="site"/><meta property="og:image" content="https://allegro.tech/images/allegro-tech.png"/><link rel="shortcut icon" href="favicon.ico"/><link rel="canonical" href="https://allegro.tech" itemProp="url"/><link rel="preload" href="images/splash.jpg" as="image"/><link rel="author" href="humans.txt"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-1M1FJ5PXWW"></script><script>
                    window.dataLayer = window.dataLayer || [];
                    function gtag(){dataLayer.push(arguments);}
                    gtag('js', new Date());
                    gtag('config', 'G-1M1FJ5PXWW');
                </script><meta name="next-head-count" content="16"/><link rel="preload" href="/_next/static/css/c4277531f90028a4.css" as="style"/><link rel="stylesheet" href="/_next/static/css/c4277531f90028a4.css" data-n-g=""/><link rel="preload" href="/_next/static/css/79db8b1e27b0a093.css" as="style"/><link rel="stylesheet" href="/_next/static/css/79db8b1e27b0a093.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-69bfa6990bb9e155.js" defer=""></script><script src="/_next/static/chunks/framework-e70c6273bfe3f237.js" defer=""></script><script src="/_next/static/chunks/main-f635b472c367d1c7.js" defer=""></script><script src="/_next/static/chunks/pages/_app-9d73513da824d371.js" defer=""></script><script src="/_next/static/chunks/206-3a56e5ded293e83e.js" defer=""></script><script src="/_next/static/chunks/pages/index-6d107a2c81ecb4ad.js" defer=""></script><script src="/_next/static/6B0cNhf9dW7YpszdKXfRE/_buildManifest.js" defer=""></script><script src="/_next/static/6B0cNhf9dW7YpszdKXfRE/_ssgManifest.js" defer=""></script><script src="/_next/static/6B0cNhf9dW7YpszdKXfRE/_middlewareManifest.js" defer=""></script></head><body class="m-color-bg_desk"><div id="__next" data-reactroot=""><header class="m-padding-top_16 m-padding-top_24_lg m-padding-right_16 m-padding-right_24_lg m-padding-bottom_16 m-padding-bottom_24_lg m-padding-left_16 m-padding-left_24_lg m-card Header_navbar__Zc5aN m-color-bg_card"><nav class="m-width-max_1600 m-margin-left_auto m-margin-right_auto m-display-flex m-flex-justify-between m-flex-items-center"><a href="/"><img src="images/logo.svg" alt="Allegro Tech" width="205" height="45"/></a><div><ul class="m-font-family_sans m-font-size_14 m-line-height_21 m-color_text m-text-size-adjust_100p m-list-style-type_none m-margin-top_0 m-margin-right_0 m-margin-bottom_0 m-margin-left_0 m-padding-top_0 m-padding-right_0 m-padding-bottom_0 m-padding-left_0 m-display-flex@lg m-display-none"><li class="m-margin-left-16@lg"><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-display-block m-display-inline@lg m-padding-left-16 m-padding-right-16 m-padding-top-16 m-padding-bottom-16 m-padding-left-0@lg m-padding-top-0@lg m-padding-right-0@lg m-padding-bottom-0@lg m-link--signal m-line-height_21" href="https://blog.allegro.tech">Blog</a></li><li class="m-margin-left-16@lg"><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-display-block m-display-inline@lg m-padding-left-16 m-padding-right-16 m-padding-top-16 m-padding-bottom-16 m-padding-left-0@lg m-padding-top-0@lg m-padding-right-0@lg m-padding-bottom-0@lg m-link--signal m-line-height_21" href="https://ml.allegro.tech">Machine Learning</a></li><li class="m-margin-left-16@lg"><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-display-block m-display-inline@lg m-padding-left-16 m-padding-right-16 m-padding-top-16 m-padding-bottom-16 m-padding-left-0@lg m-padding-top-0@lg m-padding-right-0@lg m-padding-bottom-0@lg m-link--signal m-line-height_21" href="https://podcast.allegro.tech">Podcast</a></li><li class="m-margin-left-16@lg"><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-display-block m-display-inline@lg m-padding-left-16 m-padding-right-16 m-padding-top-16 m-padding-bottom-16 m-padding-left-0@lg m-padding-top-0@lg m-padding-right-0@lg m-padding-bottom-0@lg m-link--signal m-line-height_21" href="https://github.com/Allegro">Open Source</a></li><li class="m-margin-left-16@lg"><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-display-block m-display-inline@lg m-padding-left-16 m-padding-right-16 m-padding-top-16 m-padding-bottom-16 m-padding-left-0@lg m-padding-top-0@lg m-padding-right-0@lg m-padding-bottom-0@lg m-link--signal m-line-height_21" href="https://www.meetup.com/allegrotech/events">Wydarzenia</a></li><li class="m-margin-left-16@lg"><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-display-block m-display-inline@lg m-padding-left-16 m-padding-right-16 m-padding-top-16 m-padding-bottom-16 m-padding-left-0@lg m-padding-top-0@lg m-padding-right-0@lg m-padding-bottom-0@lg m-link--signal m-line-height_21" href="https://jobs.allegro.eu">Praca</a></li></ul><button class="m-display-none@lg m-height_40 m-line-height_40 m-border-style-top_none m-border-style-right_none m-border-style-bottom_none m-border-style-left_none m-border-radius-top-left_2 m-border-radius-top-right_2 m-border-radius-bottom-left_2 m-border-radius-bottom-right_2 m-cursor_pointer m-overflow_hidden m-appearance_none m-padding-left_4 m-padding-right_4 m-padding-top_4 m-padding-bottom_4 m-outline-style_dotted--focus m-outline-width_2 m-outline-color_teal m-outline-offset_n2 m-button" style="background:transparent" aria-label="Otwórz menu"><img src="https://assets.allegrostatic.com/metrum/icon/menu-23e046bf68.svg" alt="" class="m-icon" width="32" height="32"/></button></div></nav></header><div class="Header_hero__PYE0B"><div class="m-width-max_1600 m-margin-left_auto m-margin-right_auto m-display-flex m-flex-column m-flex-justify-end Header_image__Cj6ZF"><div class="m-padding-top_16 m-padding-top_24_lg m-padding-right_16 m-padding-right_24_lg m-padding-bottom_16 m-padding-bottom_24_lg m-padding-left_16 m-padding-left_24_lg m-card m-color-bg_desk"><h2 class="m-font-family_roboto m-margin-left_0 m-margin-right_0 m-margin-top_0 m-color_text  m-font-weight_100 m-font-size_32 m-font-size_43_sm m-margin-bottom_16 m-margin-bottom_24_sm m-line-height_125">About us</h2><p class="m-font-family_sans m-line-height_21 m-font-size_14 m-text-size-adjust_100p m-margin-top_0 m-margin-right_0 m-margin-bottom_0 m-margin-left_0 m-color_text">Allegro is one of the most technologically advanced companies in our part of Europe. Allegro is also over 1700 IT specialists of various specializations, developing our website. The unique scale and complexity of the problems that we solve on a daily basis give us the opportunity to develop on a wide variety of projects. Allegro Tech is a place where our engineers share knowledge and case studies from selected projects in the company – in the form of articles, podcasts and events.</p></div></div></div><div class="m-width-max_1600 m-margin-left_auto m-margin-right_auto m-padding-top-24"><h2 class="m-font-family_roboto m-margin-left_0 m-margin-right_0 m-margin-top_0 m-color_text m-font-weight_300 m-font-size_27 m-font-size_36_sm m-margin-bottom_16 m-margin-bottom_24_sm m-line-height_125 m-padding-left-24 m-padding-right-24">Blog</h2><div class="m-display_flex m-flex-wrap_1 m-flex-grow_1 m-grid"><div class="m-grid__col m-grid__col--12 m-grid__col--6@sm m-grid__col--3@xl m-display-flex m-flex-direction_column"><article class="m-margin-bottom_16 m-display-flex m-flex-column m-flex-grow_1"><a href="https://blog.allegro.tech/2024/02/couchbase-expired-docs-tuning.html" title="Don’t bother: it is only a little expired"><img width="388" src="images/blogpost.png" alt="Don’t bother: it is only a little expired" class="m-display-block m-width-fluid"/></a><div class="m-padding-top_16 m-padding-top_24_lg m-padding-right_16 m-padding-right_24_lg m-padding-left_16 m-padding-left_24_lg m-card m-display-flex m-flex-column m-flex-grow_1 m-padding-bottom-0 m-color-bg_card"><a href="https://blog.allegro.tech/2024/02/couchbase-expired-docs-tuning.html" title="Don’t bother: it is only a little expired" class="m-text-decoration_none"><h2 class="m-font-family_roboto m-margin-left_0 m-margin-right_0 m-margin-top_0 m-color_text m-font-weight_500 m-line-height_130 m-margin-bottom_8 m-margin-bottom_16_sm m-font-size_21 m-font-size_25_sm" style="text-overflow:ellipsis;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;min-height:2em;overflow:hidden">Don’t bother: it is only a little expired</h2></a><time class="m-font-family_sans m-line-height_21 m-font-size_14 m-text-size-adjust_100p m-margin-top_0 m-margin-right_0 m-margin-bottom_0 m-margin-left_0 m-color_text m-padding-bottom-16">około 10 godzin temu</time><ul class="m-font-family_sans m-font-size_14 m-line-height_21 m-color_text m-text-size-adjust_100p m-list-style-type_none m-margin-top_0 m-margin-right_0 m-margin-bottom_0 m-margin-left_0 m-padding-top_0 m-padding-right_0 m-padding-bottom_0 m-padding-left_0"><li class="m-margin-right-8 m-display-inline-block"><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-line-height_21" href="https://twitter.com/hashtag/tech">#<!-- -->tech</a></li><li class="m-margin-right-8 m-display-inline-block"><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-line-height_21" href="https://twitter.com/hashtag/couchbase">#<!-- -->couchbase</a></li><li class="m-margin-right-8 m-display-inline-block"><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-line-height_21" href="https://twitter.com/hashtag/replication">#<!-- -->replication</a></li><li class="m-margin-right-8 m-display-inline-block"><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-line-height_21" href="https://twitter.com/hashtag/performance bottleneck">#<!-- -->performance bottleneck</a></li><li class="m-margin-right-8 m-display-inline-block"><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-line-height_21" href="https://twitter.com/hashtag/open source">#<!-- -->open source</a></li><li class="m-margin-right-8 m-display-inline-block"><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-line-height_21" href="https://twitter.com/hashtag/ttl">#<!-- -->ttl</a></li><li class="m-margin-right-8 m-display-inline-block"><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-line-height_21" href="https://twitter.com/hashtag/metrics">#<!-- -->metrics</a></li></ul><p class="m-font-family_sans m-line-height_21 m-font-size_14 m-text-size-adjust_100p m-margin-top_0 m-margin-right_0 m-margin-bottom_0 m-margin-left_0 m-color_text m-flex-grow-1 m-padding-top-16">This story shows how we strive to fix issues reported by our customers regarding inconsistent listing views on our e-commerce platform.
We will use a top-down…</p><div class="m-display-flex m-flex-justify-between m-padding-top-16 m-flex-items_center"><div class="m-display-flex m-flex-items_center"><div class="MuiAvatarGroup-root m-padding-right_16 Post_avatars__FHMgb"><div class="MuiAvatar-root MuiAvatar-circle MuiAvatarGroup-avatar" style="z-index:1"><img alt="Tomasz Ziółkowski" src="https://blog.allegro.tech/img/authors/tomasz.ziolkowski.jpg" class="MuiAvatar-img" width="32" height="32"/></div></div><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-line-height_21" href="https://blog.allegro.tech/authors/tomasz.ziolkowski">Tomasz Ziółkowski</a></div><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-line-height_21" href="https://blog.allegro.tech/2024/02/couchbase-expired-docs-tuning.html#disqus_thread">0 Comments</a></div><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-margin-top-16 m-display_block m-border-width_1 m-border-color_gray m-border-style-top_solid m-height_40 m-line-height_40 m-text-transform_uppercase m-letter-spacing_2 m-white-space_nowrap m-cursor_pointer m-overflow_hidden m-padding-left_16 m-padding-right_16 m-padding-top_0 m-padding-bottom_0 m-outline-style_dotted--focus m-outline-width_2 m-outline-color_teal m-outline-offset_n2 m-button m-box_border m-text-align_center m-display_inline-block m-color_secondary m-background-position_50p m-background-size_5000p m-transition-property_background-color m-transition-duration_fast m-button--secondary" href="https://blog.allegro.tech/2024/02/couchbase-expired-docs-tuning.html">przejdź do wpisu</a></div></article></div><div class="m-grid__col m-grid__col--12 m-grid__col--6@sm m-grid__col--3@xl m-display-flex m-flex-direction_column"><article class="m-margin-bottom_16 m-display-flex m-flex-column m-flex-grow_1"><a href="https://blog.allegro.tech/2024/01/wcag-2-2.html" title="WCAG 2.2 is here! And what about 3.0?"><img width="388" src="images/blogpost.png" alt="WCAG 2.2 is here! And what about 3.0?" class="m-display-block m-width-fluid"/></a><div class="m-padding-top_16 m-padding-top_24_lg m-padding-right_16 m-padding-right_24_lg m-padding-left_16 m-padding-left_24_lg m-card m-display-flex m-flex-column m-flex-grow_1 m-padding-bottom-0 m-color-bg_card"><a href="https://blog.allegro.tech/2024/01/wcag-2-2.html" title="WCAG 2.2 is here! And what about 3.0?" class="m-text-decoration_none"><h2 class="m-font-family_roboto m-margin-left_0 m-margin-right_0 m-margin-top_0 m-color_text m-font-weight_500 m-line-height_130 m-margin-bottom_8 m-margin-bottom_16_sm m-font-size_21 m-font-size_25_sm" style="text-overflow:ellipsis;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;min-height:2em;overflow:hidden">WCAG 2.2 is here! And what about 3.0?</h2></a><time class="m-font-family_sans m-line-height_21 m-font-size_14 m-text-size-adjust_100p m-margin-top_0 m-margin-right_0 m-margin-bottom_0 m-margin-left_0 m-color_text m-padding-bottom-16">19 dni temu</time><ul class="m-font-family_sans m-font-size_14 m-line-height_21 m-color_text m-text-size-adjust_100p m-list-style-type_none m-margin-top_0 m-margin-right_0 m-margin-bottom_0 m-margin-left_0 m-padding-top_0 m-padding-right_0 m-padding-bottom_0 m-padding-left_0"><li class="m-margin-right-8 m-display-inline-block"><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-line-height_21" href="https://twitter.com/hashtag/tech">#<!-- -->tech</a></li><li class="m-margin-right-8 m-display-inline-block"><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-line-height_21" href="https://twitter.com/hashtag/accessibility">#<!-- -->accessibility</a></li><li class="m-margin-right-8 m-display-inline-block"><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-line-height_21" href="https://twitter.com/hashtag/a11y">#<!-- -->a11y</a></li><li class="m-margin-right-8 m-display-inline-block"><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-line-height_21" href="https://twitter.com/hashtag/wcag">#<!-- -->wcag</a></li></ul><p class="m-font-family_sans m-line-height_21 m-font-size_14 m-text-size-adjust_100p m-margin-top_0 m-margin-right_0 m-margin-bottom_0 m-margin-left_0 m-color_text m-flex-grow-1 m-padding-top-16">Ready to turn web accessibility from a headache into a breeze? Join us as we demystify WCAG, explore its latest 2.2 version, and gaze into…</p><div class="m-display-flex m-flex-justify-between m-padding-top-16 m-flex-items_center"><div class="m-display-flex m-flex-items_center"><div class="MuiAvatarGroup-root m-padding-right_16 Post_avatars__FHMgb"><div class="MuiAvatar-root MuiAvatar-circle MuiAvatarGroup-avatar" style="z-index:1"><img alt="Barbara Szott" src="https://blog.allegro.tech/img/authors/barbara.szott.jpg" class="MuiAvatar-img" width="32" height="32"/></div></div><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-line-height_21" href="https://blog.allegro.tech/authors/barbara.szott">Barbara Szott</a></div><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-line-height_21" href="https://blog.allegro.tech/2024/01/wcag-2-2.html#disqus_thread">0 Comments</a></div><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-margin-top-16 m-display_block m-border-width_1 m-border-color_gray m-border-style-top_solid m-height_40 m-line-height_40 m-text-transform_uppercase m-letter-spacing_2 m-white-space_nowrap m-cursor_pointer m-overflow_hidden m-padding-left_16 m-padding-right_16 m-padding-top_0 m-padding-bottom_0 m-outline-style_dotted--focus m-outline-width_2 m-outline-color_teal m-outline-offset_n2 m-button m-box_border m-text-align_center m-display_inline-block m-color_secondary m-background-position_50p m-background-size_5000p m-transition-property_background-color m-transition-duration_fast m-button--secondary" href="https://blog.allegro.tech/2024/01/wcag-2-2.html">przejdź do wpisu</a></div></article></div><div class="m-grid__col m-grid__col--12 m-grid__col--6@sm m-grid__col--3@xl m-display-flex m-flex-direction_column"><article class="m-margin-bottom_16 m-display-flex m-flex-column m-flex-grow_1"><a href="https://blog.allegro.tech/2024/01/embed-multicolor-icons-using-a-single-DOM-element.html" title="Embed multicolor icons using a single DOM element"><img width="388" src="images/blogpost.png" alt="Embed multicolor icons using a single DOM element" class="m-display-block m-width-fluid"/></a><div class="m-padding-top_16 m-padding-top_24_lg m-padding-right_16 m-padding-right_24_lg m-padding-left_16 m-padding-left_24_lg m-card m-display-flex m-flex-column m-flex-grow_1 m-padding-bottom-0 m-color-bg_card"><a href="https://blog.allegro.tech/2024/01/embed-multicolor-icons-using-a-single-DOM-element.html" title="Embed multicolor icons using a single DOM element" class="m-text-decoration_none"><h2 class="m-font-family_roboto m-margin-left_0 m-margin-right_0 m-margin-top_0 m-color_text m-font-weight_500 m-line-height_130 m-margin-bottom_8 m-margin-bottom_16_sm m-font-size_21 m-font-size_25_sm" style="text-overflow:ellipsis;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;min-height:2em;overflow:hidden">Embed multicolor icons using a single DOM element</h2></a><time class="m-font-family_sans m-line-height_21 m-font-size_14 m-text-size-adjust_100p m-margin-top_0 m-margin-right_0 m-margin-bottom_0 m-margin-left_0 m-color_text m-padding-bottom-16">około miesiąc temu</time><ul class="m-font-family_sans m-font-size_14 m-line-height_21 m-color_text m-text-size-adjust_100p m-list-style-type_none m-margin-top_0 m-margin-right_0 m-margin-bottom_0 m-margin-left_0 m-padding-top_0 m-padding-right_0 m-padding-bottom_0 m-padding-left_0"><li class="m-margin-right-8 m-display-inline-block"><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-line-height_21" href="https://twitter.com/hashtag/tech">#<!-- -->tech</a></li><li class="m-margin-right-8 m-display-inline-block"><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-line-height_21" href="https://twitter.com/hashtag/web">#<!-- -->web</a></li><li class="m-margin-right-8 m-display-inline-block"><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-line-height_21" href="https://twitter.com/hashtag/svg">#<!-- -->svg</a></li><li class="m-margin-right-8 m-display-inline-block"><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-line-height_21" href="https://twitter.com/hashtag/css">#<!-- -->css</a></li><li class="m-margin-right-8 m-display-inline-block"><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-line-height_21" href="https://twitter.com/hashtag/html">#<!-- -->html</a></li></ul><p class="m-font-family_sans m-line-height_21 m-font-size_14 m-text-size-adjust_100p m-margin-top_0 m-margin-right_0 m-margin-bottom_0 m-margin-left_0 m-color_text m-flex-grow-1 m-padding-top-16">Hello, fellow Web developers!
Icons are an integral part of most modern UIs.
What is the best way to embed icons nowadays?
This area is full of pitfalls.
You…</p><div class="m-display-flex m-flex-justify-between m-padding-top-16 m-flex-items_center"><div class="m-display-flex m-flex-items_center"><div class="MuiAvatarGroup-root m-padding-right_16 Post_avatars__FHMgb"><div class="MuiAvatar-root MuiAvatar-circle MuiAvatarGroup-avatar" style="z-index:2"><img alt="Paweł Lesiecki" src="https://blog.allegro.tech/img/authors/pawel.lesiecki.jpg" class="MuiAvatar-img" width="32" height="32"/></div><div class="MuiAvatar-root MuiAvatar-circle MuiAvatarGroup-avatar" style="z-index:1"><img alt="Maciej Suszko" src="https://blog.allegro.tech/img/authors/maciej.suszko.jpg" class="MuiAvatar-img" width="32" height="32"/></div></div><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-line-height_21" href="https://blog.allegro.tech/authors/pawel.lesiecki">Paweł Lesiecki…</a></div><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-line-height_21" href="https://blog.allegro.tech/2024/01/embed-multicolor-icons-using-a-single-DOM-element.html#disqus_thread">0 Comments</a></div><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-margin-top-16 m-display_block m-border-width_1 m-border-color_gray m-border-style-top_solid m-height_40 m-line-height_40 m-text-transform_uppercase m-letter-spacing_2 m-white-space_nowrap m-cursor_pointer m-overflow_hidden m-padding-left_16 m-padding-right_16 m-padding-top_0 m-padding-bottom_0 m-outline-style_dotted--focus m-outline-width_2 m-outline-color_teal m-outline-offset_n2 m-button m-box_border m-text-align_center m-display_inline-block m-color_secondary m-background-position_50p m-background-size_5000p m-transition-property_background-color m-transition-duration_fast m-button--secondary" href="https://blog.allegro.tech/2024/01/embed-multicolor-icons-using-a-single-DOM-element.html">przejdź do wpisu</a></div></article></div><div class="m-grid__col m-grid__col--12 m-grid__col--6@sm m-grid__col--3@xl m-display-flex m-flex-direction_column"><article class="m-margin-bottom_16 m-display-flex m-flex-column m-flex-grow_1"><a href="https://blog.allegro.tech/2023/12/lmdb-postmortem.html" title="Clever, surprised and gray-haired"><img width="388" src="images/blogpost.png" alt="Clever, surprised and gray-haired" class="m-display-block m-width-fluid"/></a><div class="m-padding-top_16 m-padding-top_24_lg m-padding-right_16 m-padding-right_24_lg m-padding-left_16 m-padding-left_24_lg m-card m-display-flex m-flex-column m-flex-grow_1 m-padding-bottom-0 m-color-bg_card"><a href="https://blog.allegro.tech/2023/12/lmdb-postmortem.html" title="Clever, surprised and gray-haired" class="m-text-decoration_none"><h2 class="m-font-family_roboto m-margin-left_0 m-margin-right_0 m-margin-top_0 m-color_text m-font-weight_500 m-line-height_130 m-margin-bottom_8 m-margin-bottom_16_sm m-font-size_21 m-font-size_25_sm" style="text-overflow:ellipsis;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;min-height:2em;overflow:hidden">Clever, surprised and gray-haired</h2></a><time class="m-font-family_sans m-line-height_21 m-font-size_14 m-text-size-adjust_100p m-margin-top_0 m-margin-right_0 m-margin-bottom_0 m-margin-left_0 m-color_text m-padding-bottom-16">2 miesiące temu</time><ul class="m-font-family_sans m-font-size_14 m-line-height_21 m-color_text m-text-size-adjust_100p m-list-style-type_none m-margin-top_0 m-margin-right_0 m-margin-bottom_0 m-margin-left_0 m-padding-top_0 m-padding-right_0 m-padding-bottom_0 m-padding-left_0"><li class="m-margin-right-8 m-display-inline-block"><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-line-height_21" href="https://twitter.com/hashtag/tech">#<!-- -->tech</a></li><li class="m-margin-right-8 m-display-inline-block"><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-line-height_21" href="https://twitter.com/hashtag/postmortem">#<!-- -->postmortem</a></li><li class="m-margin-right-8 m-display-inline-block"><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-line-height_21" href="https://twitter.com/hashtag/nginx">#<!-- -->nginx</a></li><li class="m-margin-right-8 m-display-inline-block"><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-line-height_21" href="https://twitter.com/hashtag/libmodsecurity">#<!-- -->libmodsecurity</a></li><li class="m-margin-right-8 m-display-inline-block"><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-line-height_21" href="https://twitter.com/hashtag/LMDB">#<!-- -->LMDB</a></li><li class="m-margin-right-8 m-display-inline-block"><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-line-height_21" href="https://twitter.com/hashtag/performance bottleneck">#<!-- -->performance bottleneck</a></li><li class="m-margin-right-8 m-display-inline-block"><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-line-height_21" href="https://twitter.com/hashtag/open source">#<!-- -->open source</a></li><li class="m-margin-right-8 m-display-inline-block"><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-line-height_21" href="https://twitter.com/hashtag/debugging">#<!-- -->debugging</a></li><li class="m-margin-right-8 m-display-inline-block"><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-line-height_21" href="https://twitter.com/hashtag/profiling">#<!-- -->profiling</a></li></ul><p class="m-font-family_sans m-line-height_21 m-font-size_14 m-text-size-adjust_100p m-margin-top_0 m-margin-right_0 m-margin-bottom_0 m-margin-left_0 m-color_text m-flex-grow-1 m-padding-top-16">This article is a form of a public postmortem in which we would like to share our bumpy way of revealing the cause of a…</p><div class="m-display-flex m-flex-justify-between m-padding-top-16 m-flex-items_center"><div class="m-display-flex m-flex-items_center"><div class="MuiAvatarGroup-root m-padding-right_16 Post_avatars__FHMgb"><div class="MuiAvatar-root MuiAvatar-circle MuiAvatarGroup-avatar" style="z-index:1"><img alt="Tomasz Ziółkowski" src="https://blog.allegro.tech/img/authors/tomasz.ziolkowski.jpg" class="MuiAvatar-img" width="32" height="32"/></div></div><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-line-height_21" href="https://blog.allegro.tech/authors/tomasz.ziolkowski">Tomasz Ziółkowski</a></div><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-line-height_21" href="https://blog.allegro.tech/2023/12/lmdb-postmortem.html#disqus_thread">0 Comments</a></div><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-margin-top-16 m-display_block m-border-width_1 m-border-color_gray m-border-style-top_solid m-height_40 m-line-height_40 m-text-transform_uppercase m-letter-spacing_2 m-white-space_nowrap m-cursor_pointer m-overflow_hidden m-padding-left_16 m-padding-right_16 m-padding-top_0 m-padding-bottom_0 m-outline-style_dotted--focus m-outline-width_2 m-outline-color_teal m-outline-offset_n2 m-button m-box_border m-text-align_center m-display_inline-block m-color_secondary m-background-position_50p m-background-size_5000p m-transition-property_background-color m-transition-duration_fast m-button--secondary" href="https://blog.allegro.tech/2023/12/lmdb-postmortem.html">przejdź do wpisu</a></div></article></div></div><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-display_block m-margin-bottom_8 m-width_100 m-height_40 m-line-height_40 m-text-transform_uppercase m-letter-spacing_2 m-white-space_nowrap m-cursor_pointer m-overflow_hidden m-padding-left_16 m-padding-right_16 m-padding-top_0 m-padding-bottom_0 m-outline-style_dotted--focus m-outline-width_2 m-outline-color_teal m-outline-offset_n2 m-button m-box_border m-text-align_center m-display_inline-block m-color_secondary m-background-position_50p m-background-size_5000p m-transition-property_background-color m-transition-duration_fast m-button--secondary" href="https://blog.allegro.tech">Zobacz więcej wpisów</a></div><div class="m-width-max_1600 m-margin-left_auto m-margin-right_auto m-padding-top-24"><h2 class="m-font-family_roboto m-margin-left_0 m-margin-right_0 m-margin-top_0 m-color_text m-font-weight_300 m-font-size_27 m-font-size_36_sm m-margin-bottom_16 m-margin-bottom_24_sm m-line-height_125 m-padding-left-24 m-padding-right-24">Podcasty</h2><div class="m-display_flex m-flex-wrap_1 m-flex-grow_1 m-grid"><div class="m-grid__col m-grid__col--12 m-grid__col--6@sm m-grid__col--3@xl m-display-flex m-flex-direction_column"><article class="m-margin-bottom_16 m-display-flex m-flex-column m-flex-grow_1"><a href="https://podcast.allegro.tech/programowanie-co-liczy-sie-w-nim-najbardziej/" title="Programowanie - co liczy się w nim najbardziej?"><img src="images/podcast.png" alt="Programowanie - co liczy się w nim najbardziej?" class="m-display-block m-width-fluid"/></a><div class="m-padding-top_16 m-padding-top_24_lg m-padding-right_16 m-padding-right_24_lg m-padding-left_16 m-padding-left_24_lg m-card m-display-flex m-flex-column m-flex-grow_1 m-padding-bottom-0 m-color-bg_card"><a href="https://podcast.allegro.tech/programowanie-co-liczy-sie-w-nim-najbardziej/" title="Programowanie - co liczy się w nim najbardziej?" class="m-text-decoration_none"><h2 class="m-font-family_roboto m-margin-left_0 m-margin-right_0 m-margin-top_0 m-color_text m-font-weight_500 m-line-height_130 m-margin-bottom_8 m-margin-bottom_16_sm m-font-size_21 m-font-size_25_sm" style="text-overflow:ellipsis;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;min-height:2em;overflow:hidden">Programowanie - co liczy się w nim najbardziej?</h2></a><time class="m-font-family_sans m-line-height_21 m-font-size_14 m-text-size-adjust_100p m-margin-top_0 m-margin-right_0 m-margin-bottom_0 m-margin-left_0 m-color_text m-padding-bottom-16">11 dni temu</time><p class="m-font-family_sans m-line-height_21 m-font-size_14 m-text-size-adjust_100p m-margin-top_0 m-margin-right_0 m-margin-bottom_0 m-margin-left_0 m-color_text m-flex-grow-1">Jaką ścieżkę trzeba przejść, aby dobrze programować? Gdzie zdobywać wiedzę, doświadczenie i szlifować swoje umiejętności? Ile czasu potrzeba aby nabrać doświadczenia i jak zadbać o swój dalszy rozwój? Na czym w praktyce polegają role (Senior) Software Engineer oraz Engineering Manager w Allegro i kto najlepiej sprawdza się w naszych zespołach? Posłuchajcie nowego odcinka Allegro Tech Podcast z udziałem Rafała Schmidta (Senior Software Engineer) i Waldemara Panasa (Manager, Engineering) z Allegro.</p><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-margin-top-16 m-display_block m-border-width_1 m-border-color_gray m-border-style-top_solid m-height_40 m-line-height_40 m-text-transform_uppercase m-letter-spacing_2 m-white-space_nowrap m-cursor_pointer m-overflow_hidden m-padding-left_16 m-padding-right_16 m-padding-top_0 m-padding-bottom_0 m-outline-style_dotted--focus m-outline-width_2 m-outline-color_teal m-outline-offset_n2 m-button m-box_border m-text-align_center m-display_inline-block m-color_secondary m-background-position_50p m-background-size_5000p m-transition-property_background-color m-transition-duration_fast m-button--secondary" href="https://podcast.allegro.tech/programowanie-co-liczy-sie-w-nim-najbardziej/">Posłuchaj odcinka</a></div></article></div><div class="m-grid__col m-grid__col--12 m-grid__col--6@sm m-grid__col--3@xl m-display-flex m-flex-direction_column"><article class="m-margin-bottom_16 m-display-flex m-flex-column m-flex-grow_1"><a href="https://podcast.allegro.tech/mbox-server-driven-ui-dla-aplikacji-mobilnych/" title="MBox: server-driven UI dla aplikacji mobilnych"><img src="images/podcast.png" alt="MBox: server-driven UI dla aplikacji mobilnych" class="m-display-block m-width-fluid"/></a><div class="m-padding-top_16 m-padding-top_24_lg m-padding-right_16 m-padding-right_24_lg m-padding-left_16 m-padding-left_24_lg m-card m-display-flex m-flex-column m-flex-grow_1 m-padding-bottom-0 m-color-bg_card"><a href="https://podcast.allegro.tech/mbox-server-driven-ui-dla-aplikacji-mobilnych/" title="MBox: server-driven UI dla aplikacji mobilnych" class="m-text-decoration_none"><h2 class="m-font-family_roboto m-margin-left_0 m-margin-right_0 m-margin-top_0 m-color_text m-font-weight_500 m-line-height_130 m-margin-bottom_8 m-margin-bottom_16_sm m-font-size_21 m-font-size_25_sm" style="text-overflow:ellipsis;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;min-height:2em;overflow:hidden">MBox: server-driven UI dla aplikacji mobilnych</h2></a><time class="m-font-family_sans m-line-height_21 m-font-size_14 m-text-size-adjust_100p m-margin-top_0 m-margin-right_0 m-margin-bottom_0 m-margin-left_0 m-color_text m-padding-bottom-16">3 miesiące temu</time><p class="m-font-family_sans m-line-height_21 m-font-size_14 m-text-size-adjust_100p m-margin-top_0 m-margin-right_0 m-margin-bottom_0 m-margin-left_0 m-color_text m-flex-grow-1">Czym jest i jak powstał MBox: wewnętrzna platforma server-driven UI dla aplikacji mobilnych w Allegro? Skąd wziął się pomysł na to rozwiązanie i na jakie bolączki odpowiada? Dlaczego zdecydowaliśmy się na budowanie tego typu rozwiązania in-house i z jakimi wyzwaniami mierzyliśmy się w procesie tworzenia? Co wyróżnia zespoły pracujące nad tym narzędziem i jak pracuje im się bez Product Ownera? Posłuchajcie siódmego odcinka Allegro Tech Podcast z udziałem Pauliny Sadowskiej i Tomasza Gębarowskiego - Managerów w obszarze Technical Platform Services w Allegro.</p><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-margin-top-16 m-display_block m-border-width_1 m-border-color_gray m-border-style-top_solid m-height_40 m-line-height_40 m-text-transform_uppercase m-letter-spacing_2 m-white-space_nowrap m-cursor_pointer m-overflow_hidden m-padding-left_16 m-padding-right_16 m-padding-top_0 m-padding-bottom_0 m-outline-style_dotted--focus m-outline-width_2 m-outline-color_teal m-outline-offset_n2 m-button m-box_border m-text-align_center m-display_inline-block m-color_secondary m-background-position_50p m-background-size_5000p m-transition-property_background-color m-transition-duration_fast m-button--secondary" href="https://podcast.allegro.tech/mbox-server-driven-ui-dla-aplikacji-mobilnych/">Posłuchaj odcinka</a></div></article></div><div class="m-grid__col m-grid__col--12 m-grid__col--6@sm m-grid__col--3@xl m-display-flex m-flex-direction_column"><article class="m-margin-bottom_16 m-display-flex m-flex-column m-flex-grow_1"><a href="https://podcast.allegro.tech/o-chatbotach-i-ich-wplywie-na-allegro/" title="O chatbotach i ich wpływie na Allegro"><img src="images/podcast.png" alt="O chatbotach i ich wpływie na Allegro" class="m-display-block m-width-fluid"/></a><div class="m-padding-top_16 m-padding-top_24_lg m-padding-right_16 m-padding-right_24_lg m-padding-left_16 m-padding-left_24_lg m-card m-display-flex m-flex-column m-flex-grow_1 m-padding-bottom-0 m-color-bg_card"><a href="https://podcast.allegro.tech/o-chatbotach-i-ich-wplywie-na-allegro/" title="O chatbotach i ich wpływie na Allegro" class="m-text-decoration_none"><h2 class="m-font-family_roboto m-margin-left_0 m-margin-right_0 m-margin-top_0 m-color_text m-font-weight_500 m-line-height_130 m-margin-bottom_8 m-margin-bottom_16_sm m-font-size_21 m-font-size_25_sm" style="text-overflow:ellipsis;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;min-height:2em;overflow:hidden">O chatbotach i ich wpływie na Allegro</h2></a><time class="m-font-family_sans m-line-height_21 m-font-size_14 m-text-size-adjust_100p m-margin-top_0 m-margin-right_0 m-margin-bottom_0 m-margin-left_0 m-color_text m-padding-bottom-16">4 miesiące temu</time><p class="m-font-family_sans m-line-height_21 m-font-size_14 m-text-size-adjust_100p m-margin-top_0 m-margin-right_0 m-margin-bottom_0 m-margin-left_0 m-color_text m-flex-grow-1">Jakie procesy automatyzujemy w Allegro i co warto o nich wiedzieć w kontekście obszaru Customer Experience? W czym pomagają nam chatboty, jak je rozwijamy i dbamy o ich jakość? Kim są Allina oraz Albert i co mają wspólnego z automatyzacją? Za jakie rozwiązania otrzymaliśmy nagrodę hiperautomatyzacji? O tym wszystkim posłuchacie w odcinku z udziałem Rafała Gajewskiego - Managera w obszarze IT Services w Allegro.</p><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-margin-top-16 m-display_block m-border-width_1 m-border-color_gray m-border-style-top_solid m-height_40 m-line-height_40 m-text-transform_uppercase m-letter-spacing_2 m-white-space_nowrap m-cursor_pointer m-overflow_hidden m-padding-left_16 m-padding-right_16 m-padding-top_0 m-padding-bottom_0 m-outline-style_dotted--focus m-outline-width_2 m-outline-color_teal m-outline-offset_n2 m-button m-box_border m-text-align_center m-display_inline-block m-color_secondary m-background-position_50p m-background-size_5000p m-transition-property_background-color m-transition-duration_fast m-button--secondary" href="https://podcast.allegro.tech/o-chatbotach-i-ich-wplywie-na-allegro/">Posłuchaj odcinka</a></div></article></div><div class="m-grid__col m-grid__col--12 m-grid__col--6@sm m-grid__col--3@xl m-display-flex m-flex-direction_column"><article class="m-margin-bottom_16 m-display-flex m-flex-column m-flex-grow_1"><a href="https://podcast.allegro.tech/o-roli-analitykow-biznesowych-w-allegro/" title="O roli analityków biznesowych w Allegro"><img src="images/podcast.png" alt="O roli analityków biznesowych w Allegro" class="m-display-block m-width-fluid"/></a><div class="m-padding-top_16 m-padding-top_24_lg m-padding-right_16 m-padding-right_24_lg m-padding-left_16 m-padding-left_24_lg m-card m-display-flex m-flex-column m-flex-grow_1 m-padding-bottom-0 m-color-bg_card"><a href="https://podcast.allegro.tech/o-roli-analitykow-biznesowych-w-allegro/" title="O roli analityków biznesowych w Allegro" class="m-text-decoration_none"><h2 class="m-font-family_roboto m-margin-left_0 m-margin-right_0 m-margin-top_0 m-color_text m-font-weight_500 m-line-height_130 m-margin-bottom_8 m-margin-bottom_16_sm m-font-size_21 m-font-size_25_sm" style="text-overflow:ellipsis;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;min-height:2em;overflow:hidden">O roli analityków biznesowych w Allegro</h2></a><time class="m-font-family_sans m-line-height_21 m-font-size_14 m-text-size-adjust_100p m-margin-top_0 m-margin-right_0 m-margin-bottom_0 m-margin-left_0 m-color_text m-padding-bottom-16">6 miesięcy temu</time><p class="m-font-family_sans m-line-height_21 m-font-size_14 m-text-size-adjust_100p m-margin-top_0 m-margin-right_0 m-margin-bottom_0 m-margin-left_0 m-color_text m-flex-grow-1">Czym zajmują się analitycy danych w Allegro i za jakie projekty odpowiadają? Z jakich rodzajów danych i narzędzi korzystają w codziennej pracy? Jakie (przykładowe) obszary tematyczne pokrywamy danymi, które analizujemy w Allegro? Jakich umiejętności szukamy u analityków biznesowych w Allegro i jak można do nas dołączyć? O roli analityków biznesowych i pracy w skali Allegro opowiadają Jakub Król i Mateusz Falkowski - Senior Data Analysts w Allegro.</p><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-margin-top-16 m-display_block m-border-width_1 m-border-color_gray m-border-style-top_solid m-height_40 m-line-height_40 m-text-transform_uppercase m-letter-spacing_2 m-white-space_nowrap m-cursor_pointer m-overflow_hidden m-padding-left_16 m-padding-right_16 m-padding-top_0 m-padding-bottom_0 m-outline-style_dotted--focus m-outline-width_2 m-outline-color_teal m-outline-offset_n2 m-button m-box_border m-text-align_center m-display_inline-block m-color_secondary m-background-position_50p m-background-size_5000p m-transition-property_background-color m-transition-duration_fast m-button--secondary" href="https://podcast.allegro.tech/o-roli-analitykow-biznesowych-w-allegro/">Posłuchaj odcinka</a></div></article></div></div><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-display_block m-margin-bottom_8 m-width_100 m-height_40 m-line-height_40 m-text-transform_uppercase m-letter-spacing_2 m-white-space_nowrap m-cursor_pointer m-overflow_hidden m-padding-left_16 m-padding-right_16 m-padding-top_0 m-padding-bottom_0 m-outline-style_dotted--focus m-outline-width_2 m-outline-color_teal m-outline-offset_n2 m-button m-box_border m-text-align_center m-display_inline-block m-color_secondary m-background-position_50p m-background-size_5000p m-transition-property_background-color m-transition-duration_fast m-button--secondary" href="https://podcast.allegro.tech">Zobacz więcej podcastów</a></div><div class="m-width-max_1600 m-margin-left_auto m-margin-right_auto m-padding-top-24"><h2 class="m-font-family_roboto m-margin-left_0 m-margin-right_0 m-margin-top_0 m-color_text m-font-weight_300 m-font-size_27 m-font-size_36_sm m-margin-bottom_16 m-margin-bottom_24_sm m-line-height_125 m-padding-left-24 m-padding-right-24">Wydarzenia</h2><div class="m-display_flex m-flex-wrap_1 m-flex-grow_1 m-grid"><div class="m-grid__col m-grid__col--12 m-grid__col--6@sm m-grid__col--6@xl m-display-flex m-flex-direction_column"><div class="m-margin-bottom_16 m-display-flex m-flex-direction_column m-flex-direction_row_sm m-padding-bottom_0"><a href="https://www.meetup.com/allegrotech/events/298027809/" title="UX Research Confetti - IV edycja" class="m-display_none m-display_block_lg" style="background-color:#fd4a02"><img width="218" src="images/event.png" alt="UX Research Confetti - IV edycja"/></a><article class="m-padding-top_16 m-padding-top_24_lg m-padding-right_16 m-padding-right_24_lg m-padding-left_16 m-padding-left_24_lg m-card m-display-flex m-flex-direction_column m-padding-bottom_0 m-flex_1 m-flex-justify_between m-color-bg_card"><a href="https://www.meetup.com/allegrotech/events/298027809/" title="UX Research Confetti - IV edycja" class="m-text-decoration_none"><h2 class="m-font-family_roboto m-margin-left_0 m-margin-right_0 m-margin-top_0 m-color_text m-font-weight_500 m-line-height_130 m-margin-bottom_8 m-margin-bottom_16_sm m-font-size_21 m-font-size_25_sm" style="text-overflow:ellipsis;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;min-height:2em;overflow:hidden">UX Research Confetti - IV edycja</h2></a><time class="m-font-family_sans m-line-height_21 m-font-size_14 m-text-size-adjust_100p m-margin-top_0 m-margin-right_0 m-margin-bottom_0 m-margin-left_0 m-color_text">za 3 miesiące<!-- -->, Allegro Warsaw Office</time><time class="m-font-family_sans m-line-height_21 m-font-size_14 m-text-size-adjust_100p m-margin-top_0 m-margin-right_0 m-margin-bottom_0 m-margin-left_0 m-color_text m-padding-top-8">**🎉 Przedstawiamy 4. edycję UX Research Confetti - bezpłatną, polską konferencję poświęconą badaniom UX, organizowaną przez zespół badaczy z Allegro.** ✨ Konferencja odbędzie się w…</time><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-margin-top-16 m-display_block m-border-width_1 m-border-color_gray m-border-style-top_solid m-height_40 m-line-height_40 m-text-transform_uppercase m-letter-spacing_2 m-white-space_nowrap m-cursor_pointer m-overflow_hidden m-padding-left_16 m-padding-right_16 m-padding-top_0 m-padding-bottom_0 m-outline-style_dotted--focus m-outline-width_2 m-outline-color_teal m-outline-offset_n2 m-button m-box_border m-text-align_center m-display_inline-block m-color_secondary m-background-position_50p m-background-size_5000p m-transition-property_background-color m-transition-duration_fast m-button--secondary" href="https://www.meetup.com/allegrotech/events/298027809/">Szczegóły</a></article></div></div><div class="m-grid__col m-grid__col--12 m-grid__col--6@sm m-grid__col--6@xl m-display-flex m-flex-direction_column"><div class="m-margin-bottom_16 m-display-flex m-flex-direction_column m-flex-direction_row_sm m-padding-bottom_0"><a href="https://www.meetup.com/allegrotech/events/297614064/" title="Allegro Tech Talks #40 - Testy: dynamiczne dashboardy &amp; optymalizacja pracy" class="m-display_none m-display_block_lg" style="background-color:#fd4a02"><img width="218" src="images/event.png" alt="Allegro Tech Talks #40 - Testy: dynamiczne dashboardy &amp; optymalizacja pracy"/></a><article class="m-padding-top_16 m-padding-top_24_lg m-padding-right_16 m-padding-right_24_lg m-padding-left_16 m-padding-left_24_lg m-card m-display-flex m-flex-direction_column m-padding-bottom_0 m-flex_1 m-flex-justify_between m-color-bg_card"><a href="https://www.meetup.com/allegrotech/events/297614064/" title="Allegro Tech Talks #40 - Testy: dynamiczne dashboardy &amp; optymalizacja pracy" class="m-text-decoration_none"><h2 class="m-font-family_roboto m-margin-left_0 m-margin-right_0 m-margin-top_0 m-color_text m-font-weight_500 m-line-height_130 m-margin-bottom_8 m-margin-bottom_16_sm m-font-size_21 m-font-size_25_sm" style="text-overflow:ellipsis;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;min-height:2em;overflow:hidden">Allegro Tech Talks #40 - Testy: dynamiczne dashboardy &amp; optymalizacja pracy</h2></a><time class="m-font-family_sans m-line-height_21 m-font-size_14 m-text-size-adjust_100p m-margin-top_0 m-margin-right_0 m-margin-bottom_0 m-margin-left_0 m-color_text">2 miesiące temu<!-- -->, Allegro Kraków Office</time><time class="m-font-family_sans m-line-height_21 m-font-size_14 m-text-size-adjust_100p m-margin-top_0 m-margin-right_0 m-margin-bottom_0 m-margin-left_0 m-color_text m-padding-top-8">**➡ Rejestracja:** [https://app.evenea.pl/event/allegro-tech-talk-40/](https://app.evenea.pl/event/allegro-tech-talk-40/) Jeszcze przed świętami zapraszamy Was na #40 wydarzenie z serii Allegro Tech Talk, podczas których dzielimy się wiedzą, wzajemnie inspirujemy oraz integrujemy…</time><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-margin-top-16 m-display_block m-border-width_1 m-border-color_gray m-border-style-top_solid m-height_40 m-line-height_40 m-text-transform_uppercase m-letter-spacing_2 m-white-space_nowrap m-cursor_pointer m-overflow_hidden m-padding-left_16 m-padding-right_16 m-padding-top_0 m-padding-bottom_0 m-outline-style_dotted--focus m-outline-width_2 m-outline-color_teal m-outline-offset_n2 m-button m-box_border m-text-align_center m-display_inline-block m-color_secondary m-background-position_50p m-background-size_5000p m-transition-property_background-color m-transition-duration_fast m-button--secondary" href="https://www.meetup.com/allegrotech/events/297614064/">Szczegóły</a></article></div></div><div class="m-grid__col m-grid__col--12 m-grid__col--6@sm m-grid__col--6@xl m-display-flex m-flex-direction_column"><div class="m-margin-bottom_16 m-display-flex m-flex-direction_column m-flex-direction_row_sm m-padding-bottom_0"><a href="https://www.meetup.com/allegrotech/events/297480100/" title="Allegro Tech Talks #39 - Big Data: o podejściu do pracy z danymi" class="m-display_none m-display_block_lg" style="background-color:#fd4a02"><img width="218" src="images/event.png" alt="Allegro Tech Talks #39 - Big Data: o podejściu do pracy z danymi"/></a><article class="m-padding-top_16 m-padding-top_24_lg m-padding-right_16 m-padding-right_24_lg m-padding-left_16 m-padding-left_24_lg m-card m-display-flex m-flex-direction_column m-padding-bottom_0 m-flex_1 m-flex-justify_between m-color-bg_card"><a href="https://www.meetup.com/allegrotech/events/297480100/" title="Allegro Tech Talks #39 - Big Data: o podejściu do pracy z danymi" class="m-text-decoration_none"><h2 class="m-font-family_roboto m-margin-left_0 m-margin-right_0 m-margin-top_0 m-color_text m-font-weight_500 m-line-height_130 m-margin-bottom_8 m-margin-bottom_16_sm m-font-size_21 m-font-size_25_sm" style="text-overflow:ellipsis;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;min-height:2em;overflow:hidden">Allegro Tech Talks #39 - Big Data: o podejściu do pracy z danymi</h2></a><time class="m-font-family_sans m-line-height_21 m-font-size_14 m-text-size-adjust_100p m-margin-top_0 m-margin-right_0 m-margin-bottom_0 m-margin-left_0 m-color_text">2 miesiące temu<!-- -->, Allegro Warsaw Office</time><time class="m-font-family_sans m-line-height_21 m-font-size_14 m-text-size-adjust_100p m-margin-top_0 m-margin-right_0 m-margin-bottom_0 m-margin-left_0 m-color_text m-padding-top-8">**Rejestracja: [https://app.evenea.pl/event/allegro-tech-talk-39/](https://app.evenea.pl/event/allegro-tech-talk-39/)** Bądźcie z nami podczas #39 wydarzenia z serii **Allegro Tech Talk**, podczas których dzielimy się wiedzą, wzajemnie inspirujemy oraz integrujemy podczas rozmów przy…</time><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-margin-top-16 m-display_block m-border-width_1 m-border-color_gray m-border-style-top_solid m-height_40 m-line-height_40 m-text-transform_uppercase m-letter-spacing_2 m-white-space_nowrap m-cursor_pointer m-overflow_hidden m-padding-left_16 m-padding-right_16 m-padding-top_0 m-padding-bottom_0 m-outline-style_dotted--focus m-outline-width_2 m-outline-color_teal m-outline-offset_n2 m-button m-box_border m-text-align_center m-display_inline-block m-color_secondary m-background-position_50p m-background-size_5000p m-transition-property_background-color m-transition-duration_fast m-button--secondary" href="https://www.meetup.com/allegrotech/events/297480100/">Szczegóły</a></article></div></div><div class="m-grid__col m-grid__col--12 m-grid__col--6@sm m-grid__col--6@xl m-display-flex m-flex-direction_column"><div class="m-margin-bottom_16 m-display-flex m-flex-direction_column m-flex-direction_row_sm m-padding-bottom_0"><a href="https://www.meetup.com/allegrotech/events/293929321/" title="Allegro Tech Talks #38 - Mobile: o iOS bez spinki" class="m-display_none m-display_block_lg" style="background-color:#fd4a02"><img width="218" src="images/event.png" alt="Allegro Tech Talks #38 - Mobile: o iOS bez spinki"/></a><article class="m-padding-top_16 m-padding-top_24_lg m-padding-right_16 m-padding-right_24_lg m-padding-left_16 m-padding-left_24_lg m-card m-display-flex m-flex-direction_column m-padding-bottom_0 m-flex_1 m-flex-justify_between m-color-bg_card"><a href="https://www.meetup.com/allegrotech/events/293929321/" title="Allegro Tech Talks #38 - Mobile: o iOS bez spinki" class="m-text-decoration_none"><h2 class="m-font-family_roboto m-margin-left_0 m-margin-right_0 m-margin-top_0 m-color_text m-font-weight_500 m-line-height_130 m-margin-bottom_8 m-margin-bottom_16_sm m-font-size_21 m-font-size_25_sm" style="text-overflow:ellipsis;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;min-height:2em;overflow:hidden">Allegro Tech Talks #38 - Mobile: o iOS bez spinki</h2></a><time class="m-font-family_sans m-line-height_21 m-font-size_14 m-text-size-adjust_100p m-margin-top_0 m-margin-right_0 m-margin-bottom_0 m-margin-left_0 m-color_text">8 miesięcy temu<!-- -->, Allegro Warsaw Office</time><time class="m-font-family_sans m-line-height_21 m-font-size_14 m-text-size-adjust_100p m-margin-top_0 m-margin-right_0 m-margin-bottom_0 m-margin-left_0 m-color_text m-padding-top-8">**➡ Rejestracja:** [https://app.evenea.pl/event/allegro-tech-talk-38/](https://app.evenea.pl/event/allegro-tech-talk-38/) Ostatnie przed przerwą wakacyjną, stacjonarne spotkanie z cyklu Allegro Tech Talks, na których dzielimy się wiedzą, wzajemnie inspirujemy oraz integrujemy podczas rozmów…</time><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-margin-top-16 m-display_block m-border-width_1 m-border-color_gray m-border-style-top_solid m-height_40 m-line-height_40 m-text-transform_uppercase m-letter-spacing_2 m-white-space_nowrap m-cursor_pointer m-overflow_hidden m-padding-left_16 m-padding-right_16 m-padding-top_0 m-padding-bottom_0 m-outline-style_dotted--focus m-outline-width_2 m-outline-color_teal m-outline-offset_n2 m-button m-box_border m-text-align_center m-display_inline-block m-color_secondary m-background-position_50p m-background-size_5000p m-transition-property_background-color m-transition-duration_fast m-button--secondary" href="https://www.meetup.com/allegrotech/events/293929321/">Szczegóły</a></article></div></div></div><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-display_block m-margin-bottom_8 m-width_100 m-height_40 m-line-height_40 m-text-transform_uppercase m-letter-spacing_2 m-white-space_nowrap m-cursor_pointer m-overflow_hidden m-padding-left_16 m-padding-right_16 m-padding-top_0 m-padding-bottom_0 m-outline-style_dotted--focus m-outline-width_2 m-outline-color_teal m-outline-offset_n2 m-button m-box_border m-text-align_center m-display_inline-block m-color_secondary m-background-position_50p m-background-size_5000p m-transition-property_background-color m-transition-duration_fast m-button--secondary" href="https://www.meetup.com/allegrotech/events/">Zobacz więcej wydarzeń</a></div><div class="m-width-max_1600 m-margin-left_auto m-margin-right_auto m-padding-top-24"><h2 class="m-font-family_roboto m-margin-left_0 m-margin-right_0 m-margin-top_0 m-color_text m-font-weight_300 m-font-size_27 m-font-size_36_sm m-margin-bottom_16 m-margin-bottom_24_sm m-line-height_125 m-padding-left-24 m-padding-right-24">Oferty pracy</h2><div class="m-width-max_1600 m-margin-left_auto m-margin-right_auto"><article class="m-padding-top_16 m-padding-top_24_lg m-padding-right_16 m-padding-right_24_lg m-padding-bottom_16 m-padding-bottom_24_lg m-padding-left_16 m-padding-left_24_lg m-card m-margin-bottom_16 m-display-flex m-flex-justify_between m-flex-items-center m-flex-direction_column m-flex-direction_row_md m-color-bg_card"><h2 class="m-font-family_roboto m-margin-left_0 m-margin-right_0 m-margin-top_0 m-color_text m-font-weight_500 m-line-height_130 m-margin-bottom_8 m-margin-bottom_16_sm m-font-size_21 m-font-size_25_sm m-margin-bottom_0_sm m-flex-grow_1">Integration Engineer</h2><p class="m-font-family_sans m-line-height_21 m-font-size_14 m-text-size-adjust_100p m-margin-top_0 m-margin-right_0 m-margin-bottom_0 m-margin-left_0 m-color_text m-margin-right_0 m-margin-bottom_0 m-margin-left_0 m-color_text m-font-size_21 m-font-size_25_sm m-font-weight_300 m-line-height_normal m-margin-top_16 m-text-align_left m-padding-right_16">Warsaw, Poznań</p><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-height_40 m-line-height_40 m-text-transform_uppercase m-letter-spacing_2 m-white-space_nowrap m-cursor_pointer m-overflow_hidden m-padding-left_16 m-padding-right_16 m-padding-top_0 m-padding-bottom_0 m-outline-style_dotted--focus m-outline-width_2 m-outline-color_teal m-outline-offset_n2 m-button m-box_border m-text-align_center m-display_inline-block m-color_secondary m-background-position_50p m-background-size_5000p m-transition-property_background-color m-transition-duration_fast m-button--secondary" href="https://www.smartrecruiters.com/Allegro/743999966382487-integration-engineer?trid=de9dfdf3-7f9e-4ebf-8a64-49f6c69ad640">Sprawdź</a></article><article class="m-padding-top_16 m-padding-top_24_lg m-padding-right_16 m-padding-right_24_lg m-padding-bottom_16 m-padding-bottom_24_lg m-padding-left_16 m-padding-left_24_lg m-card m-margin-bottom_16 m-display-flex m-flex-justify_between m-flex-items-center m-flex-direction_column m-flex-direction_row_md m-color-bg_card"><h2 class="m-font-family_roboto m-margin-left_0 m-margin-right_0 m-margin-top_0 m-color_text m-font-weight_500 m-line-height_130 m-margin-bottom_8 m-margin-bottom_16_sm m-font-size_21 m-font-size_25_sm m-margin-bottom_0_sm m-flex-grow_1">Lider zespołu Pierwszej Linii Wsparcia IT</h2><p class="m-font-family_sans m-line-height_21 m-font-size_14 m-text-size-adjust_100p m-margin-top_0 m-margin-right_0 m-margin-bottom_0 m-margin-left_0 m-color_text m-margin-right_0 m-margin-bottom_0 m-margin-left_0 m-color_text m-font-size_21 m-font-size_25_sm m-font-weight_300 m-line-height_normal m-margin-top_16 m-text-align_left m-padding-right_16">Warsaw</p><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-height_40 m-line-height_40 m-text-transform_uppercase m-letter-spacing_2 m-white-space_nowrap m-cursor_pointer m-overflow_hidden m-padding-left_16 m-padding-right_16 m-padding-top_0 m-padding-bottom_0 m-outline-style_dotted--focus m-outline-width_2 m-outline-color_teal m-outline-offset_n2 m-button m-box_border m-text-align_center m-display_inline-block m-color_secondary m-background-position_50p m-background-size_5000p m-transition-property_background-color m-transition-duration_fast m-button--secondary" href="https://www.smartrecruiters.com/Allegro/743999964663501-lider-zespou-pierwszej-linii-wsparcia-it?trid=de9dfdf3-7f9e-4ebf-8a64-49f6c69ad640">Sprawdź</a></article><article class="m-padding-top_16 m-padding-top_24_lg m-padding-right_16 m-padding-right_24_lg m-padding-bottom_16 m-padding-bottom_24_lg m-padding-left_16 m-padding-left_24_lg m-card m-margin-bottom_16 m-display-flex m-flex-justify_between m-flex-items-center m-flex-direction_column m-flex-direction_row_md m-color-bg_card"><h2 class="m-font-family_roboto m-margin-left_0 m-margin-right_0 m-margin-top_0 m-color_text m-font-weight_500 m-line-height_130 m-margin-bottom_8 m-margin-bottom_16_sm m-font-size_21 m-font-size_25_sm m-margin-bottom_0_sm m-flex-grow_1">Senior Big Data Engineer (Scala) - Data &amp; AI</h2><p class="m-font-family_sans m-line-height_21 m-font-size_14 m-text-size-adjust_100p m-margin-top_0 m-margin-right_0 m-margin-bottom_0 m-margin-left_0 m-color_text m-margin-right_0 m-margin-bottom_0 m-margin-left_0 m-color_text m-font-size_21 m-font-size_25_sm m-font-weight_300 m-line-height_normal m-margin-top_16 m-text-align_left m-padding-right_16">Warsaw</p><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-height_40 m-line-height_40 m-text-transform_uppercase m-letter-spacing_2 m-white-space_nowrap m-cursor_pointer m-overflow_hidden m-padding-left_16 m-padding-right_16 m-padding-top_0 m-padding-bottom_0 m-outline-style_dotted--focus m-outline-width_2 m-outline-color_teal m-outline-offset_n2 m-button m-box_border m-text-align_center m-display_inline-block m-color_secondary m-background-position_50p m-background-size_5000p m-transition-property_background-color m-transition-duration_fast m-button--secondary" href="https://www.smartrecruiters.com/Allegro/743999963121453-senior-big-data-engineer-scala-data-ai?trid=de9dfdf3-7f9e-4ebf-8a64-49f6c69ad640">Sprawdź</a></article><article class="m-padding-top_16 m-padding-top_24_lg m-padding-right_16 m-padding-right_24_lg m-padding-bottom_16 m-padding-bottom_24_lg m-padding-left_16 m-padding-left_24_lg m-card m-margin-bottom_16 m-display-flex m-flex-justify_between m-flex-items-center m-flex-direction_column m-flex-direction_row_md m-color-bg_card"><h2 class="m-font-family_roboto m-margin-left_0 m-margin-right_0 m-margin-top_0 m-color_text m-font-weight_500 m-line-height_130 m-margin-bottom_8 m-margin-bottom_16_sm m-font-size_21 m-font-size_25_sm m-margin-bottom_0_sm m-flex-grow_1">Senior Big Data Engineer (Scala/Python) - Data&amp;AI</h2><p class="m-font-family_sans m-line-height_21 m-font-size_14 m-text-size-adjust_100p m-margin-top_0 m-margin-right_0 m-margin-bottom_0 m-margin-left_0 m-color_text m-margin-right_0 m-margin-bottom_0 m-margin-left_0 m-color_text m-font-size_21 m-font-size_25_sm m-font-weight_300 m-line-height_normal m-margin-top_16 m-text-align_left m-padding-right_16">Warsaw, Poznań</p><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-height_40 m-line-height_40 m-text-transform_uppercase m-letter-spacing_2 m-white-space_nowrap m-cursor_pointer m-overflow_hidden m-padding-left_16 m-padding-right_16 m-padding-top_0 m-padding-bottom_0 m-outline-style_dotted--focus m-outline-width_2 m-outline-color_teal m-outline-offset_n2 m-button m-box_border m-text-align_center m-display_inline-block m-color_secondary m-background-position_50p m-background-size_5000p m-transition-property_background-color m-transition-duration_fast m-button--secondary" href="https://www.smartrecruiters.com/Allegro/743999963120633-senior-big-data-engineer-scalapython-dataai?trid=de9dfdf3-7f9e-4ebf-8a64-49f6c69ad640">Sprawdź</a></article><article class="m-padding-top_16 m-padding-top_24_lg m-padding-right_16 m-padding-right_24_lg m-padding-bottom_16 m-padding-bottom_24_lg m-padding-left_16 m-padding-left_24_lg m-card m-margin-bottom_16 m-display-flex m-flex-justify_between m-flex-items-center m-flex-direction_column m-flex-direction_row_md m-color-bg_card"><h2 class="m-font-family_roboto m-margin-left_0 m-margin-right_0 m-margin-top_0 m-color_text m-font-weight_500 m-line-height_130 m-margin-bottom_8 m-margin-bottom_16_sm m-font-size_21 m-font-size_25_sm m-margin-bottom_0_sm m-flex-grow_1">Software Engineer (.NET) - Product Team - Allegro Pay</h2><p class="m-font-family_sans m-line-height_21 m-font-size_14 m-text-size-adjust_100p m-margin-top_0 m-margin-right_0 m-margin-bottom_0 m-margin-left_0 m-color_text m-margin-right_0 m-margin-bottom_0 m-margin-left_0 m-color_text m-font-size_21 m-font-size_25_sm m-font-weight_300 m-line-height_normal m-margin-top_16 m-text-align_left m-padding-right_16">Warsaw</p><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-height_40 m-line-height_40 m-text-transform_uppercase m-letter-spacing_2 m-white-space_nowrap m-cursor_pointer m-overflow_hidden m-padding-left_16 m-padding-right_16 m-padding-top_0 m-padding-bottom_0 m-outline-style_dotted--focus m-outline-width_2 m-outline-color_teal m-outline-offset_n2 m-button m-box_border m-text-align_center m-display_inline-block m-color_secondary m-background-position_50p m-background-size_5000p m-transition-property_background-color m-transition-duration_fast m-button--secondary" href="https://www.smartrecruiters.com/Allegro/743999962882199-software-engineer-net-product-team-allegro-pay?trid=de9dfdf3-7f9e-4ebf-8a64-49f6c69ad640">Sprawdź</a></article></div><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-display_block m-margin-bottom_8 m-width_100 m-height_40 m-line-height_40 m-text-transform_uppercase m-letter-spacing_2 m-white-space_nowrap m-cursor_pointer m-overflow_hidden m-padding-left_16 m-padding-right_16 m-padding-top_0 m-padding-bottom_0 m-outline-style_dotted--focus m-outline-width_2 m-outline-color_teal m-outline-offset_n2 m-button m-box_border m-text-align_center m-display_inline-block m-color_secondary m-background-position_50p m-background-size_5000p m-transition-property_background-color m-transition-duration_fast m-button--secondary" href="https://jobs.allegro.eu">Zobacz więcej ofert</a></div><footer class="m-color-bg_navy m-margin-top-32"><div class="m-width-max_1600 m-margin-left_auto m-margin-right_auto m-padding-top-24 m-padding-bottom-24 m-display-flex@sm m-flex-justify-between m-flex-items-center m-text-align_center"><p class="m-font-family_sans m-line-height_21 m-font-size_14 m-text-size-adjust_100p m-margin-top_0 m-margin-right_0 m-margin-bottom_0 m-margin-left_0 m-color_text m-color_white m-padding-left-24@sm">Proudly built by Allegro Tech engineers</p><ul class="m-font-family_sans m-font-size_14 m-line-height_21 m-color_text m-text-size-adjust_100p m-list-style-type_none m-margin-top_0 m-margin-right_0 m-margin-bottom_0 m-margin-left_0 m-padding-top_0 m-padding-right_0 m-padding-bottom_0 m-padding-left_0 m-display-flex m-flex-justify-center"><li style="filter:brightness(0) invert(1);opacity:0.5" class="m-margin-right-8 m-margin-top-16 m-margin-top-0@sm m-color_white"><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-line-height_21" href="https://github.com/allegro"><img src="https://assets.allegrostatic.com/metrum/icon/github-6a18df1729.svg" alt="Github" class="m-icon"/></a></li><li style="filter:brightness(0) invert(1);opacity:0.5" class="m-margin-right-8 m-margin-top-16 m-margin-top-0@sm m-color_white"><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-line-height_21" href="https://www.facebook.com/allegro.tech/"><img src="https://assets.allegrostatic.com/metrum/icon/facebook-a2b92f9dcb.svg" alt="Facebook" class="m-icon"/></a></li><li style="filter:brightness(0) invert(1);opacity:0.5" class="m-margin-right-8 m-margin-top-16 m-margin-top-0@sm m-color_white"><a class="m-font-size_14 m-font-family_sans m-color_text m-text-decoration_none m-text-size-adjust_100p m-cursor_pointer m-link m-line-height_21" href="https://twitter.com/allegrotech"><img src="https://assets.allegrostatic.com/metrum/icon/twitter-25164a58aa.svg" alt="Twitter" class="m-icon"/></a></li></ul></div></footer><div style="visibility:hidden;height:0;overflow:hidden;position:relative"></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"posts":[{"title":"Don’t bother: it is only a little expired","link":"https://blog.allegro.tech/2024/02/couchbase-expired-docs-tuning.html","pubDate":"Mon, 12 Feb 2024 00:00:00 +0100","authors":{"author":[{"name":["Tomasz Ziółkowski"],"photo":["https://blog.allegro.tech/img/authors/tomasz.ziolkowski.jpg"],"url":["https://blog.allegro.tech/authors/tomasz.ziolkowski"]}]},"content":"\u003cp\u003eThis story shows how we strive to fix issues reported by our customers regarding inconsistent listing views on our e-commerce platform.\nWe will use a top-down manner to guide you through our story. At the beginning, we highlight the challenges faced by our customers, followed by presenting\nbasic information on how views are personalized on our web application. We then delve deeper into our internal architecture, aiming to clarify how\nit supports High Availability (HA) by using two data centers. Finally, we advertise a little \u003cem\u003e\u003ca href=\"https://www.couchbase.com/\"\u003eCouchbase\u003c/a\u003e\u003c/em\u003e,\ndistributed NoSQL database, and explain why it is an excellent storage solution for such an architecture.\u003c/p\u003e\n\n\u003cp\u003eLater, we explain how the absence of adequate tools hindered us from uncovering the root cause of the problem and detail the adjustments we made in Couchbase\nto overcome these challenges. What can you glean from our experience? Firstly, you might be inspired to consider Couchbase as a storage solution in\na multi-regional, active-active architecture. Secondly, you’ll discover a tool that aids in monitoring Couchbase behavior in a multi-region setting.\nThirdly, we share some tips on manipulating settings in Couchbase.\nLastly, you’ll be able to decipher the mysterious title of our story and understand a few technological abbreviations.\u003c/p\u003e\n\n\u003ch2 id=\"what-you-ask-is-not-what-you-get\"\u003eWhat you ask is NOT what you get\u003c/h2\u003e\n\n\u003cp\u003eAn ongoing challenge in the development of the \u003ca href=\"https://allegro.tech/\"\u003eAllegro platform\u003c/a\u003e has been the product catalog.\nOriginating from a C2C platform where offers lacked references to pre-existing products, our shift towards the B2C model brought forth the need to merge\noffers representing the same product. This was essential for enhancing the selection experience for our buyers. The journey to construct such a catalog involved\nvarious approaches, and after numerous iterations, it now functions seamlessly.\nFor the context of this article, a crucial detail is that our platform must support at least two ways of selecting offers:\u003c/p\u003e\n\n\u003col\u003e\n  \u003cli\u003eOffer listing: Each presented entity is a unique offer listed by a particular merchant.\n  \u003cimg src=\"/img/articles/2024-02-12-couchbase-expired-docs-tuning/offers-view.png\" alt=\"offers-listing\" /\u003e\u003c/li\u003e\n  \u003cli\u003eProduct listing: Each presented entity represents a unique product connected to a set of offers where you can make a purchase.\n  \u003cimg src=\"/img/articles/2024-02-12-couchbase-expired-docs-tuning/products-view.png\" alt=\"products-listing\" /\u003e\u003c/li\u003e\n\u003c/ol\u003e\n\n\u003cp\u003eGiven the diverse factors influencing whether a customer prefers selecting offers or products, we’ve deliberately avoided limiting the selection experience.\nIn many cases, customers are free to choose either method, and their preferred choice is remembered to ensure a consistent and personalized experience.\nBoth offer and product listing views feature a switch that allows users to change their personal preference. With each click,\nthe personalized preference is updated, and the current view is refreshed accordingly.\u003c/p\u003e\n\n\u003cp\u003eHowever, our journey took an unexpected turn when we began receiving reports that customers, despite changing their preference, continued to see the same view.\nFor instance, if a customer switched from the offer listing to the product listing, they would still receive the offer listing. The frustration escalated\nas this invalid view persisted, even after manual page refreshes, lasting several times before finally aligning with the customer’s preference after a delay,\nsometimes up to a minute. This discrepancy became the starting point of our investigation.\u003c/p\u003e\n\n\u003ch2 id=\"remedy-for-rendering-views-in-soa---opbox\"\u003eRemedy for rendering views in SOA - Opbox\u003c/h2\u003e\n\n\u003cp\u003eDedicated readers of this blog may already be aware that the Allegro platform embraces a microservices architecture, a powerful strategy for\ndividing domains and responsibilities. However, this approach presents challenges when it comes to offering a unified graphical user interface (GUI) for\nour customers. To bridge this gap, we successfully implemented our internal Content Management System (CMS) platform named Opbox.\nWhile delving into the intricate details of Opbox is beyond the scope of this narrative, those interested in our frontend management can explore\nour \u003ca href=\"/2016/03/Managing-Frontend-in-the-microservices-architecture.html\"\u003eblogpost\u003c/a\u003e or,\nif inclined, listen to our podcast in Polish \u003ca href=\"https://podcast.allegro.tech/od_inzyniera_do_lidera_w_allegro/\"\u003ehere\u003c/a\u003e.\u003c/p\u003e\n\n\u003cp\u003eFor our story, what’s crucial to note is that Opbox plays a pivotal role in fetching information from microservices, particularly about customer preferences.\nIt collaborates with the microservice responsible for storing such data, ensuring the preparation of a personalized view for each user.\u003c/p\u003e\n\n\u003cp\u003eNo detective skills were needed to deduce that the observed issues originated from the microservice responsible for storing customer preferences,\nwhich was serving outdated information.\nThe real question at hand was how to mitigate this challenge.\u003c/p\u003e\n\n\u003cp\u003eCompleting our narrative puzzle involves highlighting the interface familiar to our web application customers,\nwhich operates across two domains with distinct responsibilities:\u003c/p\u003e\n\n\u003cul\u003e\n  \u003cli\u003e\u003cem\u003eallegro.pl\u003c/em\u003e: This domain is responsible for providing the GUI (HTML views), rendered via Opbox.\u003c/li\u003e\n  \u003cli\u003e\u003cem\u003eedge.allegro.pl\u003c/em\u003e: This domain takes charge of direct interactions via \u003cem\u003eAJAX\u003c/em\u003e (Asynchronous JavaScript) with specific microservices.\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eIn simpler terms, the listing view is rendered through the \u003cem\u003eallegro.pl\u003c/em\u003e domain, while the task of switching personal preferences is handled via the\n\u003cem\u003eedge.allegro.pl\u003c/em\u003e domain.\u003c/p\u003e\n\n\u003ch2 id=\"you-cant-handle-this\"\u003eYou can’t HAndle this\u003c/h2\u003e\n\n\u003cp\u003eAs a member of the Technical Platform department, my perspective is likely biased towards High Availability (HA) and everything that enhances\nAllegro’s resilience to the outage of individual components or services. The fundamental principle guiding our HA strategy involves dispersing each\nmicroservice to two different locations, typically different data centers. This approach serves as a robust contingency plan, enabling us to overcome not only\nminor outages but also significant disasters, such as the outage of an entire data center.\u003c/p\u003e\n\n\u003cp\u003eIt’s essential to note that our HA strategy operates on a multi-region active-active approach. In simpler terms, all our data centers or clouds are actively\nhandling traffic simultaneously. While this approach ensures that everything remains operational in each location, it also introduces its own set of challenges.\nBalancing the benefits of simultaneous activity with the complexities it brings is a constant consideration in our pursuit of a resilient\nand fault-tolerant system.\u003c/p\u003e\n\n\u003ch3 id=\"navigating-the-multi-region-challenges\"\u003eNavigating the multi-region challenges\u003c/h3\u003e\n\n\u003cp\u003eHandling traffic in such a manner can undoubtedly impact performance. Each HTTP request from our customers typically involves a set of microservices.\nTo mitigate the challenges of cross-datacenter traffic between these services, we introduced the principle of locality. In simple terms, if an instance of\nmicroservice A needs to communicate with microservice B, we prioritize instances running in the same location or data center.\u003c/p\u003e\n\n\u003cp\u003eHowever, it’s crucial to note that the locality principle faces limitations, especially when it comes to certain storage solutions. For instance,\nmost Relational Database Management Systems (RDBMS) and MongoDB databases only allow writes through a specific node. This means that even if the traffic\nis handled by an instance in \u003cem\u003eDATA CENTER A\u003c/em\u003e, it may still be necessary to query a database node in \u003cem\u003eDATA CENTER B\u003c/em\u003e to write some data.\nThe challenge lies in finding storage solutions that permit simultaneous writing to nodes in the same location. One such example is\nCouchbase clusters with cross-data center replication, offering a solution to the intricacies of our multi-region, active-active architecture.\u003c/p\u003e\n\n\u003ch3 id=\"roots-of-inconsistency\"\u003eRoots of inconsistency\u003c/h3\u003e\n\n\u003cp\u003eAs mentioned earlier, we employ two domains to provide an interface for our customers. In the context of High Availability (HA), this setup implies that\nrendering can be handled by \u003cem\u003eDATA CENTER A\u003c/em\u003e, while \u003cem\u003eAJAX\u003c/em\u003e communication simultaneously takes place in \u003cem\u003eDATA CENTER B\u003c/em\u003e. This dual-domain approach necessitates\na replication mechanism that applies changes made in one data center to the other.\u003c/p\u003e\n\n\u003cp\u003eHowever, a critical challenge arises when the replication mechanism lags behind the Round-Trip Time (RTT) of client requests, as illustrated in\nthe diagram below. The red rectangle in the diagram symbolizes the replication process of a single write operation. If this process takes longer than\nthe back-and-forth exchange of HTTP response and request, the client may receive an invalid view. It’s crucial to note that the second request is directed\nstraight to data center B and is not proxied by \u003cem\u003eDATA CENTER A\u003c/em\u003e.\u003c/p\u003e\n\n\u003cp\u003eMitigating this issue, short of radical architectural changes, becomes a significant concern. The intricacies of replication timing are central to ensuring\na seamless and accurate user experience in our multi-data center, active-active architecture.\u003c/p\u003e\n\n\u003cp\u003e\u003cimg src=\"/img/articles/2024-02-12-couchbase-expired-docs-tuning/replication.png\" alt=\"replication-lag\" /\u003e\u003c/p\u003e\n\n\u003cp\u003eThe replication lag can be influenced by various factors depending on the storage solutions in use. One undeniable factor is that it cannot be faster than\nthe light distance between data centers. Fortunately, in our case, this distance is minimal, and for the purpose of this story, it can be considered negligible.\u003c/p\u003e\n\n\u003ch2 id=\"fortunate-storage\"\u003eFortunate storage\u003c/h2\u003e\n\n\u003cp\u003eAs I mentioned earlier, Couchbase lends itself to adhering to our locality principle in the communication between microservices and databases within\nour architecture. Fortunately, it serves as the storage solution for the microservice responsible for maintaining customers’ preferences. What’s even more\nfortunate is the swift cross-cluster replication mechanism,\n\u003cem\u003e\u003ca href=\"https://docs.couchbase.com/server/current/learn/clusters-and-availability/xdcr-overview.html\"\u003eXDCR\u003c/a\u003e\u003c/em\u003e, employed by Couchbase.\nIn fact, the changes are applied on a cluster in the second data center faster than one Round-Trip Time (RTT) between data centers – pretty cool, isn’t it?\nIt’s noteworthy that \u003cem\u003eXDCR\u003c/em\u003e can be configured in either a unidirectional or bidirectional manner. In our case, given active-active writes in all locations,\nwe use a bidirectional configuration to replicate changes, irrespective of the location in which they were applied.\u003c/p\u003e\n\n\u003ch2 id=\"deeper-analysis-unraveling-the-replication-enigma\"\u003eDeeper analysis: unraveling the replication enigma\u003c/h2\u003e\n\n\u003cp\u003eCouchbase offers an abundance of highly detailed metrics regarding the internal state of the cluster. However, without a deep understanding,\nit becomes challenging to decipher whether irregularities or spikes in these metrics may indicate potential problems for customers. This challenge is\nparticularly pronounced when dealing with cross-cluster replication, where overseeing the state of two clusters simultaneously is a complex task.\u003c/p\u003e\n\n\u003cp\u003eAt Allegro, our commitment to meticulous data collection extends to being detailed in gathering performance metrics from a microservice perspective.\nDespite Couchbase providing meaningful information, the story would be incomplete if it solely relied on easily accessible metrics. In reality, these metrics\nfailed to reveal relevant information; read/write times remained relatively stable even during moments when customers reported issues.\u003c/p\u003e\n\n\u003cp\u003eTo gain a deeper understanding of the situation, our approach was clear—gather more data, with a specific focus on replication performance. This strategic\nemphasis on targeted data collection allowed us to delve into the intricacies of the replication process and uncover the underlying factors contributing to\nthe challenges faced by our customers.\u003c/p\u003e\n\n\u003ch3 id=\"measuring-replication-performance-the-birth-of-cb-tracker\"\u003eMeasuring replication performance: the birth of cb-tracker\u003c/h3\u003e\n\n\u003cp\u003eDue to the lack of readily available tools and our inability to find suitable options, we took matters into our own hands and developed our open-source\ncommand-line tool, \u003cem\u003e\u003ca href=\"https://github.com/ziollek/couchbase-replication-ping\"\u003ecb-tracker\u003c/a\u003e\u003c/em\u003e. This tool serves the purpose of continuously measuring\nreplication lag. Its functionality revolves around connecting to two Couchbase clusters, designated as A and B, connected via \u003cem\u003eXDCR\u003c/em\u003e replication.\u003c/p\u003e\n\n\u003cp\u003eThe primary objective of our tool is to measure the Replication Round-Trip Time (RTT). In simpler terms, it gauges how quickly a document written to cluster A\nbecomes accessible on cluster B, and vice versa. The logic behind this measurement is inspired by the widely used network diagnostic tool \u003cem\u003eping\u003c/em\u003e.\nTo provide a clearer understanding of how this tool performs measurements, refer to the diagram below.\u003c/p\u003e\n\n\u003cp\u003e\u003cimg src=\"/img/articles/2024-02-12-couchbase-expired-docs-tuning/cb-tracker.png\" alt=\"cb-tracker-flow\" /\u003e\u003c/p\u003e\n\n\u003cp\u003eWith the deployment of such a tool, we initiated continuous replication monitoring in the Couchbase bucket used by the microservice responsible for managing\ncustomer preferences. This monitoring effort provided us with valuable insights into the cyclic spikes in replication time. As depicted in the diagram below,\nwe observed two spikes recurring every hour, about 20 minutes apart. This observation prompted us to investigate potential periodic tasks\nwithin Couchbase that might be contributing to this cyclic behavior.\u003c/p\u003e\n\n\u003cp\u003e\u003cimg src=\"/img/articles/2024-02-12-couchbase-expired-docs-tuning/replication-spikes.png\" alt=\"replication-spikes\" /\u003e\u003c/p\u003e\n\n\u003ch3 id=\"there-are-my-knobs-unraveling-couchbase-quirks\"\u003eThere are my knobs: unraveling couchbase quirks\u003c/h3\u003e\n\n\u003cp\u003eWhile we’ve extolled the virtues of Couchbase, every solution has its quirks, and as the saying goes, the devil is in the details… and defaults :).\nIn our case, the intricacy arose from the documents stored in the scrutinized bucket, each having a set Time-To-Live (TTL).\nThe implementation of \u003cem\u003eTTL\u003c/em\u003e on the Couchbase side is quite intriguing — expired documents are not deleted immediately; instead, they are skipped by\nthe fetching logic. This situation could potentially last indefinitely, leading to storage consumption concerns.\u003c/p\u003e\n\n\u003cp\u003eTo handle expired documents, Couchbase triggers a dedicated process every 60 minutes; the interval is controlled by \u003ca href=\"https://docs.couchbase.com/server/current/cli/cbepctl/set-flush_param.html#options\"\u003eexp_pager_stime parameter\u003c/a\u003e.\nEach run flushes out these expired documents from storage. However, an additional default setting — specifically,\nthe flag \u003cem\u003e\u003ca href=\"https://docs.couchbase.com/server/current/rest-api/rest-xdcr-adv-settings.html#get-settings-for-all-replications\"\u003efilterExpiration\u003c/a\u003e\u003c/em\u003e indicating that\neach flush should be replicated via \u003cem\u003eXDCR\u003c/em\u003e — created an unintended consequence. This default behavior caused a significant influx of events every hour,\noverwhelming \u003cem\u003eXDCR\u003c/em\u003e. Consequently, other events, such as changes made by the microservice, had to be queued.\u003c/p\u003e\n\n\u003cp\u003eUnderstanding that this mechanism operates on each cluster and that every expired document would eventually be deleted,\nwe recognized the need to address this overload of the replication mechanism. To rectify this, we adjusted the mentioned flag and increased the frequency\nof cleaning expired documents. Following this optimization, we observed a notable improvement, with no further instances of replication spikes.\u003c/p\u003e\n\n\u003ch2 id=\"summary\"\u003eSummary\u003c/h2\u003e\n\n\u003cp\u003eWe grappled with a shortage of effective tools to monitor replication from a client perspective. As we’ve illustrated, pinpointing the genuine root cause of our\nproblem was crucial. I hope that the tool we’ve introduced can also assist you in the ongoing quest for those valuable milliseconds.\u003c/p\u003e\n\n\u003cp\u003eCouchbase offers a comprehensive set of configuration parameters with default settings that might not be optimal for handling high-volume traffic.\nAs demonstrated, there are subtle threats that can undermine the experience of an otherwise speedy replication mechanism like \u003cem\u003eXDCR\u003c/em\u003e.\nIt’s worth noting that our narrative is based on the community edition of Couchbase (v6), and it’s unfortunate that \u003cem\u003eXDCR\u003c/em\u003e is\n\u003ca href=\"https://www.couchbase.com/blog/couchbase-modifies-license-free-community-edition-package/\"\u003ewithdrawn\u003c/a\u003e from the open-source\nversion of Couchbase in the next release. I trust that our story can offer insights to help fine-tune your configuration and navigate potential challenges.\u003c/p\u003e\n\n\u003ch3 id=\"links\"\u003eLinks\u003c/h3\u003e\n\n\u003col\u003e\n  \u003cli\u003e\u003ca href=\"https://docs.couchbase.com/server/current/rest-api/rest-xdcr-adv-settings.html#get-settings-for-all-replications\"\u003eCouchbase: advanced replication settings\u003c/a\u003e\u003c/li\u003e\n  \u003cli\u003e\u003ca href=\"https://docs.couchbase.com/server/current/cli/cbepctl/set-flush_param.html#options\"\u003eCouchbase: flush parameters\u003c/a\u003e\u003c/li\u003e\n  \u003cli\u003e\u003ca href=\"https://github.com/ziollek/couchbase-replication-ping\"\u003ecb-tracker repository\u003c/a\u003e\u003c/li\u003e\n\u003c/ol\u003e\n","contentSnippet":"This story shows how we strive to fix issues reported by our customers regarding inconsistent listing views on our e-commerce platform.\nWe will use a top-down manner to guide you through our story. At the beginning, we highlight the challenges faced by our customers, followed by presenting\nbasic information on how views are personalized on our web application. We then delve deeper into our internal architecture, aiming to clarify how\nit supports High Availability (HA) by using two data centers. Finally, we advertise a little Couchbase,\ndistributed NoSQL database, and explain why it is an excellent storage solution for such an architecture.\nLater, we explain how the absence of adequate tools hindered us from uncovering the root cause of the problem and detail the adjustments we made in Couchbase\nto overcome these challenges. What can you glean from our experience? Firstly, you might be inspired to consider Couchbase as a storage solution in\na multi-regional, active-active architecture. Secondly, you’ll discover a tool that aids in monitoring Couchbase behavior in a multi-region setting.\nThirdly, we share some tips on manipulating settings in Couchbase.\nLastly, you’ll be able to decipher the mysterious title of our story and understand a few technological abbreviations.\nWhat you ask is NOT what you get\nAn ongoing challenge in the development of the Allegro platform has been the product catalog.\nOriginating from a C2C platform where offers lacked references to pre-existing products, our shift towards the B2C model brought forth the need to merge\noffers representing the same product. This was essential for enhancing the selection experience for our buyers. The journey to construct such a catalog involved\nvarious approaches, and after numerous iterations, it now functions seamlessly.\nFor the context of this article, a crucial detail is that our platform must support at least two ways of selecting offers:\nOffer listing: Each presented entity is a unique offer listed by a particular merchant.\n  \nProduct listing: Each presented entity represents a unique product connected to a set of offers where you can make a purchase.\n  \nGiven the diverse factors influencing whether a customer prefers selecting offers or products, we’ve deliberately avoided limiting the selection experience.\nIn many cases, customers are free to choose either method, and their preferred choice is remembered to ensure a consistent and personalized experience.\nBoth offer and product listing views feature a switch that allows users to change their personal preference. With each click,\nthe personalized preference is updated, and the current view is refreshed accordingly.\nHowever, our journey took an unexpected turn when we began receiving reports that customers, despite changing their preference, continued to see the same view.\nFor instance, if a customer switched from the offer listing to the product listing, they would still receive the offer listing. The frustration escalated\nas this invalid view persisted, even after manual page refreshes, lasting several times before finally aligning with the customer’s preference after a delay,\nsometimes up to a minute. This discrepancy became the starting point of our investigation.\nRemedy for rendering views in SOA - Opbox\nDedicated readers of this blog may already be aware that the Allegro platform embraces a microservices architecture, a powerful strategy for\ndividing domains and responsibilities. However, this approach presents challenges when it comes to offering a unified graphical user interface (GUI) for\nour customers. To bridge this gap, we successfully implemented our internal Content Management System (CMS) platform named Opbox.\nWhile delving into the intricate details of Opbox is beyond the scope of this narrative, those interested in our frontend management can explore\nour blogpost or,\nif inclined, listen to our podcast in Polish here.\nFor our story, what’s crucial to note is that Opbox plays a pivotal role in fetching information from microservices, particularly about customer preferences.\nIt collaborates with the microservice responsible for storing such data, ensuring the preparation of a personalized view for each user.\nNo detective skills were needed to deduce that the observed issues originated from the microservice responsible for storing customer preferences,\nwhich was serving outdated information.\nThe real question at hand was how to mitigate this challenge.\nCompleting our narrative puzzle involves highlighting the interface familiar to our web application customers,\nwhich operates across two domains with distinct responsibilities:\nallegro.pl: This domain is responsible for providing the GUI (HTML views), rendered via Opbox.\nedge.allegro.pl: This domain takes charge of direct interactions via AJAX (Asynchronous JavaScript) with specific microservices.\nIn simpler terms, the listing view is rendered through the allegro.pl domain, while the task of switching personal preferences is handled via the\nedge.allegro.pl domain.\nYou can’t HAndle this\nAs a member of the Technical Platform department, my perspective is likely biased towards High Availability (HA) and everything that enhances\nAllegro’s resilience to the outage of individual components or services. The fundamental principle guiding our HA strategy involves dispersing each\nmicroservice to two different locations, typically different data centers. This approach serves as a robust contingency plan, enabling us to overcome not only\nminor outages but also significant disasters, such as the outage of an entire data center.\nIt’s essential to note that our HA strategy operates on a multi-region active-active approach. In simpler terms, all our data centers or clouds are actively\nhandling traffic simultaneously. While this approach ensures that everything remains operational in each location, it also introduces its own set of challenges.\nBalancing the benefits of simultaneous activity with the complexities it brings is a constant consideration in our pursuit of a resilient\nand fault-tolerant system.\nNavigating the multi-region challenges\nHandling traffic in such a manner can undoubtedly impact performance. Each HTTP request from our customers typically involves a set of microservices.\nTo mitigate the challenges of cross-datacenter traffic between these services, we introduced the principle of locality. In simple terms, if an instance of\nmicroservice A needs to communicate with microservice B, we prioritize instances running in the same location or data center.\nHowever, it’s crucial to note that the locality principle faces limitations, especially when it comes to certain storage solutions. For instance,\nmost Relational Database Management Systems (RDBMS) and MongoDB databases only allow writes through a specific node. This means that even if the traffic\nis handled by an instance in DATA CENTER A, it may still be necessary to query a database node in DATA CENTER B to write some data.\nThe challenge lies in finding storage solutions that permit simultaneous writing to nodes in the same location. One such example is\nCouchbase clusters with cross-data center replication, offering a solution to the intricacies of our multi-region, active-active architecture.\nRoots of inconsistency\nAs mentioned earlier, we employ two domains to provide an interface for our customers. In the context of High Availability (HA), this setup implies that\nrendering can be handled by DATA CENTER A, while AJAX communication simultaneously takes place in DATA CENTER B. This dual-domain approach necessitates\na replication mechanism that applies changes made in one data center to the other.\nHowever, a critical challenge arises when the replication mechanism lags behind the Round-Trip Time (RTT) of client requests, as illustrated in\nthe diagram below. The red rectangle in the diagram symbolizes the replication process of a single write operation. If this process takes longer than\nthe back-and-forth exchange of HTTP response and request, the client may receive an invalid view. It’s crucial to note that the second request is directed\nstraight to data center B and is not proxied by DATA CENTER A.\nMitigating this issue, short of radical architectural changes, becomes a significant concern. The intricacies of replication timing are central to ensuring\na seamless and accurate user experience in our multi-data center, active-active architecture.\n\nThe replication lag can be influenced by various factors depending on the storage solutions in use. One undeniable factor is that it cannot be faster than\nthe light distance between data centers. Fortunately, in our case, this distance is minimal, and for the purpose of this story, it can be considered negligible.\nFortunate storage\nAs I mentioned earlier, Couchbase lends itself to adhering to our locality principle in the communication between microservices and databases within\nour architecture. Fortunately, it serves as the storage solution for the microservice responsible for maintaining customers’ preferences. What’s even more\nfortunate is the swift cross-cluster replication mechanism,\nXDCR, employed by Couchbase.\nIn fact, the changes are applied on a cluster in the second data center faster than one Round-Trip Time (RTT) between data centers – pretty cool, isn’t it?\nIt’s noteworthy that XDCR can be configured in either a unidirectional or bidirectional manner. In our case, given active-active writes in all locations,\nwe use a bidirectional configuration to replicate changes, irrespective of the location in which they were applied.\nDeeper analysis: unraveling the replication enigma\nCouchbase offers an abundance of highly detailed metrics regarding the internal state of the cluster. However, without a deep understanding,\nit becomes challenging to decipher whether irregularities or spikes in these metrics may indicate potential problems for customers. This challenge is\nparticularly pronounced when dealing with cross-cluster replication, where overseeing the state of two clusters simultaneously is a complex task.\nAt Allegro, our commitment to meticulous data collection extends to being detailed in gathering performance metrics from a microservice perspective.\nDespite Couchbase providing meaningful information, the story would be incomplete if it solely relied on easily accessible metrics. In reality, these metrics\nfailed to reveal relevant information; read/write times remained relatively stable even during moments when customers reported issues.\nTo gain a deeper understanding of the situation, our approach was clear—gather more data, with a specific focus on replication performance. This strategic\nemphasis on targeted data collection allowed us to delve into the intricacies of the replication process and uncover the underlying factors contributing to\nthe challenges faced by our customers.\nMeasuring replication performance: the birth of cb-tracker\nDue to the lack of readily available tools and our inability to find suitable options, we took matters into our own hands and developed our open-source\ncommand-line tool, cb-tracker. This tool serves the purpose of continuously measuring\nreplication lag. Its functionality revolves around connecting to two Couchbase clusters, designated as A and B, connected via XDCR replication.\nThe primary objective of our tool is to measure the Replication Round-Trip Time (RTT). In simpler terms, it gauges how quickly a document written to cluster A\nbecomes accessible on cluster B, and vice versa. The logic behind this measurement is inspired by the widely used network diagnostic tool ping.\nTo provide a clearer understanding of how this tool performs measurements, refer to the diagram below.\n\nWith the deployment of such a tool, we initiated continuous replication monitoring in the Couchbase bucket used by the microservice responsible for managing\ncustomer preferences. This monitoring effort provided us with valuable insights into the cyclic spikes in replication time. As depicted in the diagram below,\nwe observed two spikes recurring every hour, about 20 minutes apart. This observation prompted us to investigate potential periodic tasks\nwithin Couchbase that might be contributing to this cyclic behavior.\n\nThere are my knobs: unraveling couchbase quirks\nWhile we’ve extolled the virtues of Couchbase, every solution has its quirks, and as the saying goes, the devil is in the details… and defaults :).\nIn our case, the intricacy arose from the documents stored in the scrutinized bucket, each having a set Time-To-Live (TTL).\nThe implementation of TTL on the Couchbase side is quite intriguing — expired documents are not deleted immediately; instead, they are skipped by\nthe fetching logic. This situation could potentially last indefinitely, leading to storage consumption concerns.\nTo handle expired documents, Couchbase triggers a dedicated process every 60 minutes; the interval is controlled by exp_pager_stime parameter.\nEach run flushes out these expired documents from storage. However, an additional default setting — specifically,\nthe flag filterExpiration indicating that\neach flush should be replicated via XDCR — created an unintended consequence. This default behavior caused a significant influx of events every hour,\noverwhelming XDCR. Consequently, other events, such as changes made by the microservice, had to be queued.\nUnderstanding that this mechanism operates on each cluster and that every expired document would eventually be deleted,\nwe recognized the need to address this overload of the replication mechanism. To rectify this, we adjusted the mentioned flag and increased the frequency\nof cleaning expired documents. Following this optimization, we observed a notable improvement, with no further instances of replication spikes.\nSummary\nWe grappled with a shortage of effective tools to monitor replication from a client perspective. As we’ve illustrated, pinpointing the genuine root cause of our\nproblem was crucial. I hope that the tool we’ve introduced can also assist you in the ongoing quest for those valuable milliseconds.\nCouchbase offers a comprehensive set of configuration parameters with default settings that might not be optimal for handling high-volume traffic.\nAs demonstrated, there are subtle threats that can undermine the experience of an otherwise speedy replication mechanism like XDCR.\nIt’s worth noting that our narrative is based on the community edition of Couchbase (v6), and it’s unfortunate that XDCR is\nwithdrawn from the open-source\nversion of Couchbase in the next release. I trust that our story can offer insights to help fine-tune your configuration and navigate potential challenges.\nLinks\nCouchbase: advanced replication settings\nCouchbase: flush parameters\ncb-tracker repository","guid":"https://blog.allegro.tech/2024/02/couchbase-expired-docs-tuning.html","categories":["tech","couchbase","replication","performance bottleneck","open source","ttl","metrics"],"isoDate":"2024-02-11T23:00:00.000Z"},{"title":"WCAG 2.2 is here! And what about 3.0?","link":"https://blog.allegro.tech/2024/01/wcag-2-2.html","pubDate":"Wed, 24 Jan 2024 00:00:00 +0100","authors":{"author":[{"name":["Barbara Szott"],"photo":["https://blog.allegro.tech/img/authors/barbara.szott.jpg"],"url":["https://blog.allegro.tech/authors/barbara.szott"]}]},"content":"\u003cp\u003eReady to turn web accessibility from a headache into a breeze? Join us as we demystify WCAG, explore its latest 2.2 version, and gaze into the future of digital\ninclusivity. Get ready for a journey that’s as enlightening as it is entertaining!\u003c/p\u003e\n\n\u003ch2 id=\"what-exactly-is-wcag\"\u003eWhat exactly is WCAG?\u003c/h2\u003e\n\n\u003cp\u003eImagine you are opening a bar and want to invite all your friends there, and you want them to have a great time hanging out at your place. But some of your\nfriends have different disabilities, such as using wheelchairs or having trouble seeing or hearing. You want everyone to have fun, right? Well, WCAG which stands for\nWeb Contents Accessibility Guidelines, is set of rules to make sure Internet is like a bar that everyone can enjoy.\u003c/p\u003e\n\n\u003ch2 id=\"four-principles-of-accessibility\"\u003eFour principles of accessibility\u003c/h2\u003e\n\n\u003cp\u003eThe guidelines and Success Criteria are based on four key principles that provide the fundamental basis for anyone to access and use web content. Let me explain\nthem as simply as possible:\u003c/p\u003e\n\n\u003col\u003e\n  \u003cli\u003e\u003cstrong\u003ePerceivable (big text and clear pictures)\u003c/strong\u003e - everything on a website should be easy to see and understand. Imagine reading a book. Some people need big\nletters, and some might not see well. So, WCAG says websites should have big letters and clear pictures, like a book with large print and colorful\nillustrations,\u003c/li\u003e\n  \u003cli\u003e\u003cstrong\u003eOperable (easy to click and move)\u003c/strong\u003e - the user interface and navigation of a website are easy to operate. It means that people should be able to interact\nwith the content using various methods, such as a keyboard or assistive technologies like screen readers. It also encourages predictable and consistent\nnavigation and input methods,\u003c/li\u003e\n  \u003cli\u003e\u003cstrong\u003eUnderstandable (no confusing stuff)\u003c/strong\u003e - ever been on a website and got lost because it was too complicated? WCAG says websites should be like a\nstraightforward treasure hunt, not a confusing maze. They should have clear instructions and be easy to understand, just like a fun treasure hunt game with\nsimple clues,\u003c/li\u003e\n  \u003cli\u003e\u003cstrong\u003eRobust (works everywhere)\u003c/strong\u003e - robustness means that websites should be built to last and work well with different technologies. This ensures that websites\nremain accessible as technology evolves. It’s like building a house with strong foundations so that it stands the test of time.\u003c/li\u003e\n\u003c/ol\u003e\n\n\u003cp\u003eIn essence, WCAG is like a set of rules and recommendations to make the Internet a welcoming and usable place for everyone, regardless of their abilities or\ndisabilities. It’s about creating a digital world that is inclusive and user-friendly for all.\u003c/p\u003e\n\n\u003cp\u003eWCAG guidelines are organized into three levels of conformance:\u003c/p\u003e\n\n\u003col\u003e\n  \u003cli\u003eA - addressing the most critical issues to ensure a minimal level of accessibility\u003c/li\u003e\n  \u003cli\u003eAA - covers a broader range of requirements; the website is more accessible and user-friendly\u003c/li\u003e\n  \u003cli\u003eAAA - ensures the highest level of accessibility\u003c/li\u003e\n\u003c/ol\u003e\n\n\u003ch2 id=\"timeline\"\u003eTimeline\u003c/h2\u003e\n\n\u003cp\u003eI don’t want to bore you with details, but I think it is good to understand that WCAG is not something new. It’s been around for quite a while!\u003c/p\u003e\n\n\u003cul\u003e\n  \u003cli\u003e1997 - W3C started working on WCAG 1.0\u003c/li\u003e\n  \u003cli\u003e1999 - WCAG 1.0 shipped\u003c/li\u003e\n  \u003cli\u003e2001-2007 - WCAG 2.0\u003c/li\u003e\n  \u003cli\u003e2017-2018 - WCAG 2.1\u003c/li\u003e\n  \u003cli\u003e2020 - W3C started working on WCAG 2.2\u003c/li\u003e\n  \u003cli\u003e2023 - WCAG 2.2\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch2 id=\"wcag-22\"\u003eWCAG 2.2\u003c/h2\u003e\n\n\u003cp\u003e\u003ca href=\"https://www.w3.org/TR/WCAG22/\"\u003eThe new version\u003c/a\u003e introduces 9 new success criteria (SC) - two at level A, four at level AA, and three at AAA. Let’s give them a closer look.\u003c/p\u003e\n\n\u003ch3 id=\"2411-a--2412-aa---stop-hiding-my-focus\"\u003e2.4.11 (A) \u0026amp; 2.4.12 (AA) - “Stop hiding my focus!”\u003c/h3\u003e\n\n\u003cp\u003eI think we can all agree here - it is just annoying if you are browsing the web and all of a sudden something appears - a modal, cookie banner, chat\nwidget, and covers what we were just reading.\u003c/p\u003e\n\n\u003cp\u003eSo make sure the focus is not obscured. It also applies to submenus and sticky headers.\u003c/p\u003e\n\n\u003cp\u003eFor A and AA levels focused user interface component should be at least partially visible; for AAA it must be fully visible.\u003c/p\u003e\n\n\u003ch3 id=\"257-aa---aaargh-i-cant-do-this-drag--drop-thing-i-need-another-way-to-do-this\"\u003e2.5.7 (AA) - “Aaargh! I can’t do this drag \u0026amp; drop thing! I need another way to do this..!”\u003c/h3\u003e\n\n\u003cp\u003eIf a feature on a website or app can be used by moving your cursor or finger in a dragging motion (like when you click and drag a slider), it should also be\npossible to use that feature without dragging.\u003c/p\u003e\n\n\u003cp\u003eThis helps people with mobility difficulties, especially when it might be difficult for them to press and hold down and precisely control their movement.\u003c/p\u003e\n\n\u003ch3 id=\"258-aa---i-need-these-buttons-to-be-big-enough-that-im-sure-i-will-press-the-right-one\"\u003e2.5.8 (AA) - “I need these buttons to be big enough that I’m sure I will press the right one”\u003c/h3\u003e\n\n\u003cp\u003eThe size of the target for pointer inputs should be at least 24 by 24 CSS pixels.\u003c/p\u003e\n\n\u003cp\u003eThis comes along with criterion 2.5.5 introduced in WCAG 2.1 (\u003ca href=\"https://www.w3.org/WAI/WCAG21/Understanding/target-size.html\"\u003eminimum target size\u003c/a\u003e) - this is still valid, but it’s AAA level.\u003c/p\u003e\n\n\u003cp\u003eButtons that are too small or too close to each other are a common problem for people with mobility issues. It’s difficult to interact with the right one. This\nrule is not the same as the AAA success rule, which says that things you click on need to be big enough to easily click on. This rule is about making sure that\nthings you click on are either naturally big enough or spaced far enough apart from other things, so you don’t accidentally click on the wrong thing. The worst\nthing here that can happen is that you accidentally submit something you didn’t want to!\u003c/p\u003e\n\n\u003cp\u003eHow about links that are stacked on top of each other or small images adjacent to each other? How can we make them fulfill SC 2.5.8?\u003c/p\u003e\n\n\u003cp\u003eLet’s use an imaginary 24px diameter circle. If you draw this circle in the center of your link - if that imaginary circle doesn’t intersect another target or\nanother imaginary circle from a small target, then the link is sufficiently spaced.\u003c/p\u003e\n\n\u003cp\u003e\u003cimg src=\"/img/articles/2024-01-24-wcag-2-2/imaginary-circles.png\" alt=\"\" class=\"small-image\" /\u003e\u003c/p\u003e\n\n\u003cp\u003eJust as many other success criteria, there are exceptions, and the most important for us are:\u003c/p\u003e\n\u003cul\u003e\n  \u003cli\u003elinks in text,\u003c/li\u003e\n  \u003cli\u003euser-agent controls - as we do not always control what the browser provides. Common examples are select elements (checkboxes, date pickers, etc.); note, that\nthis rule does apply to these structures if you are building them by yourself,\u003c/li\u003e\n  \u003cli\u003eessential elements - when things just have to be close to each other; an example of this is a map.\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch2 id=\"2413-aaa---wh-where-is-my-keyboard-focus-\"\u003e2.4.13 (AAA) - “Wh… Where is my keyboard focus..? :(”\u003c/h2\u003e\n\n\u003cp\u003eAlthough it is AAA level, it was hoped and tried to have the success criterion at AA.\u003c/p\u003e\n\n\u003cp\u003eFocus helps people who rely on keyboard navigation - not only people who are using some assistive technologies but also power users (curb-cut effect again!). The\nfocus indicator must be visible, with good contrast and size:\u003c/p\u003e\n\u003cul\u003e\n  \u003cli\u003econtrast ratio must be at least 3:1 between the same pixels in the focused and unfocused states,\u003c/li\u003e\n  \u003cli\u003esize needs to be at least the area of a 2px thick perimeter on the unfocused components.\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eThe following 4 criteria are meant to improve \u003cstrong\u003ecognitive accessibility\u003c/strong\u003e.\u003c/p\u003e\n\n\u003ch2 id=\"326-a---i-need-help-but-i-have-no-idea-how-to-find-it\"\u003e3.2.6 (A) - “I need help but I have no idea how to find it!”\u003c/h2\u003e\n\n\u003cp\u003eThis criterion does not require that help be provided. But if it is - it should be easy to find and its placement should be consistent among multiple screens\n(for example: always in the same place in the footer). The help section location may change as the viewport size changes, but it must be consistent across pages at the\nsame viewport size.\u003c/p\u003e\n\n\u003ch2 id=\"337-a---ive-just-told-you-that-why-do-i-have-to-repeat-myself\"\u003e3.3.7 (A) - “I’ve just told you that, why do I have to repeat myself?”\u003c/h2\u003e\n\n\u003cp\u003eDo not require people to enter the same information more than once during a process. It makes it easier for people with cognitive disabilities to avoid errors\nand finish a multi-step task by not making them repeat information they’ve already entered in one step when they move on to the next step.\u003c/p\u003e\n\n\u003cp\u003eLet’s think of a very common example - filling shipping address and billing address. In many cases they are exactly the same - so why should the user provide\nthe same information twice? Good practice here is to provide a simple checkbox “same as shipping address”.\u003c/p\u003e\n\n\u003cp\u003eAnother example is to give the possibility to select previously provided information - for example, you can save in your account settings a few addresses, and\nafter purchase, you can just select an option instead of reentering all the data.\u003c/p\u003e\n\n\u003cp\u003eThere are a few exceptions:\u003c/p\u003e\n\u003cul\u003e\n  \u003cli\u003ereentering information is \u003ca href=\"https://www.w3.org/WAI/WCAG22/Understanding/redundant-entry#dfn-essential\"\u003eessential\u003c/a\u003e,\u003c/li\u003e\n  \u003cli\u003esecurity reasons (when you have to reenter your password),\u003c/li\u003e\n  \u003cli\u003epreviously provided information may no longer be valid (for example some government sites may force you to fill form with crucial data once in a while)\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch2 id=\"338-aa--339-aaa---accessible-authentication\"\u003e3.3.8 (AA) \u0026amp; 3.3.9 (AAA) - Accessible authentication\u003c/h2\u003e\n\n\u003cp\u003eAccessible authentication requires that there is a path to authenticate that doesn’t rely on cognitive function tests such as memorization, transcription, or\nsolving puzzles. This requirement will help people with cognitive disabilities including memory, dyslexia, dyscalculia… but not only (check these \u003ca href=\"https://www.boredpanda.com/captcha-struggles-fails/\"\u003ecaptcha struggles fails\u003c/a\u003e).\u003c/p\u003e\n\n\u003cp\u003eAA allows CAPTCHAs that use recognizing common objects such as “select all the pictures that include dogs” but the AAA success criterion does not allow for that.\u003c/p\u003e\n\n\u003ch2 id=\"the-future-of-wcag\"\u003eThe future of WCAG\u003c/h2\u003e\n\u003cp\u003eCurrently, a task force is working on WCAG 2.x maintenance, addressing issues (there are over 600 of them opened on \u003ca href=\"https://github.com/w3c/wcag/issues\"\u003eGitHub\u003c/a\u003e).\nWCAG 2.2 will be around for awhile, and WCAG 3.0 is still years away from becoming a recommendation (…and that will be a very long transition).\u003c/p\u003e\n\n\u003cp\u003eIt’s 2023, and WCAG 2.0 was shipped in 2001 - the world changed a lot during these years and technology evolved rapidly. WCAG 3.0 (“Silver”) aims to fill gaps,\nreflect real-world accessibility, and prioritize issues more effectively. Research began in 2016, and in 2021 the first draft was shown - but it is still very\nraw (check \u003ca href=\"https://www.w3.org/WAI/GL/task-forces/silver/wiki/Major_Milestones_for_Silver\"\u003emajor milestones for Silver\u003c/a\u003e).\u003c/p\u003e\n\n\u003cp\u003eIn conclusion, WCAG remains a vital framework for ensuring digital accessibility and empowering individuals with disabilities to fully engage with online\ncontent. The introduction of new criteria in WCAG 2.2 signifies a commitment to continually improving and expanding accessibility guidelines to meet the diverse\nneeds of users. As we look to the future of WCAG, with the development of WCAG 3.0 on the horizon, it is clear that accessibility is not just an evolving field\nbut a transformative one. The journey towards a more inclusive digital landscape may be ongoing, but it is driven by a shared dedication to ensuring that the\nweb is a place where everyone can participate, regardless of their abilities. Embracing these evolving standards and fostering a culture of accessibility will\nnot only benefit individuals with disabilities but will ultimately create a more equitable and accessible online world for all.\u003c/p\u003e\n","contentSnippet":"Ready to turn web accessibility from a headache into a breeze? Join us as we demystify WCAG, explore its latest 2.2 version, and gaze into the future of digital\ninclusivity. Get ready for a journey that’s as enlightening as it is entertaining!\nWhat exactly is WCAG?\nImagine you are opening a bar and want to invite all your friends there, and you want them to have a great time hanging out at your place. But some of your\nfriends have different disabilities, such as using wheelchairs or having trouble seeing or hearing. You want everyone to have fun, right? Well, WCAG which stands for\nWeb Contents Accessibility Guidelines, is set of rules to make sure Internet is like a bar that everyone can enjoy.\nFour principles of accessibility\nThe guidelines and Success Criteria are based on four key principles that provide the fundamental basis for anyone to access and use web content. Let me explain\nthem as simply as possible:\nPerceivable (big text and clear pictures) - everything on a website should be easy to see and understand. Imagine reading a book. Some people need big\nletters, and some might not see well. So, WCAG says websites should have big letters and clear pictures, like a book with large print and colorful\nillustrations,\nOperable (easy to click and move) - the user interface and navigation of a website are easy to operate. It means that people should be able to interact\nwith the content using various methods, such as a keyboard or assistive technologies like screen readers. It also encourages predictable and consistent\nnavigation and input methods,\nUnderstandable (no confusing stuff) - ever been on a website and got lost because it was too complicated? WCAG says websites should be like a\nstraightforward treasure hunt, not a confusing maze. They should have clear instructions and be easy to understand, just like a fun treasure hunt game with\nsimple clues,\nRobust (works everywhere) - robustness means that websites should be built to last and work well with different technologies. This ensures that websites\nremain accessible as technology evolves. It’s like building a house with strong foundations so that it stands the test of time.\nIn essence, WCAG is like a set of rules and recommendations to make the Internet a welcoming and usable place for everyone, regardless of their abilities or\ndisabilities. It’s about creating a digital world that is inclusive and user-friendly for all.\nWCAG guidelines are organized into three levels of conformance:\nA - addressing the most critical issues to ensure a minimal level of accessibility\nAA - covers a broader range of requirements; the website is more accessible and user-friendly\nAAA - ensures the highest level of accessibility\nTimeline\nI don’t want to bore you with details, but I think it is good to understand that WCAG is not something new. It’s been around for quite a while!\n1997 - W3C started working on WCAG 1.0\n1999 - WCAG 1.0 shipped\n2001-2007 - WCAG 2.0\n2017-2018 - WCAG 2.1\n2020 - W3C started working on WCAG 2.2\n2023 - WCAG 2.2\nWCAG 2.2\nThe new version introduces 9 new success criteria (SC) - two at level A, four at level AA, and three at AAA. Let’s give them a closer look.\n2.4.11 (A) \u0026 2.4.12 (AA) - “Stop hiding my focus!”\nI think we can all agree here - it is just annoying if you are browsing the web and all of a sudden something appears - a modal, cookie banner, chat\nwidget, and covers what we were just reading.\nSo make sure the focus is not obscured. It also applies to submenus and sticky headers.\nFor A and AA levels focused user interface component should be at least partially visible; for AAA it must be fully visible.\n2.5.7 (AA) - “Aaargh! I can’t do this drag \u0026 drop thing! I need another way to do this..!”\nIf a feature on a website or app can be used by moving your cursor or finger in a dragging motion (like when you click and drag a slider), it should also be\npossible to use that feature without dragging.\nThis helps people with mobility difficulties, especially when it might be difficult for them to press and hold down and precisely control their movement.\n2.5.8 (AA) - “I need these buttons to be big enough that I’m sure I will press the right one”\nThe size of the target for pointer inputs should be at least 24 by 24 CSS pixels.\nThis comes along with criterion 2.5.5 introduced in WCAG 2.1 (minimum target size) - this is still valid, but it’s AAA level.\nButtons that are too small or too close to each other are a common problem for people with mobility issues. It’s difficult to interact with the right one. This\nrule is not the same as the AAA success rule, which says that things you click on need to be big enough to easily click on. This rule is about making sure that\nthings you click on are either naturally big enough or spaced far enough apart from other things, so you don’t accidentally click on the wrong thing. The worst\nthing here that can happen is that you accidentally submit something you didn’t want to!\nHow about links that are stacked on top of each other or small images adjacent to each other? How can we make them fulfill SC 2.5.8?\nLet’s use an imaginary 24px diameter circle. If you draw this circle in the center of your link - if that imaginary circle doesn’t intersect another target or\nanother imaginary circle from a small target, then the link is sufficiently spaced.\n\nJust as many other success criteria, there are exceptions, and the most important for us are:\nlinks in text,\nuser-agent controls - as we do not always control what the browser provides. Common examples are select elements (checkboxes, date pickers, etc.); note, that\nthis rule does apply to these structures if you are building them by yourself,\nessential elements - when things just have to be close to each other; an example of this is a map.\n2.4.13 (AAA) - “Wh… Where is my keyboard focus..? :(”\nAlthough it is AAA level, it was hoped and tried to have the success criterion at AA.\nFocus helps people who rely on keyboard navigation - not only people who are using some assistive technologies but also power users (curb-cut effect again!). The\nfocus indicator must be visible, with good contrast and size:\ncontrast ratio must be at least 3:1 between the same pixels in the focused and unfocused states,\nsize needs to be at least the area of a 2px thick perimeter on the unfocused components.\nThe following 4 criteria are meant to improve cognitive accessibility.\n3.2.6 (A) - “I need help but I have no idea how to find it!”\nThis criterion does not require that help be provided. But if it is - it should be easy to find and its placement should be consistent among multiple screens\n(for example: always in the same place in the footer). The help section location may change as the viewport size changes, but it must be consistent across pages at the\nsame viewport size.\n3.3.7 (A) - “I’ve just told you that, why do I have to repeat myself?”\nDo not require people to enter the same information more than once during a process. It makes it easier for people with cognitive disabilities to avoid errors\nand finish a multi-step task by not making them repeat information they’ve already entered in one step when they move on to the next step.\nLet’s think of a very common example - filling shipping address and billing address. In many cases they are exactly the same - so why should the user provide\nthe same information twice? Good practice here is to provide a simple checkbox “same as shipping address”.\nAnother example is to give the possibility to select previously provided information - for example, you can save in your account settings a few addresses, and\nafter purchase, you can just select an option instead of reentering all the data.\nThere are a few exceptions:\nreentering information is essential,\nsecurity reasons (when you have to reenter your password),\npreviously provided information may no longer be valid (for example some government sites may force you to fill form with crucial data once in a while)\n3.3.8 (AA) \u0026 3.3.9 (AAA) - Accessible authentication\nAccessible authentication requires that there is a path to authenticate that doesn’t rely on cognitive function tests such as memorization, transcription, or\nsolving puzzles. This requirement will help people with cognitive disabilities including memory, dyslexia, dyscalculia… but not only (check these captcha struggles fails).\nAA allows CAPTCHAs that use recognizing common objects such as “select all the pictures that include dogs” but the AAA success criterion does not allow for that.\nThe future of WCAG\nCurrently, a task force is working on WCAG 2.x maintenance, addressing issues (there are over 600 of them opened on GitHub).\nWCAG 2.2 will be around for awhile, and WCAG 3.0 is still years away from becoming a recommendation (…and that will be a very long transition).\nIt’s 2023, and WCAG 2.0 was shipped in 2001 - the world changed a lot during these years and technology evolved rapidly. WCAG 3.0 (“Silver”) aims to fill gaps,\nreflect real-world accessibility, and prioritize issues more effectively. Research began in 2016, and in 2021 the first draft was shown - but it is still very\nraw (check major milestones for Silver).\nIn conclusion, WCAG remains a vital framework for ensuring digital accessibility and empowering individuals with disabilities to fully engage with online\ncontent. The introduction of new criteria in WCAG 2.2 signifies a commitment to continually improving and expanding accessibility guidelines to meet the diverse\nneeds of users. As we look to the future of WCAG, with the development of WCAG 3.0 on the horizon, it is clear that accessibility is not just an evolving field\nbut a transformative one. The journey towards a more inclusive digital landscape may be ongoing, but it is driven by a shared dedication to ensuring that the\nweb is a place where everyone can participate, regardless of their abilities. Embracing these evolving standards and fostering a culture of accessibility will\nnot only benefit individuals with disabilities but will ultimately create a more equitable and accessible online world for all.","guid":"https://blog.allegro.tech/2024/01/wcag-2-2.html","categories":["tech","accessibility","a11y","wcag"],"isoDate":"2024-01-23T23:00:00.000Z"},{"title":"Embed multicolor icons using a single DOM element","link":"https://blog.allegro.tech/2024/01/embed-multicolor-icons-using-a-single-DOM-element.html","pubDate":"Wed, 10 Jan 2024 00:00:00 +0100","authors":{"author":[{"name":["Paweł Lesiecki"],"photo":["https://blog.allegro.tech/img/authors/pawel.lesiecki.jpg"],"url":["https://blog.allegro.tech/authors/pawel.lesiecki"]},{"name":["Maciej Suszko"],"photo":["https://blog.allegro.tech/img/authors/maciej.suszko.jpg"],"url":["https://blog.allegro.tech/authors/maciej.suszko"]}]},"content":"\u003cp\u003eHello, fellow Web developers!\u003c/p\u003e\n\n\u003cp\u003eIcons are an integral part of most modern UIs.\nWhat is the best way to embed icons nowadays?\nThis area is full of pitfalls.\nYou better proceed with caution when trying to answer that question.\u003c/p\u003e\n\n\u003cp\u003eThough there are many possibilities, \u003ca href=\"https://twitter.com/_developit/status/1382838799420514317\"\u003esome of which are considered harmful\u003c/a\u003e.\nVarious inline SVG techniques have become more popular over time. Possibly due to the lack of suitable alternatives, although not using the cache is a huge trade-off.\nThankfully, \u003ca href=\"https://twitter.com/getifyX/status/1720810762409566459\"\u003ethere are some voices of reason\u003c/a\u003e in the community.\u003c/p\u003e\n\n\u003cp\u003eAt \u003ca href=\"https://allegro.tech/\"\u003eAllegro\u003c/a\u003e, we’ve been using SVG and CSS filters for quite some time.\nHowever, they have their limits and could be better suited for the challenges of the themeable design system.\u003c/p\u003e\n\n\u003cp\u003eLet’s pause for a moment and rethink the approach to icons.\nIt has to meet several requirements:\u003c/p\u003e\n\u003cul\u003e\n  \u003cli\u003ethemeable,\u003c/li\u003e\n  \u003cli\u003ecacheable,\u003c/li\u003e\n  \u003cli\u003eeasily embeddable.\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch2 id=\"can-we-do-better-than-weve-been-doing-so-far\"\u003eCan we do better than we’ve been doing so far?\u003c/h2\u003e\n\n\u003cp\u003e\u003cimg src=\"/img/articles/2024-01-10-embed-multicolor-icons-using-a-single-DOM-element/icon.webp\" alt=\"Multilayer icon\" title=\"Multilayer icon\" /\u003e\u003c/p\u003e\n\n\u003cp\u003eAll the tools needed to perform the trick have been available in major browsers for at least few years.\nIs it possible everyone just failed to connect the dots?\nIt turns out that the platform is capable of dealing with icons more efficiently.\u003c/p\u003e\n\n\u003cp\u003e\u003cstrong\u003eLet us introduce the SVG+CSS technique. It lets you have a 3-color icon using just one DOM element and one external SVG.\u003c/strong\u003e\u003c/p\u003e\n\n\u003cp\u003eWe have found nothing similar, whether online or with ChatGPT, which makes us want to share this idea with you even more.\u003c/p\u003e\n\n\u003cp\u003eConsider the proposed technique if you care about performance.\u003c/p\u003e\n\n\u003ch3 id=\"key-benefits-are\"\u003eKey benefits are:\u003c/h3\u003e\n\n\u003col\u003e\n  \u003cli\u003eCaching.\u003c/li\u003e\n  \u003cli\u003eWorks cross-domain.\u003c/li\u003e\n  \u003cli\u003eCustomizable more than a single color.\u003c/li\u003e\n  \u003cli\u003eIcons load after critical resources and content, not bloating the markup.\u003c/li\u003e\n\u003c/ol\u003e\n\n\u003cp\u003eWe will control the colors of 3 different parts with a single DOM element and SVG resource.\u003c/p\u003e\n\n\u003cp\u003eSounds interesting? Then, let’s dive into how we can accomplish this.\u003c/p\u003e\n\n\u003ch2 id=\"implementation\"\u003eImplementation\u003c/h2\u003e\n\n\u003cp\u003eSVG and CSS are gifts that keep giving and can do wonders combined.\u003c/p\u003e\n\n\u003cp\u003eThe proposed technique is a combination of two platform capabilities.\u003c/p\u003e\n\u003col\u003e\n  \u003cli\u003e\u003ca href=\"https://css-tricks.com/svg-fragment-identifiers-work/\"\u003eSVG Fragments\u003c/a\u003e\u003c/li\u003e\n  \u003cli\u003e\u003ca href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/mask-image\"\u003eCSS Masks\u003c/a\u003e\u003c/li\u003e\n\u003c/ol\u003e\n\n\u003cp\u003e\u003ca href=\"https://caniuse.com/svg-fragment\"\u003eSVG Fragments aren’t really a new technology\u003c/a\u003e.\nAbout five years ago, we considered using CSS masks, but we still supported IE back then.\nAt that time, we had not yet thought of combining it with fragments.\u003c/p\u003e\n\n\u003cp\u003eAs a case study let’s pick one of our icons —\n\u003cimg class=\"inline-image\" alt=\"a-icon\" src=\"https://a.allegroimg.com/original/34412f/ae71613e49d986c5c838698e2e86/illustration-allegro-in-circle-big-db0c91e439\" /\u003e.\u003c/p\u003e\n\n\u003cp\u003eWith the following source:\u003c/p\u003e\n\n\u003cdiv class=\"language-html highlighter-rouge\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight\"\u003e\u003ccode\u003e\u003cspan class=\"nt\"\u003e\u0026lt;svg\u003c/span\u003e \u003cspan class=\"na\"\u003eviewBox=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"0 0 32 32\"\u003c/span\u003e \u003cspan class=\"na\"\u003efill=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"none\"\u003c/span\u003e \u003cspan class=\"na\"\u003eheight=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"32\"\u003c/span\u003e \u003cspan class=\"na\"\u003ewidth=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"32\"\u003c/span\u003e \u003cspan class=\"na\"\u003exmlns=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"http://www.w3.org/2000/svg\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"nt\"\u003e\u0026lt;path\u003c/span\u003e \u003cspan class=\"na\"\u003ed=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"...\"\u003c/span\u003e \u003cspan class=\"na\"\u003efill=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"#B0B8BC\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u0026lt;/path\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"nt\"\u003e\u0026lt;path\u003c/span\u003e \u003cspan class=\"na\"\u003eclip-rule=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"evenodd\"\u003c/span\u003e \u003cspan class=\"na\"\u003ed=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"...\"\u003c/span\u003e \u003cspan class=\"na\"\u003efill-rule=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"evenodd\"\u003c/span\u003e \u003cspan class=\"na\"\u003efill=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"#FF7B33\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u0026lt;/path\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"nt\"\u003e\u0026lt;path\u003c/span\u003e \u003cspan class=\"na\"\u003ed=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"...\"\u003c/span\u003e \u003cspan class=\"na\"\u003efill=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"#D9DFE4\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u0026lt;/path\u0026gt;\u003c/span\u003e\n\u003cspan class=\"nt\"\u003e\u0026lt;/svg\u0026gt;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eThis particular icon consists of 3 parts, each with a different color.\nNow, we’re going to control these colors with the document’s CSS.\u003c/p\u003e\n\n\u003cp\u003eIt’s time to program in SVG and CSS for a moment.\u003c/p\u003e\n\n\u003ch3 id=\"step-1--svg-fragments\"\u003eStep #1 — SVG Fragments\u003c/h3\u003e\n\n\u003cp\u003eFirst, let’s craft our test subject and introduce the fragments.\nEach \u003ccode class=\"language-plaintext highlighter-rouge\"\u003epath\u003c/code\u003e gets a unique Fragment Identifier by setting an \u003ccode class=\"language-plaintext highlighter-rouge\"\u003eid\u003c/code\u003e attribute.\nNext, we add a little CSS to enable rendering fragments in isolation. Think of it as an image sprite.\u003c/p\u003e\n\n\u003cp\u003eFor the sake of CSS simplicity, we also group all the paths under an extra \u003ccode class=\"language-plaintext highlighter-rouge\"\u003eg\u003c/code\u003e element with a unique \u003ccode class=\"language-plaintext highlighter-rouge\"\u003eid\u003c/code\u003e.\u003c/p\u003e\n\n\u003cp\u003eAs a result, the SVG is supposed to look like this:\u003c/p\u003e\n\n\u003cdiv class=\"language-html highlighter-rouge\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight\"\u003e\u003ccode\u003e\u003cspan class=\"nt\"\u003e\u0026lt;svg\u003c/span\u003e \u003cspan class=\"na\"\u003eviewBox=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"0 0 32 32\"\u003c/span\u003e \u003cspan class=\"na\"\u003efill=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"none\"\u003c/span\u003e \u003cspan class=\"na\"\u003eheight=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"32\"\u003c/span\u003e \u003cspan class=\"na\"\u003ewidth=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"32\"\u003c/span\u003e \u003cspan class=\"na\"\u003exmlns=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"http://www.w3.org/2000/svg\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"nt\"\u003e\u0026lt;style\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003epath\u003c/span\u003e\u003cspan class=\"nd\"\u003e:not\u003c/span\u003e\u003cspan class=\"o\"\u003e(\u003c/span\u003e\u003cspan class=\"nd\"\u003e:target\u003c/span\u003e\u003cspan class=\"o\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n      \u003cspan class=\"nl\"\u003edisplay\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"nb\"\u003enone\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003eg\u003c/span\u003e\u003cspan class=\"nd\"\u003e:target\u003c/span\u003e \u003cspan class=\"nt\"\u003epath\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n      \u003cspan class=\"nl\"\u003edisplay\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"nb\"\u003einline\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"nt\"\u003e\u0026lt;/style\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"nt\"\u003e\u0026lt;g\u003c/span\u003e \u003cspan class=\"na\"\u003eid=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"icon\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;path\u003c/span\u003e \u003cspan class=\"na\"\u003eid=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"border\"\u003c/span\u003e \u003cspan class=\"na\"\u003ed=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"...\"\u003c/span\u003e \u003cspan class=\"na\"\u003efill=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"#B0B8BC\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u0026lt;/path\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;path\u003c/span\u003e \u003cspan class=\"na\"\u003eid=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"a\"\u003c/span\u003e \u003cspan class=\"na\"\u003eclip-rule=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"evenodd\"\u003c/span\u003e \u003cspan class=\"na\"\u003ed=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"...\"\u003c/span\u003e \u003cspan class=\"na\"\u003efill-rule=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"evenodd\"\u003c/span\u003e \u003cspan class=\"na\"\u003efill=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"#FF7B33\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u0026lt;/path\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;path\u003c/span\u003e \u003cspan class=\"na\"\u003eid=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"shadow\"\u003c/span\u003e \u003cspan class=\"na\"\u003ed=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"...\"\u003c/span\u003e \u003cspan class=\"na\"\u003efill=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"#D9DFE4\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u0026lt;/path\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"nt\"\u003e\u0026lt;/g\u0026gt;\u003c/span\u003e\n\u003cspan class=\"nt\"\u003e\u0026lt;/svg\u0026gt;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eIt produces 4 fragments, one for each of the three paths and the last for the whole icon. Each of them can now be rendered as a separate image:\u003c/p\u003e\n\n\u003col\u003e\n  \u003cli\u003e\u003ca href=\"https://a.allegroimg.com/original/34901c/db3b33c5488eb13bc5244e215953/illustration-allegro-in-circle-big-ab3336c0b3#a\"\u003e\u003ccode class=\"language-plaintext highlighter-rouge\"\u003e#a\u003c/code\u003e\u003c/a\u003e — \u003cimg class=\"inline-image\" alt=\"#a\" src=\"https://a.allegroimg.com/original/34901c/db3b33c5488eb13bc5244e215953/illustration-allegro-in-circle-big-ab3336c0b3#a\" /\u003e\u003c/li\u003e\n  \u003cli\u003e\u003ca href=\"https://a.allegroimg.com/original/34901c/db3b33c5488eb13bc5244e215953/illustration-allegro-in-circle-big-ab3336c0b3#border\"\u003e\u003ccode class=\"language-plaintext highlighter-rouge\"\u003e#border\u003c/code\u003e\u003c/a\u003e — \u003cimg class=\"inline-image\" alt=\"#border\" src=\"https://a.allegroimg.com/original/34901c/db3b33c5488eb13bc5244e215953/illustration-allegro-in-circle-big-ab3336c0b3#border\" /\u003e\u003c/li\u003e\n  \u003cli\u003e\u003ca href=\"https://a.allegroimg.com/original/34901c/db3b33c5488eb13bc5244e215953/illustration-allegro-in-circle-big-ab3336c0b3#shadow\"\u003e\u003ccode class=\"language-plaintext highlighter-rouge\"\u003e#shadow\u003c/code\u003e\u003c/a\u003e — \u003cimg class=\"inline-image\" alt=\"#shadow\" src=\"https://a.allegroimg.com/original/34901c/db3b33c5488eb13bc5244e215953/illustration-allegro-in-circle-big-ab3336c0b3#shadow\" /\u003e\u003c/li\u003e\n  \u003cli\u003e\u003ca href=\"https://a.allegroimg.com/original/34901c/db3b33c5488eb13bc5244e215953/illustration-allegro-in-circle-big-ab3336c0b3#icon\"\u003e\u003ccode class=\"language-plaintext highlighter-rouge\"\u003e#icon\u003c/code\u003e\u003c/a\u003e — \u003cimg class=\"inline-image\" alt=\"#icon\" src=\"https://a.allegroimg.com/original/34901c/db3b33c5488eb13bc5244e215953/illustration-allegro-in-circle-big-ab3336c0b3#icon\" /\u003e\u003c/li\u003e\n\u003c/ol\u003e\n\n\u003cp\u003eNow, the regular fragment-less URL will display a blank image.\nThus, for the full icon, we’re going to add a \u003ca href=\"https://a.allegroimg.com/original/34c91a/651290b94002acbe836ae520e8ff/illustration-allegro-in-circle-big-ab3336c0b3#icon\"\u003e\u003ccode class=\"language-plaintext highlighter-rouge\"\u003e#icon\u003c/code\u003e\u003c/a\u003e fragment to the URL.\u003c/p\u003e\n\n\u003cp\u003eWe won’t use the \u003ccode class=\"language-plaintext highlighter-rouge\"\u003e#a\u003c/code\u003e fragment, but let’s keep its identifier.\u003c/p\u003e\n\n\u003ch3 id=\"step-2--css-masks\"\u003eStep #2 — CSS Masks\u003c/h3\u003e\n\n\u003cp\u003eWith SVG Fragment Identifiers up and ready, we can use CSS Masks.\u003c/p\u003e\n\n\u003cp\u003eThe base class \u003ccode class=\"language-plaintext highlighter-rouge\"\u003e.icon\u003c/code\u003e stacks three layers on top of each other, ready for a mask.\u003c/p\u003e\n\n\u003cdiv class=\"language-css highlighter-rouge\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight\"\u003e\u003ccode\u003e\u003cspan class=\"nc\"\u003e.icon\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"nl\"\u003eposition\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"nb\"\u003erelative\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"nl\"\u003ewidth\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"m\"\u003e32px\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"nl\"\u003eheight\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"m\"\u003e32px\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"py\"\u003emask-repeat\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"nb\"\u003eno-repeat\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"nl\"\u003ebackground-color\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003ecurrentColor\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"nc\"\u003e.icon\u003c/span\u003e\u003cspan class=\"nd\"\u003e::before\u003c/span\u003e\u003cspan class=\"o\"\u003e,\u003c/span\u003e\n\u003cspan class=\"nc\"\u003e.icon\u003c/span\u003e\u003cspan class=\"nd\"\u003e::after\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"nl\"\u003econtent\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"s2\"\u003e''\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"nl\"\u003eposition\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"nb\"\u003eabsolute\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"nl\"\u003ewidth\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"nb\"\u003einherit\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"nl\"\u003eheight\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"nb\"\u003einherit\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"nl\"\u003ebackground-color\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"nb\"\u003einherit\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eThe last CSS class is for our specific icon.\u003c/p\u003e\n\n\u003cdiv class=\"language-css highlighter-rouge\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight\"\u003e\u003ccode\u003e\u003cspan class=\"nc\"\u003e.icon--a\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"py\"\u003emask-image\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"sx\"\u003eurl('./a.svg#icon')\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"c\"\u003e/* full icon’s shape */\u003c/span\u003e\n  \u003cspan class=\"nl\"\u003ecolor\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"m\"\u003e#FF7B33\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"nc\"\u003e.icon--a\u003c/span\u003e\u003cspan class=\"nd\"\u003e::before\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"py\"\u003emask-image\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"sx\"\u003eurl('./a.svg#shadow')\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"c\"\u003e/* shadow’s shape */\u003c/span\u003e\n  \u003cspan class=\"nl\"\u003ecolor\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"m\"\u003e#D9DFE4\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"nc\"\u003e.icon--a\u003c/span\u003e\u003cspan class=\"nd\"\u003e::after\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"py\"\u003emask-image\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"sx\"\u003eurl('./a.svg#border')\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"c\"\u003e/* border’s shape */\u003c/span\u003e\n  \u003cspan class=\"nl\"\u003ecolor\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"m\"\u003e#B0B8BC\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eThe critical part is that we picked the whole icon, not any fragment, as the parent’s mask, so we have the entire icon visible.\nThat’s because the parent layer masks its children.\u003c/p\u003e\n\n\u003cp\u003eWe selected the orange color of the \u003ccode class=\"language-plaintext highlighter-rouge\"\u003ea\u003c/code\u003e for the parent layer.\nThen, we put the two remaining layers on top of it.\nThe second and third layers are for shadow and border parts, respectively.\u003c/p\u003e\n\n\u003cp\u003e\u003cstrong\u003eWe can describe this as the whole icon in single color covered by one or more shapes in different colors.\u003c/strong\u003e\u003c/p\u003e\n\n\u003cp\u003eWhen an icon has intersecting parts, there’s one thing to keep in mind.\nBackgrounds render on top of each other in a particular order:\u003c/p\u003e\n\u003col\u003e\n  \u003cli\u003ethe parent’s background,\u003c/li\u003e\n  \u003cli\u003ethe \u003ccode class=\"language-plaintext highlighter-rouge\"\u003e::before\u003c/code\u003e pseudo-element’s background,\u003c/li\u003e\n  \u003cli\u003ethe \u003ccode class=\"language-plaintext highlighter-rouge\"\u003e::after\u003c/code\u003e’s background at the end.\u003c/li\u003e\n\u003c/ol\u003e\n\n\u003cp\u003eAs a result, we can embed the icon by a single element.\u003c/p\u003e\n\n\u003cdiv class=\"language-html highlighter-rouge\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight\"\u003e\u003ccode\u003e\u003cspan class=\"nt\"\u003e\u0026lt;div\u003c/span\u003e \u003cspan class=\"na\"\u003eclass=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"icon icon--a\"\u003c/span\u003e \u003cspan class=\"na\"\u003earia-hidden=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"true\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u0026lt;/div\u0026gt;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eLet’s also consider accessibility.\nUsually, icons are \u003ca href=\"https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Attributes/aria-hidden#description\"\u003epurely decorative content\u003c/a\u003e.\nThat’s why we remove them from the accessibility tree by \u003ccode class=\"language-plaintext highlighter-rouge\"\u003earia-hidden=\"true\"\u003c/code\u003e.\u003c/p\u003e\n\n\u003cp\u003eThe result is supposed to look like the original icon from the start —\n\u003cimg class=\"inline-image\" alt=\"the original icon from the beginning\" src=\"https://a.allegroimg.com/original/34412f/ae71613e49d986c5c838698e2e86/illustration-allegro-in-circle-big-db0c91e439\" /\u003e.\u003c/p\u003e\n\n\u003cp\u003eNow, the single element gives us control over up to three parts of our icon.\nMoreover, we can change colors independently and dynamically.\u003c/p\u003e\n\n\u003ch2 id=\"the-demo\"\u003eThe demo\u003c/h2\u003e\n\u003cp\u003eFeel free to check the \u003ca href=\"https://mpsuszko.github.io/three-colors-one-element-icon/\"\u003edemo\u003c/a\u003e.\u003c/p\u003e\n\n\u003cp\u003ePretty neat.\u003c/p\u003e\n\n\u003cp\u003eWe found this technique practical, and we’re keen to use it in the future.\u003c/p\u003e\n\n\u003ch2 id=\"more-colors\"\u003eMore colors\u003c/h2\u003e\n\u003cp\u003eIf you need more than 3 colors, switch from pseudo-elements to regular elements. Then, you can stack as many layers as you want.\nAnother option is to combine \u003ccode class=\"language-plaintext highlighter-rouge\"\u003ebackground-image\u003c/code\u003e with gradients instead of \u003ccode class=\"language-plaintext highlighter-rouge\"\u003ebackground-color\u003c/code\u003e.\u003c/p\u003e\n\n\u003cp\u003eEnjoy \u0026amp; use the platform ❤️\u003c/p\u003e\n","contentSnippet":"Hello, fellow Web developers!\nIcons are an integral part of most modern UIs.\nWhat is the best way to embed icons nowadays?\nThis area is full of pitfalls.\nYou better proceed with caution when trying to answer that question.\nThough there are many possibilities, some of which are considered harmful.\nVarious inline SVG techniques have become more popular over time. Possibly due to the lack of suitable alternatives, although not using the cache is a huge trade-off.\nThankfully, there are some voices of reason in the community.\nAt Allegro, we’ve been using SVG and CSS filters for quite some time.\nHowever, they have their limits and could be better suited for the challenges of the themeable design system.\nLet’s pause for a moment and rethink the approach to icons.\nIt has to meet several requirements:\nthemeable,\ncacheable,\neasily embeddable.\nCan we do better than we’ve been doing so far?\n\nAll the tools needed to perform the trick have been available in major browsers for at least few years.\nIs it possible everyone just failed to connect the dots?\nIt turns out that the platform is capable of dealing with icons more efficiently.\nLet us introduce the SVG+CSS technique. It lets you have a 3-color icon using just one DOM element and one external SVG.\nWe have found nothing similar, whether online or with ChatGPT, which makes us want to share this idea with you even more.\nConsider the proposed technique if you care about performance.\nKey benefits are:\nCaching.\nWorks cross-domain.\nCustomizable more than a single color.\nIcons load after critical resources and content, not bloating the markup.\nWe will control the colors of 3 different parts with a single DOM element and SVG resource.\nSounds interesting? Then, let’s dive into how we can accomplish this.\nImplementation\nSVG and CSS are gifts that keep giving and can do wonders combined.\nThe proposed technique is a combination of two platform capabilities.\nSVG Fragments\nCSS Masks\nSVG Fragments aren’t really a new technology.\nAbout five years ago, we considered using CSS masks, but we still supported IE back then.\nAt that time, we had not yet thought of combining it with fragments.\nAs a case study let’s pick one of our icons —\n.\nWith the following source:\n\n\u003csvg viewBox=\"0 0 32 32\" fill=\"none\" height=\"32\" width=\"32\" xmlns=\"http://www.w3.org/2000/svg\"\u003e\n  \u003cpath d=\"...\" fill=\"#B0B8BC\"\u003e\u003c/path\u003e\n  \u003cpath clip-rule=\"evenodd\" d=\"...\" fill-rule=\"evenodd\" fill=\"#FF7B33\"\u003e\u003c/path\u003e\n  \u003cpath d=\"...\" fill=\"#D9DFE4\"\u003e\u003c/path\u003e\n\u003c/svg\u003e\n\n\nThis particular icon consists of 3 parts, each with a different color.\nNow, we’re going to control these colors with the document’s CSS.\nIt’s time to program in SVG and CSS for a moment.\nStep #1 — SVG Fragments\nFirst, let’s craft our test subject and introduce the fragments.\nEach path gets a unique Fragment Identifier by setting an id attribute.\nNext, we add a little CSS to enable rendering fragments in isolation. Think of it as an image sprite.\nFor the sake of CSS simplicity, we also group all the paths under an extra g element with a unique id.\nAs a result, the SVG is supposed to look like this:\n\n\u003csvg viewBox=\"0 0 32 32\" fill=\"none\" height=\"32\" width=\"32\" xmlns=\"http://www.w3.org/2000/svg\"\u003e\n  \u003cstyle\u003e\n    path:not(:target) {\n      display: none;\n    }\n    g:target path {\n      display: inline;\n    }\n  \u003c/style\u003e\n  \u003cg id=\"icon\"\u003e\n    \u003cpath id=\"border\" d=\"...\" fill=\"#B0B8BC\"\u003e\u003c/path\u003e\n    \u003cpath id=\"a\" clip-rule=\"evenodd\" d=\"...\" fill-rule=\"evenodd\" fill=\"#FF7B33\"\u003e\u003c/path\u003e\n    \u003cpath id=\"shadow\" d=\"...\" fill=\"#D9DFE4\"\u003e\u003c/path\u003e\n  \u003c/g\u003e\n\u003c/svg\u003e\n\n\nIt produces 4 fragments, one for each of the three paths and the last for the whole icon. Each of them can now be rendered as a separate image:\n#a — \n#border — \n#shadow — \n#icon — \nNow, the regular fragment-less URL will display a blank image.\nThus, for the full icon, we’re going to add a #icon fragment to the URL.\nWe won’t use the #a fragment, but let’s keep its identifier.\nStep #2 — CSS Masks\nWith SVG Fragment Identifiers up and ready, we can use CSS Masks.\nThe base class .icon stacks three layers on top of each other, ready for a mask.\n\n.icon {\n  position: relative;\n  width: 32px;\n  height: 32px;\n  mask-repeat: no-repeat;\n  background-color: currentColor;\n}\n.icon::before,\n.icon::after {\n  content: '';\n  position: absolute;\n  width: inherit;\n  height: inherit;\n  background-color: inherit;\n}\n\n\nThe last CSS class is for our specific icon.\n\n.icon--a {\n  mask-image: url('./a.svg#icon'); /* full icon’s shape */\n  color: #FF7B33;\n}\n.icon--a::before {\n  mask-image: url('./a.svg#shadow'); /* shadow’s shape */\n  color: #D9DFE4;\n}\n.icon--a::after {\n  mask-image: url('./a.svg#border'); /* border’s shape */\n  color: #B0B8BC;\n}\n\n\nThe critical part is that we picked the whole icon, not any fragment, as the parent’s mask, so we have the entire icon visible.\nThat’s because the parent layer masks its children.\nWe selected the orange color of the a for the parent layer.\nThen, we put the two remaining layers on top of it.\nThe second and third layers are for shadow and border parts, respectively.\nWe can describe this as the whole icon in single color covered by one or more shapes in different colors.\nWhen an icon has intersecting parts, there’s one thing to keep in mind.\nBackgrounds render on top of each other in a particular order:\nthe parent’s background,\nthe ::before pseudo-element’s background,\nthe ::after’s background at the end.\nAs a result, we can embed the icon by a single element.\n\n\u003cdiv class=\"icon icon--a\" aria-hidden=\"true\"\u003e\u003c/div\u003e\n\n\nLet’s also consider accessibility.\nUsually, icons are purely decorative content.\nThat’s why we remove them from the accessibility tree by aria-hidden=\"true\".\nThe result is supposed to look like the original icon from the start —\n.\nNow, the single element gives us control over up to three parts of our icon.\nMoreover, we can change colors independently and dynamically.\nThe demo\nFeel free to check the demo.\nPretty neat.\nWe found this technique practical, and we’re keen to use it in the future.\nMore colors\nIf you need more than 3 colors, switch from pseudo-elements to regular elements. Then, you can stack as many layers as you want.\nAnother option is to combine background-image with gradients instead of background-color.\nEnjoy \u0026 use the platform ❤️","guid":"https://blog.allegro.tech/2024/01/embed-multicolor-icons-using-a-single-DOM-element.html","categories":["tech","web","svg","css","html"],"isoDate":"2024-01-09T23:00:00.000Z"},{"title":"Clever, surprised and gray-haired","link":"https://blog.allegro.tech/2023/12/lmdb-postmortem.html","pubDate":"Thu, 14 Dec 2023 00:00:00 +0100","authors":{"author":[{"name":["Tomasz Ziółkowski"],"photo":["https://blog.allegro.tech/img/authors/tomasz.ziolkowski.jpg"],"url":["https://blog.allegro.tech/authors/tomasz.ziolkowski"]}]},"content":"\u003cp\u003eThis article is a form of a public postmortem in which we would like to share our bumpy way of revealing the cause of a mysterious performance problem.\nBesides unveiling part of our technical stack based on open-source solutions, we also show how some false assumptions made such a bug triage process much\nharder.\nBesides all NOT TO DOs, you can find some exciting information about performance hunting and reproducing performance issues on a small scale.\nAs a perk, we prepared a \u003ca href=\"https://github.com/ziollek/lmdb-modsecurity-perf-issue\"\u003erepository\u003c/a\u003e where you can reproduce the problem and make yourself familiar with tools\nthat allowed us to confirm the cause.\nThe last part (lessons learned) is the most valuable if you prefer to learn from the mistakes of others.\u003c/p\u003e\n\n\u003cp\u003eBefore you start reading, I must warn you that it will be a pretty long story, and following it without technical knowledge will be challenging.\nHowever, I tried my best to simplify the technicalities as much as possible. If, despite all discouragement, you are interested in solving technical mysteries,\ntake a sip of coffee and enjoy the story!\u003c/p\u003e\n\n\u003ch2 id=\"clever-what-have-we-built\"\u003eClever: what have we built?\u003c/h2\u003e\n\n\u003cp\u003eA few years ago, we researched several platforms that can be used as \u003cem\u003etransparent HTTP proxies\u003c/em\u003e capable of handling HTTP traffic to our services.\nWe needed a solution that would be able to inspect metadata and user data against any suspicious patterns and decide if such traffic should be processed or banned.\nWe chose \u003ca href=\"https://nginx.org/en/docs/\"\u003enginx\u003c/a\u003e in concert with \u003ca href=\"https://github.com/SpiderLabs/ModSecurity\"\u003eModSecurity\u003c/a\u003e as a foundation for a more complex\necosystem.\u003c/p\u003e\n\n\u003cp\u003eDuring increasing usage of such a stack, more than simple non-contextual rules was needed for more complex traffic analysis. One of the most crucial needs was providing the ability to store some contextual information connected\nwith session activity in order to better recognize malicious patterns.\nBy default, \u003cem\u003eModSecurity\u003c/em\u003e allows storing contextual information in memory. Such an approach is not very useful in connection with HTTP servers that utilize\nmultiprocessing as \u003cem\u003enginx\u003c/em\u003e does.\u003c/p\u003e\n\n\u003cp\u003e\u003cimg src=\"/img/articles/2023-12-14-lmdb-postmortem/nginx-in-memory.png\" alt=\"In-memory approach\" /\u003e\u003c/p\u003e\n\n\u003cp\u003eHowever, we learned that \u003cem\u003eModSecurity\u003c/em\u003e can use \u003ca href=\"http://www.lmdb.tech/doc/\"\u003eLMDB\u003c/a\u003e as an internal fast storage for contextual information that could be\nshared between requests that come, for example, from the same IP address. \u003cem\u003eLMDB\u003c/em\u003e approach ensures that contextual information stored by one nginx worker process\nis accessible by others.\u003c/p\u003e\n\n\u003cp\u003e\u003cimg src=\"/img/articles/2023-12-14-lmdb-postmortem/nginx-with-lmdb.png\" alt=\"LMDB approach\" /\u003e\u003c/p\u003e\n\n\u003cp\u003eAt first glance, it looks great; however, in our case, we could not rely on information that is stored directly by \u003cem\u003eModSecurity\u003c/em\u003e.\nAs you can imagine, our setup is based on more than one server, so we have to be able to pass the same contextual information to each of them.\nMoreover, our algorithms that compute such information are complex and reach for more data than those available to ModSecurity.\u003c/p\u003e\n\n\u003cp\u003eNevertheless, \u003cem\u003eLMDB\u003c/em\u003e has one great advantage: it allows connecting to it from outside the \u003cem\u003enginx\u003c/em\u003e process and altering the contextual data that is available to\n\u003cem\u003eModSecurity\u003c/em\u003e.\nWe built a mechanism that syncs contextual information from dedicated service to LMDB on each transparent proxy host.\nA simplified view of the architecture that allows computing and synchronizing contextual information is depicted below (dotted lines represent asynchronous flow):\u003c/p\u003e\n\n\u003cp\u003e\u003cimg src=\"/img/articles/2023-12-14-lmdb-postmortem/nginx-architecture.png\" alt=\"Final architecture\" /\u003e\u003c/p\u003e\n\n\u003cp\u003eSuch a PoC gave us promising results regarding how fast the contextual information could be provided and how fast it was retrieved by \u003cem\u003eModSecurity\u003c/em\u003e.\nFinally, we rolled out the new approach, and everything worked smoothly for such a long time that we assumed it was a rock-solid solution.\u003c/p\u003e\n\n\u003ch2 id=\"surprised-once-upon-a-time-the-problem-occurred-for-the-first-time\"\u003eSurprised: once upon a time, the problem occurred for the first time\u003c/h2\u003e\n\n\u003cp\u003eWe noticed that response time from the client’s perspective soared, and the number of established connections also increased.\nSuch a correlation is not strange and was noticed many times in the past when the upstream that handles requests from proxy started responding slower.\nWhat was mysterious in that case was that there was no evidence of a problem on the upstream side besides the metric from \u003cem\u003enginx\u003c/em\u003e that was based on\n\u003cem\u003e$upstream_connect_time\u003c/em\u003e.\nAccording to that metric, connecting to the upstream had slowed down significantly.\u003c/p\u003e\n\n\u003cp\u003eHaving such \u003cem\u003ea clue\u003c/em\u003e we blamed the part of infrastructure that is always to blame if no one knows what is happening.\nAs you probably guessed, we assumed that was a temporary network issue (from my experience, it is the best justification to not dig more profound).\nUnfortunately, \u003cem\u003ethe network issue\u003c/em\u003e started occurring quite often, at least a few times a week.\nStrangely enough, if we disable the transparent proxy, the network seems to be stable. Once again, we were convinced that someone from the network team devised blameless culture.\nHence, we started to verify a lot of new hypotheses, from those scary (cyber war, specialized attacks that are hidden in regular traffic) to those that bring\nsmiles upon our faces at least for today (backdoor left by \u003cem\u003eRussian spy\u003c/em\u003e in the nginx source code).\nFalsification of those hypotheses that were at least partially backed up by data is a great story about how to teach engineers that correlation does not mean\ncausation.\u003c/p\u003e\n\n\u003ch2 id=\"turn-gray-investigation\"\u003eTurn gray: investigation\u003c/h2\u003e\n\n\u003cp\u003eLet me introduce a simplified view of our infrastructure to show where we gathered data.\u003c/p\u003e\n\n\u003cp\u003e\u003cimg src=\"/img/articles/2023-12-14-lmdb-postmortem/proxy-chain.png\" alt=\"Proxy chain\" /\u003e\u003c/p\u003e\n\n\u003cp\u003eAll proxies measure at least the total processing time, including the time consumed in the proxy and the time that was consumed outside the proxy (passing the\nrequest to the next server in the above chain and waiting for the response).\nAnd those parts could be analyzed independently. Based on such measurements, we can simply compute the approximate overhead of the proxy as a difference between the whole\nrequest (green box) processing and the upstream (red box) waiting.\nHaving that, we were able to discover that the time consumed in transparent proxy was not increased significantly; only the time consumed outside of proxy was\nraised (red box).\nIt was one of the big lies that hindered revealing the truth. You can find a broader explanation of misleading metrics in the lessons learned part.\nAfter excluding network issues, and upstream issues, we were pretty sure that the problem lay in transparent proxy, and we started to doubt what we saw in\nmetrics.\nIt took a while, but finally, we were able to break our unwavering trust in data. Relying on data is encoded in our company DNA, so trusting it was a natural\ninstinct, unfortunately, a bad one in this case.\u003c/p\u003e\n\n\u003cp\u003eHaving that, we could not rely on metrics provided by a transparent proxy. We were starting to try out other means to measure what was going on inside the\ntransparent proxy.\nBeing biased by network issues, we started gathering a lot of network-related information that only showed correlations with problems, but it did not give any\nclues about what was happening.\u003c/p\u003e\n\n\u003cp\u003eIt was a time to use the more straightforward but quite heavy solution - access logs. However, logs are not very useful in giving the overall condition of the proxy;\nthey can be beneficial in analyzing singular problems.\nWhen the problems occurred again, we had some data that we could scrutinize. It turned out that an excellent idea was to log exact timestamps in\na very high resolution (which was not default).\nBelow, you can see a real example reproduced in the local environment (which will be described later).\nEach line contains nginx worker process id, timestamp, request_time, upstream_request_time, upstream_connect_time and the response status code.\u003c/p\u003e\n\u003cpre\u003e\npid:41 t:1700163031.929 rt:\u003cb\u003e8.990\u003c/b\u003e urt:\u003cb\u003e8.990\u003c/b\u003e uct:\u003cb\u003e7.128\u003c/b\u003e status:200\npid:41 t:1700163031.929 rt:12.348 urt:12.348 uct:3.358 status:200\npid:41 t:1700163031.929 rt:\u003cb\u003e8.990\u003c/b\u003e urt:\u003cb\u003e8.990\u003c/b\u003e uct:\u003cb\u003e7.128\u003c/b\u003e status:200\npid:41 t:1700163031.929 rt:\u003cb\u003e8.990\u003c/b\u003e urt:\u003cb\u003e8.990\u003c/b\u003e uct:\u003cb\u003e7.128\u003c/b\u003e status:200\n\u003c/pre\u003e\n\n\u003cp\u003eIt turned out that very often information was logged in bursts with exactly the same timestamp, what was even more intriguing was that some of such entries\nreported the exact same time as an \u003cem\u003e$upstream_request_time\u003c/em\u003e or \u003cem\u003e$upstream_connect_time\u003c/em\u003e.\nLet’s say that even if you are keen on paranormal mystery, odds, that’s the moment when the big red light should start blinking.\nIt definitely looks like something deterministic, not random. In the production realm, it was even more interesting; some bursts were connected with each other\nin some strange arithmetic way - for example:\u003c/p\u003e\n\n\u003cp\u003eLet’s define bursts as:\u003c/p\u003e\n\u003cblockquote\u003e\n  \u003cp\u003eB1, B2, B3 - bursts\u003c/p\u003e\n\n  \u003cp\u003eB1.TS - timestamp of the burst\u003c/p\u003e\n\n  \u003cp\u003eB3.urt, B3.uct - upstream_request_time, upstream_connect_time - reported during last burst\u003c/p\u003e\n\u003c/blockquote\u003e\n\n\u003cp\u003ethen such relation was often noticed:\u003c/p\u003e\n\n\u003cblockquote\u003e\n  \u003cp\u003eB1.TS + B3.uct = B2.TS\u003c/p\u003e\n\n  \u003cp\u003eB1.TS + B3.urt = B3.TS\u003c/p\u003e\n\u003c/blockquote\u003e\n\n\u003cp\u003eTo better understand such a relation, let’s draw it:\u003c/p\u003e\n\n\u003cp\u003e\u003cimg src=\"/img/articles/2023-12-14-lmdb-postmortem/bursts-relationship.png\" alt=\"Bursts relation\" /\u003e\u003c/p\u003e\n\n\u003cp\u003eHaving a clue that there are extended periods of time when processing for a particular process is stuck, we wanted to know what was going on when processes hung.\nWe used strace to preview what particular system calls were made during such problems. The challenge was to connect to the process when problems occur,\nbut fortunately for us (and less fortunately for our users) we did not wait a long time for the subsequent instability, and we were able to gather strace data.\nIt reveals a large number of \u003ca href=\"https://en.wikipedia.org/wiki/Futex\"\u003efutex\u003c/a\u003e calls that indicated active waiting for some barer / mutex.\u003c/p\u003e\n\n\u003ch2 id=\"connecting-the-dots\"\u003eConnecting the dots\u003c/h2\u003e\n\n\u003cp\u003eAs it was announced earlier, on that stage we have three actors. In order to better understand what was happening under the hood, let’s take a closer look at\neach of them.\u003c/p\u003e\n\n\u003cp\u003eFirst of all \u003cem\u003enginx\u003c/em\u003e server, it uses\n\u003ca href=\"https://www.nginx.com/blog/inside-nginx-how-we-designed-for-performance-scale/\"\u003ean asynchronous event-driven approach to handling connections\u003c/a\u003e.\nIt means that a single \u003cem\u003enginx\u003c/em\u003e worker can process a large number of requests simultaneously basically because a significant part of processing a single request\nhappens outside the worker. Instead of actively waiting for a response, the nginx process uses such spare time to handle new incoming requests.\nEverything works very efficiently as long as each blocking (IO consuming) operation is handled in an asynchronous manner\n(the control is returned to event-loop).\nWhen such a requirement is unmet, the processing pace slows dramatically.\u003c/p\u003e\n\n\u003cp\u003eThe second actor is the ModSecurity-nginx plugin. \u003cem\u003eNginx\u003c/em\u003e plugins allow extending the logic of the server by adding custom logic.\nModSecurity-nginx plugin allows inspecting requests processed by nginx against \u003cem\u003eModSecurity\u003c/em\u003e rules.\nSuch inspection can be considered a CPU-bound operation, so even if it is called in a synchronous manner, it does not break the concept of processing\nblocking operations asynchronously.\u003c/p\u003e\n\n\u003cp\u003eThe third one is \u003cem\u003eLMDB\u003c/em\u003e, a very efficient mapped DB that allows \u003cstrong\u003econcurrent reads and exclusive writes\u003c/strong\u003e. This database was used as a storage for ModSecurity\ncollections in order to share a state of collections between nginx workers.\nThe documentation and source code of this relatively small project were scrutinized many times as well as integration between ModSecurity and \u003cem\u003eLMDB\u003c/em\u003e, but there\nwas no suspicion of what could be wrong.\u003c/p\u003e\n\n\u003cp\u003eFinally, it turned out that the version of \u003cem\u003eModSecurity\u003c/em\u003e that we scrutinized was from the master branch. Moreover, the master branch contained an improvement related to misusing\n\u003cem\u003eLMDB\u003c/em\u003e exclusive transactions while reading the data. Given that, we had a justified belief that issues came from exclusive transactions. It means that\nnginx workers probably block on acquiring locks.\u003c/p\u003e\n\n\u003cp\u003e\u003cimg src=\"/img/articles/2023-12-14-lmdb-postmortem/locking.png\" alt=\"Exclusive locking\" /\u003e\u003c/p\u003e\n\n\u003ch2 id=\"reproducing-the-issue-in-the-isolated-environment\"\u003eReproducing the issue in the isolated environment\u003c/h2\u003e\n\n\u003cp\u003eTo reproduce the issue, we decided to use a technique that we called a fancy name: \u003cem\u003eexaggeration\u003c/em\u003e.\nReproducing a problem that occurs under high traffic that is handled by powerful servers is not simple on a local workstation.\nHowever, in this case, we had some clues and justified hypotheses about what could be wrong and what part we should focus on.\nLet me explain what exaggeration means when it comes to reproducing a problem.\nSome sort of problems can be easily noticeable when the probability of the occurrence of rare events is raised to a significant level.\nIf we have different ways to increase such probability, we can use them interchangeably. I am aware that it sounds like theoretical physics, but believe me or\nnot our problems are relatively easier to solve than those worked on by the guys at LHC.\u003c/p\u003e\n\n\u003cp\u003eIn our case, we were pretty sure that the number of concurrent lookups on a single server to \u003cem\u003eModSecurity\u003c/em\u003e collections is a rare event.\nSo instead of loading a local server in enormous traffic we significantly increased the number of lookups to \u003cem\u003eLMDB\u003c/em\u003e that were performed for each processed\nrequest.\u003c/p\u003e\n\n\u003cp\u003eAll below information is based on data that can be gathered from the docker\n\u003ca href=\"https://github.com/ziollek/lmdb-modsecurity-perf-issue#what-does-the-environment-consist-of\"\u003eenvironment\u003c/a\u003e that was prepared as an integral part of this article.\nIt is worth mentioning that the environment can be built in one of two modes:\u003c/p\u003e\n\u003cul\u003e\n  \u003cli\u003eregular that is way faster when it comes to building process\u003c/li\u003e\n  \u003cli\u003eprofiling that allows revealing the exact point where nginx processes hang based on profiling information from the kernel\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eI would not like to deep dive into the profiling process based on kernel capabilities, but it is very cumbersome in a containerized environment because\nit breaks the isolation paradigm.\nMoreover, it is hard to prepare due to compatibility requirements between host and container libraries, header files and compilers.\nHowever, for this particular purpose it was tempting to use limited profiling tools based on \u003ca href=\"https://ebpf.io/\"\u003eeBPF\u003c/a\u003e that do not have such restricted\nrequirements.\u003c/p\u003e\n\n\u003cp\u003eThe first part of the reproducing process is feeding \u003cem\u003eLMDB\u003c/em\u003e collections\nwith \u003ca href=\"https://github.com/ziollek/lmdb-modsecurity-perf-issue#preparing-sample-data\"\u003esample data\u003c/a\u003e.\nWhen the collections are prepared, we can run \u003ca href=\"https://github.com/ziollek/lmdb-modsecurity-perf-issue#testing-performance\"\u003eperformance tests using ab\u003c/a\u003e.\nBy increasing the number of lookups against \u003cem\u003eLMDB\u003c/em\u003e collections during each request, it is relatively simple to reproduce low performance.\nAnalysis of access logs revealed the bursts mentioned in investigation part.\u003c/p\u003e\n\n\u003cp\u003eThe more interesting part was finding the exact place that caused hangs. We started from the entry point (for call inspection of the request headers) to\n\u003cem\u003eModSecurity\u003c/em\u003e from the nginx plugin, namely \u003cstrong\u003emsc_process_request_headers\u003c/strong\u003e function.\nWe helped ourselves with a tool \u003ca href=\"https://manpages.debian.org/unstable/bpfcc-tools/trace-bpfcc.8.en.html\"\u003etrace-bpfcc\u003c/a\u003e provided within package \u003cstrong\u003ebpfcc-tools\u003c/strong\u003e.\nBesides all other features, that tool allows logging the exact point in time when a particular function is called and when it is finished.\nWhen we analyzed the time spent on such a function, we realized that was the exact place where we should dig deeper:\u003c/p\u003e\n\n\u003cpre\u003e\ntrace-bpfcc -t  'p:/usr/local/modsecurity/lib/libmodsecurity.so.3.0.6:msc_process_request_headers \"start\"' \\\n  'r:/usr/local/modsecurity/lib/libmodsecurity.so.3.0.6:msc_process_request_headers \"stop\"' \\\n  'r:/usr/local/modsecurity/lib/libmodsecurity.so.3.0.6:msc_process_logging \"stop\"' 2\u0026gt;/dev/null\n\nTIME     PID     TID     COMM            FUNC             -\n..\n\u003cb\u003e3.981139 10842   10842   nginx           msc_process_request_headers start\u003c/b\u003e\n6.296459 10847   10847   nginx           msc_process_request_headers stop\n6.297111 10847   10847   nginx           msc_process_request_headers start\n6.309465 10844   10844   nginx           msc_process_request_headers stop\n6.310118 10844   10844   nginx           msc_process_request_headers start\n\u003cb\u003e6.314868 10842   10842   nginx           msc_process_request_headers stop\u003c/b\u003e\n6.319024 10840   10840   nginx           msc_process_request_headers stop\n6.323392 10839   10839   nginx           msc_process_request_headers stop\n6.328587 10837   10837   nginx           msc_process_request_headers stop\n6.332937 10843   10843   nginx           msc_process_request_headers stop\n6.338358 10841   10841   nginx           msc_process_request_headers stop\n6.339536 10841   10841   nginx           msc_process_request_headers start\n6.349181 10845   10845   nginx           msc_process_request_headers stop\n6.367007 10838   10838   nginx           msc_process_request_headers stop\n6.368100 10838   10838   nginx           msc_process_request_headers start\n\u003cb\u003e6.522875 10842   10842   nginx           msc_process_logging stop\u003c/b\u003e\n...\n\u003c/pre\u003e\n\n\u003cp\u003ePlease pay attention to highlighted lines related to PID=10842.\nIt turned out that the upstream responded within the required time (in the prepared environment, we are able to control the upstream latency by part of the URL path):\n6.522875 - 6.314868 ~ 200ms.\nHowever, the rest of time: \u003cem\u003e6.314868 - 3.981139 ~ 2.230s\u003c/em\u003e is consumed in \u003cstrong\u003emsc_process_request_headers\u003c/strong\u003e, when we search for the access log entry related to\nthis processing we can see:\u003c/p\u003e\n\n\u003cpre\u003e\nconnection:5824 timestamp:1700222187.657 request_time:2.440 upstream_response_time:2.439 upstream_connect_time:\u003cb\u003e2.235\u003c/b\u003e upstream_header_time:\u003cb\u003e2.438\u003c/b\u003e status:200 request:(GET /users/200/random?arg=unknown HTTP/1.0)\n\u003c/pre\u003e\n\n\u003cp\u003eI would not bore you with the whole process of tracking down but go directly to the \u003cem\u003eLMDB\u003c/em\u003e \u003cstrong\u003emdb_txn_begin\u003c/strong\u003e function that starts the \u003cem\u003eLMDB\u003c/em\u003e transaction.\nThat function is called for each \u003cem\u003eLMDB\u003c/em\u003e lookup, so there are way more calls than in previous profiling.\nHowever, I prepared a command that allows us to aggregate all time consumed while waiting in that function.\u003c/p\u003e\n\n\u003cdiv class=\"language-plaintext highlighter-rouge\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight\"\u003e\u003ccode\u003e# trace-bpfcc -t 'p:/usr/lib/x86_64-linux-gnu/liblmdb.so.0.0.0:mdb_txn_begin \"start\"' \\\n  'r:/usr/lib/x86_64-linux-gnu/liblmdb.so.0.0.0:mdb_txn_begin \"stop\"' 2\u0026gt;/dev/null | tee /tmp/benchmark.log\n# cat /tmp/benchmark.log  | sort -n | awk '{if ($6 == \"start\") { data[$2] = $1} else { summary += 1000 * ($1 - data[$2]); print $1, $2, 1000 * ($1 - data[$2]) }} END {print \"Total time spent on locking: \", summary, \"ms,  number of calls: \", calls}'\n...\nTotal time spent on locking: 105891ms number of calls:  4064\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eAs a comparison, we can execute the same profiling on version with a fix. Such a version is also available in a prepared environment.\u003c/p\u003e\n\n\u003cdiv class=\"language-plaintext highlighter-rouge\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight\"\u003e\u003ccode\u003ecat /tmp/benchmark.log  | sort -n | awk '{if ($6 == \"start\") { data[$2] = $1} else { calls++; summary += 1000 * ($1 - data[$2]); print $1, $2, 1000 * ($1 - data[$2]) }} END {print \"Total time spent on locking: \", summary, \"ms,  number of calls: \", calls}'\n...\nTotal time spent on locking: 1811.19ms  number of calls:  4064\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch3 id=\"fixing-the-fix\"\u003eFixing the fix\u003c/h3\u003e\n\n\u003cp\u003eAs I have mentioned before, during the investigation we inspected source code that partially solves the problem.\nIt turned out that the fix merged to master does not work at all with the nginx plugin because of some initialization problems.\nThe \u003ca href=\"https://github.com/SpiderLabs/ModSecurity/pull/2688\"\u003ePR\u003c/a\u003e that fixes the found problem has been merged and released in version \u003cem\u003e3.0.7\u003c/em\u003e of \u003cem\u003eModSecurity\u003c/em\u003e.\u003c/p\u003e\n\n\u003ch2 id=\"lessons-learned\"\u003eLessons learned\u003c/h2\u003e\n\n\u003ch3 id=\"make-sure-that-you-inspect-the-exact-version-of-the-source-code-that-you-run\"\u003eMake sure that you inspect the exact version of the source code that you run\u003c/h3\u003e\n\n\u003cp\u003eOne of the struggles that we faced was scrutinizing the version of ModSecurity that had partially fixed the problem with exclusive read access to \u003cem\u003eLMDB\u003c/em\u003e.\nFor sure, we had bad luck that the fix was available in master and not in the last released version that we then used, but at least we can confirm that the\ndevil is in the details.\u003c/p\u003e\n\n\u003ch3 id=\"instrumentation-overhead\"\u003eInstrumentation overhead\u003c/h3\u003e\n\n\u003cp\u003eWhen using such low level profiling methods you have to bear in mind that approach is quite invasive.\nIt means that such observation impacts the observed process.\nIt implies that it is hard to distinguish if we are observing root problems or just a consequence of harnessing very heavy instrumentation.\nSo, it is risky to draw conclusions from such observations.\u003c/p\u003e\n\n\u003ch3 id=\"verify-your-assumptions\"\u003eVerify your assumptions\u003c/h3\u003e\n\n\u003cp\u003eOur lack of understanding of how the particular phases of processing requests are computed led us to the false assumption that we could compute approximate\n\u003cem\u003eModSecurity\u003c/em\u003e overhead by using simple arithmetic: request time - upstream time.\n\u003cimg src=\"/img/articles/2023-12-14-lmdb-postmortem/variables.png\" alt=\"nginx variables\" /\u003e\u003c/p\u003e\n\n\u003cp\u003eIt was one of the biggest mistakes that hindered revealing the truth. It turned out that part of \u003cem\u003eModSecurity\u003c/em\u003e processing was included into upstream time,\nso the red part on above diagram also includes \u003cem\u003eModSecurity\u003c/em\u003e processing that is not part of establishing connection. As a form of self-punishment,\nwe \u003ca href=\"https://github.com/SpiderLabs/ModSecurity-nginx/pull/278\"\u003eextended\u003c/a\u003e the \u003cem\u003enginx-ModSecurity\u003c/em\u003e plugin in such a way that it allows measuring the overhead of\neach \u003cem\u003eModSecurity\u003c/em\u003e phase in a reliable way.\u003c/p\u003e\n\n\u003ch3 id=\"log-timestamps\"\u003eLog timestamps\u003c/h3\u003e\n\n\u003cp\u003eIt may seem redundant because many logger collectors by default add their own timestamp of the moment when log entries are received in the collector.\nHowever, having a timestamp from \u003cstrong\u003ethe moment when the log is produced\u003c/strong\u003e (without any delays) is crucial to reveal suspicious patterns/hangs on the producer\nside that can not be observed if timestamps are affected by random lags.\u003c/p\u003e\n\n\u003ch3 id=\"do-not-abuse-undocumented-behavior\"\u003eDo (not) abuse undocumented behavior\u003c/h3\u003e\n\n\u003cp\u003eOne of the reasons that we faced this issue was abusing usage of \u003cem\u003eModSecurity\u003c/em\u003e collections.\nIn regular and \u003ca href=\"https://github.com/SpiderLabs/ModSecurity/wiki/Reference-Manual-%28v3.x%29#user-content-Persistent_Storage\"\u003edocumented\u003c/a\u003e usage such collections\nare considered to be simple key-value storage.\nWe discovered that under each key, we are able to store a list of values instead of a single value. If you consciously scanned the provided repository\n(especially \u003cem\u003eModSecurity\u003c/em\u003e rules) you could probably find a way to simulate a situation where multiple values are fetched while reading a single key.\nLet’s look at a rule that is available in the repository\u003c/p\u003e\n\n\u003cdiv class=\"language-plaintext highlighter-rouge\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight\"\u003e\u003ccode\u003eSecRule \u0026amp;REQUEST_HEADERS:x-set-sample \"@eq 1\" \"phase:1,setvar:global.sample%{REQUEST_HEADERS:x-set-sample}=%{REQUEST_HEADERS:x-set-sample},log,deny,status:403,id:50,msg:'value of sample header is blocked',tag:'priority:1',tag:'action:deny'\"\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eIf we call above rule with x-set-sample header with subsequent values \u003cem\u003e1, 2, 3\u003c/em\u003e. We can do that by making HTTP requests as below:\u003c/p\u003e\n\u003cdiv class=\"language-plaintext highlighter-rouge\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight\"\u003e\u003ccode\u003eworkstation # docker-compose exec nginx-before-fix bash\nnginx-with-lmdb # curl -I -H'x-set-sample: 1' localhost\nnginx-with-lmdb # curl -I -H'x-set-sample: 2' localhost\nnginx-with-lmdb # curl -I -H'x-set-sample: 3' localhost\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eThen, we can expect that there will be stored three key-value pairs:\u003c/p\u003e\n\u003cul\u003e\n  \u003cli\u003eglobals[sample1]=1\u003c/li\u003e\n  \u003cli\u003eglobals[sample2]=2\u003c/li\u003e\n  \u003cli\u003eglobals[sample3]=3\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eIndeed, when we try to read \u003cem\u003eLMDB\u003c/em\u003e in a very naive approach, values are stored the way we expect. We can see something like that:\u003c/p\u003e\n\u003cdiv class=\"language-plaintext highlighter-rouge\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight\"\u003e\u003ccode\u003enginx-with-lmdb # strings /tmp/modsec-shared-collections\nsample::::sample11\nsample::::sample22\nsample::::sample33\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eThe following rule that is interesting is supposed to check if a value under a particular key is equal to a query param.\nBasically, if the request contains query parameter \u003cstrong\u003earg=1\u003c/strong\u003e, then we check if the value in the collection \u003cstrong\u003eglobal\u003c/strong\u003e, under the key \u003cstrong\u003esample\u003c/strong\u003e is also “1”.\nIf the condition is met then the request will be blocked, which means that \u003cstrong\u003e403\u003c/strong\u003e status code will be returned.\u003c/p\u003e\n\n\u003cdiv class=\"language-plaintext highlighter-rouge\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight\"\u003e\u003ccode\u003eSecRule ARGS_GET \".*\" \"chain,phase:1,log,capture,deny,status:403,id:1001,msg:'value of param %{TX.0} is blocked',setvar:tx.param=%{TX.0}\"\n    SecRule global.sample \"@streq %{tx.param}\" \"t:none\"\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eYou may be confused why we are reading the key \u003cstrong\u003esample\u003c/strong\u003e that was never set.\nLet’s look what happens when we try to make a request with value 1 and -1.\nAs I described earlier, our intention was to check if \u003cstrong\u003eglobal[sample] == 1\u003c/strong\u003e.\u003c/p\u003e\n\n\u003cdiv class=\"language-plaintext highlighter-rouge\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight\"\u003e\u003ccode\u003enginx-with-lmdb  # curl -I \"http://localhost/users/200/random?arg=1\"\nHTTP/1.1 403 Forbidden\nServer: nginx/1.22.0 (Ubuntu)\nDate: Fri, 17 Nov 2023 10:58:39 GMT\nContent-Type: text/html\nContent-Length: 162\nConnection: keep-alive\nnginx-with-lmdb\n\nnginx-with-lmdb  # curl -I \"http://localhost/users/200/random?arg=-1\"\nHTTP/1.1 200\nServer: nginx/1.22.0 (Ubuntu)\nDate: Fri, 17 Nov 2023 10:58:42 GMT\nContent-Type: application/json\nContent-Length: 79\nConnection: keep-alive\n\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eQuite interesting? It turns out that the match is fulfilled for value “1”, and surprisingly there is a log that gives us an insight:\u003c/p\u003e\n\n\u003cdiv class=\"language-plaintext highlighter-rouge\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight\"\u003e\u003ccode\u003enginx-with-lmdb  # tail -5 /var/log/nginx/modsec_audit.log\n---TL9qTmAS---H--\nModSecurity: Access denied with code 403 (phase 1). Matched \"Operator `StrEq' with parameter `' against variable `GLOBAL:sample::::sample1' (Value: `1' ) [file \"/etc/nginx/rules/rules.conf\"] [line \"32\"] [id \"1001\"] [rev \"\"] [msg \"value of param 1 is blocked\"] [data \"\"] [severity \"0\"] [ver \"\"] [maturity \"0\"] [accuracy \"0\"] [hostname \"127.0.0.1\"] [uri \"/users/200/random\"] [unique_id \"1700218719\"] [ref \"o0,1v27,1\"]\n\n---TL9qTmAS---Z--\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eAs you can see, internally \u003cem\u003eModSecurity\u003c/em\u003e read the value that was stored under the key \u003cem\u003esample1\u003c/em\u003e instead of \u003cem\u003esample\u003c/em\u003e.\nThe same works for each key with matching prefix.\u003c/p\u003e\n\n\u003cp\u003eTo wrap up this somewhat too long digression, we abused undocumented behavior on purpose,\nand it increased the time it took to fetch data. Moreover, such fetching was redundant and nonsense because after fetching all those values we check only\nif the list contains a particular value.\nDue to the increased time of exclusive locks (acquired for the whole time of fetching data), the problem started to be noticeable. On the other hand, if\nwe had not abused it, we would unconsciously still be using buggy code that slowly degrades efficiency.\u003c/p\u003e\n\n","contentSnippet":"This article is a form of a public postmortem in which we would like to share our bumpy way of revealing the cause of a mysterious performance problem.\nBesides unveiling part of our technical stack based on open-source solutions, we also show how some false assumptions made such a bug triage process much\nharder.\nBesides all NOT TO DOs, you can find some exciting information about performance hunting and reproducing performance issues on a small scale.\nAs a perk, we prepared a repository where you can reproduce the problem and make yourself familiar with tools\nthat allowed us to confirm the cause.\nThe last part (lessons learned) is the most valuable if you prefer to learn from the mistakes of others.\nBefore you start reading, I must warn you that it will be a pretty long story, and following it without technical knowledge will be challenging.\nHowever, I tried my best to simplify the technicalities as much as possible. If, despite all discouragement, you are interested in solving technical mysteries,\ntake a sip of coffee and enjoy the story!\nClever: what have we built?\nA few years ago, we researched several platforms that can be used as transparent HTTP proxies capable of handling HTTP traffic to our services.\nWe needed a solution that would be able to inspect metadata and user data against any suspicious patterns and decide if such traffic should be processed or banned.\nWe chose nginx in concert with ModSecurity as a foundation for a more complex\necosystem.\nDuring increasing usage of such a stack, more than simple non-contextual rules was needed for more complex traffic analysis. One of the most crucial needs was providing the ability to store some contextual information connected\nwith session activity in order to better recognize malicious patterns.\nBy default, ModSecurity allows storing contextual information in memory. Such an approach is not very useful in connection with HTTP servers that utilize\nmultiprocessing as nginx does.\n\nHowever, we learned that ModSecurity can use LMDB as an internal fast storage for contextual information that could be\nshared between requests that come, for example, from the same IP address. LMDB approach ensures that contextual information stored by one nginx worker process\nis accessible by others.\n\nAt first glance, it looks great; however, in our case, we could not rely on information that is stored directly by ModSecurity.\nAs you can imagine, our setup is based on more than one server, so we have to be able to pass the same contextual information to each of them.\nMoreover, our algorithms that compute such information are complex and reach for more data than those available to ModSecurity.\nNevertheless, LMDB has one great advantage: it allows connecting to it from outside the nginx process and altering the contextual data that is available to\nModSecurity.\nWe built a mechanism that syncs contextual information from dedicated service to LMDB on each transparent proxy host.\nA simplified view of the architecture that allows computing and synchronizing contextual information is depicted below (dotted lines represent asynchronous flow):\n\nSuch a PoC gave us promising results regarding how fast the contextual information could be provided and how fast it was retrieved by ModSecurity.\nFinally, we rolled out the new approach, and everything worked smoothly for such a long time that we assumed it was a rock-solid solution.\nSurprised: once upon a time, the problem occurred for the first time\nWe noticed that response time from the client’s perspective soared, and the number of established connections also increased.\nSuch a correlation is not strange and was noticed many times in the past when the upstream that handles requests from proxy started responding slower.\nWhat was mysterious in that case was that there was no evidence of a problem on the upstream side besides the metric from nginx that was based on\n$upstream_connect_time.\nAccording to that metric, connecting to the upstream had slowed down significantly.\nHaving such a clue we blamed the part of infrastructure that is always to blame if no one knows what is happening.\nAs you probably guessed, we assumed that was a temporary network issue (from my experience, it is the best justification to not dig more profound).\nUnfortunately, the network issue started occurring quite often, at least a few times a week.\nStrangely enough, if we disable the transparent proxy, the network seems to be stable. Once again, we were convinced that someone from the network team devised blameless culture.\nHence, we started to verify a lot of new hypotheses, from those scary (cyber war, specialized attacks that are hidden in regular traffic) to those that bring\nsmiles upon our faces at least for today (backdoor left by Russian spy in the nginx source code).\nFalsification of those hypotheses that were at least partially backed up by data is a great story about how to teach engineers that correlation does not mean\ncausation.\nTurn gray: investigation\nLet me introduce a simplified view of our infrastructure to show where we gathered data.\n\nAll proxies measure at least the total processing time, including the time consumed in the proxy and the time that was consumed outside the proxy (passing the\nrequest to the next server in the above chain and waiting for the response).\nAnd those parts could be analyzed independently. Based on such measurements, we can simply compute the approximate overhead of the proxy as a difference between the whole\nrequest (green box) processing and the upstream (red box) waiting.\nHaving that, we were able to discover that the time consumed in transparent proxy was not increased significantly; only the time consumed outside of proxy was\nraised (red box).\nIt was one of the big lies that hindered revealing the truth. You can find a broader explanation of misleading metrics in the lessons learned part.\nAfter excluding network issues, and upstream issues, we were pretty sure that the problem lay in transparent proxy, and we started to doubt what we saw in\nmetrics.\nIt took a while, but finally, we were able to break our unwavering trust in data. Relying on data is encoded in our company DNA, so trusting it was a natural\ninstinct, unfortunately, a bad one in this case.\nHaving that, we could not rely on metrics provided by a transparent proxy. We were starting to try out other means to measure what was going on inside the\ntransparent proxy.\nBeing biased by network issues, we started gathering a lot of network-related information that only showed correlations with problems, but it did not give any\nclues about what was happening.\nIt was a time to use the more straightforward but quite heavy solution - access logs. However, logs are not very useful in giving the overall condition of the proxy;\nthey can be beneficial in analyzing singular problems.\nWhen the problems occurred again, we had some data that we could scrutinize. It turned out that an excellent idea was to log exact timestamps in\na very high resolution (which was not default).\nBelow, you can see a real example reproduced in the local environment (which will be described later).\nEach line contains nginx worker process id, timestamp, request_time, upstream_request_time, upstream_connect_time and the response status code.\n8.990 urt:8.990 uct:7.128 status:200\npid:41 t:1700163031.929 rt:12.348 urt:12.348 uct:3.358 status:200\npid:41 t:1700163031.929 rt:8.990 urt:8.990 uct:7.128 status:200\npid:41 t:1700163031.929 rt:8.990 urt:8.990 uct:7.128 status:200\n\n\nIt turned out that very often information was logged in bursts with exactly the same timestamp, what was even more intriguing was that some of such entries\nreported the exact same time as an $upstream_request_time or $upstream_connect_time.\nLet’s say that even if you are keen on paranormal mystery, odds, that’s the moment when the big red light should start blinking.\nIt definitely looks like something deterministic, not random. In the production realm, it was even more interesting; some bursts were connected with each other\nin some strange arithmetic way - for example:\nLet’s define bursts as:\nB1, B2, B3 - bursts\nB1.TS - timestamp of the burst\nB3.urt, B3.uct - upstream_request_time, upstream_connect_time - reported during last burst\nthen such relation was often noticed:\nB1.TS + B3.uct = B2.TS\nB1.TS + B3.urt = B3.TS\nTo better understand such a relation, let’s draw it:\n\nHaving a clue that there are extended periods of time when processing for a particular process is stuck, we wanted to know what was going on when processes hung.\nWe used strace to preview what particular system calls were made during such problems. The challenge was to connect to the process when problems occur,\nbut fortunately for us (and less fortunately for our users) we did not wait a long time for the subsequent instability, and we were able to gather strace data.\nIt reveals a large number of futex calls that indicated active waiting for some barer / mutex.\nConnecting the dots\nAs it was announced earlier, on that stage we have three actors. In order to better understand what was happening under the hood, let’s take a closer look at\neach of them.\nFirst of all nginx server, it uses\nan asynchronous event-driven approach to handling connections.\nIt means that a single nginx worker can process a large number of requests simultaneously basically because a significant part of processing a single request\nhappens outside the worker. Instead of actively waiting for a response, the nginx process uses such spare time to handle new incoming requests.\nEverything works very efficiently as long as each blocking (IO consuming) operation is handled in an asynchronous manner\n(the control is returned to event-loop).\nWhen such a requirement is unmet, the processing pace slows dramatically.\nThe second actor is the ModSecurity-nginx plugin. Nginx plugins allow extending the logic of the server by adding custom logic.\nModSecurity-nginx plugin allows inspecting requests processed by nginx against ModSecurity rules.\nSuch inspection can be considered a CPU-bound operation, so even if it is called in a synchronous manner, it does not break the concept of processing\nblocking operations asynchronously.\nThe third one is LMDB, a very efficient mapped DB that allows concurrent reads and exclusive writes. This database was used as a storage for ModSecurity\ncollections in order to share a state of collections between nginx workers.\nThe documentation and source code of this relatively small project were scrutinized many times as well as integration between ModSecurity and LMDB, but there\nwas no suspicion of what could be wrong.\nFinally, it turned out that the version of ModSecurity that we scrutinized was from the master branch. Moreover, the master branch contained an improvement related to misusing\nLMDB exclusive transactions while reading the data. Given that, we had a justified belief that issues came from exclusive transactions. It means that\nnginx workers probably block on acquiring locks.\n\nReproducing the issue in the isolated environment\nTo reproduce the issue, we decided to use a technique that we called a fancy name: exaggeration.\nReproducing a problem that occurs under high traffic that is handled by powerful servers is not simple on a local workstation.\nHowever, in this case, we had some clues and justified hypotheses about what could be wrong and what part we should focus on.\nLet me explain what exaggeration means when it comes to reproducing a problem.\nSome sort of problems can be easily noticeable when the probability of the occurrence of rare events is raised to a significant level.\nIf we have different ways to increase such probability, we can use them interchangeably. I am aware that it sounds like theoretical physics, but believe me or\nnot our problems are relatively easier to solve than those worked on by the guys at LHC.\nIn our case, we were pretty sure that the number of concurrent lookups on a single server to ModSecurity collections is a rare event.\nSo instead of loading a local server in enormous traffic we significantly increased the number of lookups to LMDB that were performed for each processed\nrequest.\nAll below information is based on data that can be gathered from the docker\nenvironment that was prepared as an integral part of this article.\nIt is worth mentioning that the environment can be built in one of two modes:\nregular that is way faster when it comes to building process\nprofiling that allows revealing the exact point where nginx processes hang based on profiling information from the kernel\nI would not like to deep dive into the profiling process based on kernel capabilities, but it is very cumbersome in a containerized environment because\nit breaks the isolation paradigm.\nMoreover, it is hard to prepare due to compatibility requirements between host and container libraries, header files and compilers.\nHowever, for this particular purpose it was tempting to use limited profiling tools based on eBPF that do not have such restricted\nrequirements.\nThe first part of the reproducing process is feeding LMDB collections\nwith sample data.\nWhen the collections are prepared, we can run performance tests using ab.\nBy increasing the number of lookups against LMDB collections during each request, it is relatively simple to reproduce low performance.\nAnalysis of access logs revealed the bursts mentioned in investigation part.\nThe more interesting part was finding the exact place that caused hangs. We started from the entry point (for call inspection of the request headers) to\nModSecurity from the nginx plugin, namely msc_process_request_headers function.\nWe helped ourselves with a tool trace-bpfcc provided within package bpfcc-tools.\nBesides all other features, that tool allows logging the exact point in time when a particular function is called and when it is finished.\nWhen we analyzed the time spent on such a function, we realized that was the exact place where we should dig deeper:\n3.981139 10842   10842   nginx           msc_process_request_headers start\n6.296459 10847   10847   nginx           msc_process_request_headers stop\n6.297111 10847   10847   nginx           msc_process_request_headers start\n6.309465 10844   10844   nginx           msc_process_request_headers stop\n6.310118 10844   10844   nginx           msc_process_request_headers start\n6.314868 10842   10842   nginx           msc_process_request_headers stop\n6.319024 10840   10840   nginx           msc_process_request_headers stop\n6.323392 10839   10839   nginx           msc_process_request_headers stop\n6.328587 10837   10837   nginx           msc_process_request_headers stop\n6.332937 10843   10843   nginx           msc_process_request_headers stop\n6.338358 10841   10841   nginx           msc_process_request_headers stop\n6.339536 10841   10841   nginx           msc_process_request_headers start\n6.349181 10845   10845   nginx           msc_process_request_headers stop\n6.367007 10838   10838   nginx           msc_process_request_headers stop\n6.368100 10838   10838   nginx           msc_process_request_headers start\n6.522875 10842   10842   nginx           msc_process_logging stop\n...\n\n\nPlease pay attention to highlighted lines related to PID=10842.\nIt turned out that the upstream responded within the required time (in the prepared environment, we are able to control the upstream latency by part of the URL path):\n6.522875 - 6.314868 ~ 200ms.\nHowever, the rest of time: 6.314868 - 3.981139 ~ 2.230s is consumed in msc_process_request_headers, when we search for the access log entry related to\nthis processing we can see:\n2.235 upstream_header_time:2.438 status:200 request:(GET /users/200/random?arg=unknown HTTP/1.0)\n\n\nI would not bore you with the whole process of tracking down but go directly to the LMDB mdb_txn_begin function that starts the LMDB transaction.\nThat function is called for each LMDB lookup, so there are way more calls than in previous profiling.\nHowever, I prepared a command that allows us to aggregate all time consumed while waiting in that function.\n\n# trace-bpfcc -t 'p:/usr/lib/x86_64-linux-gnu/liblmdb.so.0.0.0:mdb_txn_begin \"start\"' \\\n  'r:/usr/lib/x86_64-linux-gnu/liblmdb.so.0.0.0:mdb_txn_begin \"stop\"' 2\u003e/dev/null | tee /tmp/benchmark.log\n# cat /tmp/benchmark.log  | sort -n | awk '{if ($6 == \"start\") { data[$2] = $1} else { summary += 1000 * ($1 - data[$2]); print $1, $2, 1000 * ($1 - data[$2]) }} END {print \"Total time spent on locking: \", summary, \"ms,  number of calls: \", calls}'\n...\nTotal time spent on locking: 105891ms number of calls:  4064\n\n\nAs a comparison, we can execute the same profiling on version with a fix. Such a version is also available in a prepared environment.\n\ncat /tmp/benchmark.log  | sort -n | awk '{if ($6 == \"start\") { data[$2] = $1} else { calls++; summary += 1000 * ($1 - data[$2]); print $1, $2, 1000 * ($1 - data[$2]) }} END {print \"Total time spent on locking: \", summary, \"ms,  number of calls: \", calls}'\n...\nTotal time spent on locking: 1811.19ms  number of calls:  4064\n\n\nFixing the fix\nAs I have mentioned before, during the investigation we inspected source code that partially solves the problem.\nIt turned out that the fix merged to master does not work at all with the nginx plugin because of some initialization problems.\nThe PR that fixes the found problem has been merged and released in version 3.0.7 of ModSecurity.\nLessons learned\nMake sure that you inspect the exact version of the source code that you run\nOne of the struggles that we faced was scrutinizing the version of ModSecurity that had partially fixed the problem with exclusive read access to LMDB.\nFor sure, we had bad luck that the fix was available in master and not in the last released version that we then used, but at least we can confirm that the\ndevil is in the details.\nInstrumentation overhead\nWhen using such low level profiling methods you have to bear in mind that approach is quite invasive.\nIt means that such observation impacts the observed process.\nIt implies that it is hard to distinguish if we are observing root problems or just a consequence of harnessing very heavy instrumentation.\nSo, it is risky to draw conclusions from such observations.\nVerify your assumptions\nOur lack of understanding of how the particular phases of processing requests are computed led us to the false assumption that we could compute approximate\nModSecurity overhead by using simple arithmetic: request time - upstream time.\n\nIt was one of the biggest mistakes that hindered revealing the truth. It turned out that part of ModSecurity processing was included into upstream time,\nso the red part on above diagram also includes ModSecurity processing that is not part of establishing connection. As a form of self-punishment,\nwe extended the nginx-ModSecurity plugin in such a way that it allows measuring the overhead of\neach ModSecurity phase in a reliable way.\nLog timestamps\nIt may seem redundant because many logger collectors by default add their own timestamp of the moment when log entries are received in the collector.\nHowever, having a timestamp from the moment when the log is produced (without any delays) is crucial to reveal suspicious patterns/hangs on the producer\nside that can not be observed if timestamps are affected by random lags.\nDo (not) abuse undocumented behavior\nOne of the reasons that we faced this issue was abusing usage of ModSecurity collections.\nIn regular and documented usage such collections\nare considered to be simple key-value storage.\nWe discovered that under each key, we are able to store a list of values instead of a single value. If you consciously scanned the provided repository\n(especially ModSecurity rules) you could probably find a way to simulate a situation where multiple values are fetched while reading a single key.\nLet’s look at a rule that is available in the repository\n\nSecRule \u0026REQUEST_HEADERS:x-set-sample \"@eq 1\" \"phase:1,setvar:global.sample%{REQUEST_HEADERS:x-set-sample}=%{REQUEST_HEADERS:x-set-sample},log,deny,status:403,id:50,msg:'value of sample header is blocked',tag:'priority:1',tag:'action:deny'\"\n\n\nIf we call above rule with x-set-sample header with subsequent values 1, 2, 3. We can do that by making HTTP requests as below:\n\nworkstation # docker-compose exec nginx-before-fix bash\nnginx-with-lmdb # curl -I -H'x-set-sample: 1' localhost\nnginx-with-lmdb # curl -I -H'x-set-sample: 2' localhost\nnginx-with-lmdb # curl -I -H'x-set-sample: 3' localhost\n\n\nThen, we can expect that there will be stored three key-value pairs:\nglobals[sample1]=1\nglobals[sample2]=2\nglobals[sample3]=3\nIndeed, when we try to read LMDB in a very naive approach, values are stored the way we expect. We can see something like that:\n\nnginx-with-lmdb # strings /tmp/modsec-shared-collections\nsample::::sample11\nsample::::sample22\nsample::::sample33\n\n\nThe following rule that is interesting is supposed to check if a value under a particular key is equal to a query param.\nBasically, if the request contains query parameter arg=1, then we check if the value in the collection global, under the key sample is also “1”.\nIf the condition is met then the request will be blocked, which means that 403 status code will be returned.\n\nSecRule ARGS_GET \".*\" \"chain,phase:1,log,capture,deny,status:403,id:1001,msg:'value of param %{TX.0} is blocked',setvar:tx.param=%{TX.0}\"\n    SecRule global.sample \"@streq %{tx.param}\" \"t:none\"\n\n\nYou may be confused why we are reading the key sample that was never set.\nLet’s look what happens when we try to make a request with value 1 and -1.\nAs I described earlier, our intention was to check if global[sample] == 1.\n\nnginx-with-lmdb  # curl -I \"http://localhost/users/200/random?arg=1\"\nHTTP/1.1 403 Forbidden\nServer: nginx/1.22.0 (Ubuntu)\nDate: Fri, 17 Nov 2023 10:58:39 GMT\nContent-Type: text/html\nContent-Length: 162\nConnection: keep-alive\nnginx-with-lmdb\n\nnginx-with-lmdb  # curl -I \"http://localhost/users/200/random?arg=-1\"\nHTTP/1.1 200\nServer: nginx/1.22.0 (Ubuntu)\nDate: Fri, 17 Nov 2023 10:58:42 GMT\nContent-Type: application/json\nContent-Length: 79\nConnection: keep-alive\n\n\n\nQuite interesting? It turns out that the match is fulfilled for value “1”, and surprisingly there is a log that gives us an insight:\n\nnginx-with-lmdb  # tail -5 /var/log/nginx/modsec_audit.log\n---TL9qTmAS---H--\nModSecurity: Access denied with code 403 (phase 1). Matched \"Operator `StrEq' with parameter `' against variable `GLOBAL:sample::::sample1' (Value: `1' ) [file \"/etc/nginx/rules/rules.conf\"] [line \"32\"] [id \"1001\"] [rev \"\"] [msg \"value of param 1 is blocked\"] [data \"\"] [severity \"0\"] [ver \"\"] [maturity \"0\"] [accuracy \"0\"] [hostname \"127.0.0.1\"] [uri \"/users/200/random\"] [unique_id \"1700218719\"] [ref \"o0,1v27,1\"]\n\n---TL9qTmAS---Z--\n\n\nAs you can see, internally ModSecurity read the value that was stored under the key sample1 instead of sample.\nThe same works for each key with matching prefix.\nTo wrap up this somewhat too long digression, we abused undocumented behavior on purpose,\nand it increased the time it took to fetch data. Moreover, such fetching was redundant and nonsense because after fetching all those values we check only\nif the list contains a particular value.\nDue to the increased time of exclusive locks (acquired for the whole time of fetching data), the problem started to be noticeable. On the other hand, if\nwe had not abused it, we would unconsciously still be using buggy code that slowly degrades efficiency.","guid":"https://blog.allegro.tech/2023/12/lmdb-postmortem.html","categories":["tech","postmortem","nginx","libmodsecurity","LMDB","performance bottleneck","open source","debugging","profiling"],"isoDate":"2023-12-13T23:00:00.000Z"}],"jobs":[{"id":"743999966382487","name":"Integration Engineer","uuid":"49759cad-9c60-4bdb-b42f-c797845c2456","jobAdId":"22b63dc3-61fa-488b-b1cd-ef8588ccfe28","defaultJobAd":true,"refNumber":"REF2138N","company":{"identifier":"Allegro","name":"Allegro"},"releasedDate":"2024-02-08T09:32:28.123Z","location":{"city":"Warsaw, Poznań","country":"pl","remote":false},"industry":{"id":"internet","label":"Internet"},"department":{"id":"2572770","label":"IT - Software Development"},"function":{"id":"information_technology","label":"Information Technology"},"typeOfEmployment":{"id":"permanent","label":"Full-time"},"experienceLevel":{"id":"mid_senior_level","label":"Mid-Senior Level"},"customField":[{"fieldId":"58c15608e4b01d4b19ddf790","fieldLabel":"Recruitment Process","valueId":"ed4682c7-33c9-41c2-8d13-428ed39046f5","valueLabel":"Tech. Engineer - IC"},{"fieldId":"6406f92e638cbb2f415a94a9","fieldLabel":"Job Area","valueId":"e8731ea4-48a9-476d-ab1d-9a40eb3426f1","valueLabel":"Technology"},{"fieldId":"COUNTRY","fieldLabel":"Country","valueId":"pl","valueLabel":"Poland"},{"fieldId":"61583054f15cea434e0be36f","fieldLabel":"Career Level","valueId":"3976147c-fe25-42a8-8c97-78273250960b","valueLabel":"4"},{"fieldId":"58c13159e4b01d4b19ddf729","fieldLabel":"Department","valueId":"2572770","valueLabel":"IT - Software Development"},{"fieldId":"58c13159e4b01d4b19ddf728","fieldLabel":"Brands","valueId":"4ccb4fab-6c3f-4ed0-9140-8533fe17447f","valueLabel":"Allegro sp. z o.o."},{"fieldId":"61582f70e72a6b6d239c9857","fieldLabel":"Area","valueId":"76599a72-f283-4550-9303-52e2e0eb6e32","valueLabel":"Technology"}],"visibility":"PUBLIC","ref":"https://api.smartrecruiters.com/v1/companies/allegro/postings/743999966382487","creator":{"name":"Wiktoria Mitruk"},"language":{"code":"en","label":"English","labelNative":"English (US)"}},{"id":"743999964663501","name":"Lider zespołu Pierwszej Linii Wsparcia IT","uuid":"20c2cd4e-ac08-4804-b3fa-8e14ff6ff5f1","jobAdId":"8c8ac7fb-389f-44ea-a87f-73b631c77ebe","defaultJobAd":true,"refNumber":"REF4776P","company":{"identifier":"Allegro","name":"Allegro"},"releasedDate":"2024-02-01T13:49:32.534Z","location":{"city":"Warsaw","country":"pl","remote":false},"industry":{"id":"internet","label":"Internet"},"department":{"id":"2572770","label":"IT - Software Development"},"function":{"id":"information_technology","label":"Information Technology"},"typeOfEmployment":{"id":"permanent","label":"Full-time"},"experienceLevel":{"id":"mid_senior_level","label":"Mid-Senior Level"},"customField":[{"fieldId":"61583054f15cea434e0be36f","fieldLabel":"Career Level","valueId":"26b58095-3c5f-4596-937f-27547fb80b07","valueLabel":"5"},{"fieldId":"61582f70e72a6b6d239c9857","fieldLabel":"Area","valueId":"76599a72-f283-4550-9303-52e2e0eb6e32","valueLabel":"Technology"},{"fieldId":"58c15608e4b01d4b19ddf790","fieldLabel":"Recruitment Process","valueId":"63c62385-eb34-4cd3-a7ad-a2479d862d05","valueLabel":"Technology Manager (CL 4-6)"},{"fieldId":"6406f92e638cbb2f415a94a9","fieldLabel":"Job Area","valueId":"e8731ea4-48a9-476d-ab1d-9a40eb3426f1","valueLabel":"Technology"},{"fieldId":"COUNTRY","fieldLabel":"Country","valueId":"pl","valueLabel":"Poland"},{"fieldId":"58c13159e4b01d4b19ddf729","fieldLabel":"Department","valueId":"2572770","valueLabel":"IT - Software Development"},{"fieldId":"58c13159e4b01d4b19ddf728","fieldLabel":"Brands","valueId":"f7af19b5-5d6a-43a0-9a2b-1e99277515c7","valueLabel":"Opennet.pl Sp. z o.o."}],"visibility":"PUBLIC","ref":"https://api.smartrecruiters.com/v1/companies/allegro/postings/743999964663501","creator":{"name":"Katarzyna Faber-Lemmen"},"language":{"code":"en","label":"English","labelNative":"English (US)"}},{"id":"743999963121453","name":"Senior Big Data Engineer (Scala) - Data \u0026 AI","uuid":"89bff7ef-3f13-49e4-9dd3-8f7eeff0c367","jobAdId":"deda3947-a80a-4ee5-afb7-d478820f54eb","defaultJobAd":true,"refNumber":"REF3096X","company":{"identifier":"Allegro","name":"Allegro"},"releasedDate":"2024-01-26T09:09:28.402Z","location":{"city":"Warsaw","country":"pl","remote":false},"industry":{"id":"internet","label":"Internet"},"department":{"id":"2572770","label":"IT - Software Development"},"function":{"id":"information_technology","label":"Information Technology"},"typeOfEmployment":{"id":"permanent","label":"Full-time"},"experienceLevel":{"id":"mid_senior_level","label":"Mid-Senior Level"},"customField":[{"fieldId":"61583054f15cea434e0be36f","fieldLabel":"Career Level","valueId":"3c97f53f-19c2-4a25-9eb1-513f9fb38b80","valueLabel":"3-5"},{"fieldId":"61582f70e72a6b6d239c9857","fieldLabel":"Area","valueId":"76599a72-f283-4550-9303-52e2e0eb6e32","valueLabel":"Technology"},{"fieldId":"58c15608e4b01d4b19ddf790","fieldLabel":"Recruitment Process","valueId":"ed4682c7-33c9-41c2-8d13-428ed39046f5","valueLabel":"Tech. Engineer - IC"},{"fieldId":"6406f92e638cbb2f415a94a9","fieldLabel":"Job Area","valueId":"e8731ea4-48a9-476d-ab1d-9a40eb3426f1","valueLabel":"Technology"},{"fieldId":"COUNTRY","fieldLabel":"Country","valueId":"pl","valueLabel":"Poland"},{"fieldId":"58c13159e4b01d4b19ddf729","fieldLabel":"Department","valueId":"2572770","valueLabel":"IT - Software Development"},{"fieldId":"58c13159e4b01d4b19ddf728","fieldLabel":"Brands","valueId":"4ccb4fab-6c3f-4ed0-9140-8533fe17447f","valueLabel":"Allegro sp. z o.o."}],"visibility":"PUBLIC","ref":"https://api.smartrecruiters.com/v1/companies/allegro/postings/743999963121453","creator":{"name":"Natalia Glińska"},"language":{"code":"en-GB","label":"English (UK)","labelNative":"English (UK)"}},{"id":"743999963120633","name":"Senior Big Data Engineer (Scala/Python) - Data\u0026AI","uuid":"5b1abdbd-2ad1-4ece-8461-1557433e1284","jobAdId":"7add9e2b-573d-4aa2-ac48-07efd8bf15f0","defaultJobAd":true,"refNumber":"REF4718O","company":{"identifier":"Allegro","name":"Allegro"},"releasedDate":"2024-01-26T09:05:14.751Z","location":{"city":"Warsaw, Poznań","country":"pl","remote":false},"industry":{"id":"internet","label":"Internet"},"department":{"id":"2572770","label":"IT - Software Development"},"function":{"id":"engineering","label":"Engineering"},"typeOfEmployment":{"id":"permanent","label":"Full-time"},"experienceLevel":{"id":"executive","label":"Executive"},"customField":[{"fieldId":"58c15608e4b01d4b19ddf790","fieldLabel":"Recruitment Process","valueId":"ed4682c7-33c9-41c2-8d13-428ed39046f5","valueLabel":"Tech. Engineer - IC"},{"fieldId":"6406f92e638cbb2f415a94a9","fieldLabel":"Job Area","valueId":"e8731ea4-48a9-476d-ab1d-9a40eb3426f1","valueLabel":"Technology"},{"fieldId":"COUNTRY","fieldLabel":"Country","valueId":"pl","valueLabel":"Poland"},{"fieldId":"61583054f15cea434e0be36f","fieldLabel":"Career Level","valueId":"3c97f53f-19c2-4a25-9eb1-513f9fb38b80","valueLabel":"3-5"},{"fieldId":"58c13159e4b01d4b19ddf729","fieldLabel":"Department","valueId":"2572770","valueLabel":"IT - Software Development"},{"fieldId":"58c13159e4b01d4b19ddf728","fieldLabel":"Brands","valueId":"4ccb4fab-6c3f-4ed0-9140-8533fe17447f","valueLabel":"Allegro sp. z o.o."},{"fieldId":"61582f70e72a6b6d239c9857","fieldLabel":"Area","valueId":"76599a72-f283-4550-9303-52e2e0eb6e32","valueLabel":"Technology"}],"visibility":"PUBLIC","ref":"https://api.smartrecruiters.com/v1/companies/allegro/postings/743999963120633","creator":{"name":"Natalia Glińska"},"language":{"code":"en","label":"English","labelNative":"English (US)"}},{"id":"743999962882199","name":"Software Engineer (.NET) - Product Team - Allegro Pay","uuid":"eb288644-fc07-4e3d-972d-67861e0b1688","jobAdId":"57040109-b330-495b-aa0d-247de3ea2066","defaultJobAd":false,"refNumber":"REF4748E","company":{"identifier":"Allegro","name":"Allegro"},"releasedDate":"2024-01-25T13:11:38.019Z","location":{"city":"Warsaw","region":"Masovian Voivodeship","country":"pl","remote":false,"latitude":"52.2296756","longitude":"21.0122287"},"industry":{"id":"internet","label":"Internet"},"department":{"id":"2572770","label":"IT - Software Development"},"function":{"id":"information_technology","label":"Information Technology"},"typeOfEmployment":{"id":"permanent","label":"Full-time"},"experienceLevel":{"id":"mid_senior_level","label":"Mid-Senior Level"},"customField":[{"fieldId":"61583054f15cea434e0be36f","fieldLabel":"Career Level","valueId":"3c97f53f-19c2-4a25-9eb1-513f9fb38b80","valueLabel":"3-5"},{"fieldId":"61582f70e72a6b6d239c9857","fieldLabel":"Area","valueId":"76599a72-f283-4550-9303-52e2e0eb6e32","valueLabel":"Technology"},{"fieldId":"58c15608e4b01d4b19ddf790","fieldLabel":"Recruitment Process","valueId":"ed4682c7-33c9-41c2-8d13-428ed39046f5","valueLabel":"Tech. Engineer - IC"},{"fieldId":"6406f92e638cbb2f415a94a9","fieldLabel":"Job Area","valueId":"e8731ea4-48a9-476d-ab1d-9a40eb3426f1","valueLabel":"Technology"},{"fieldId":"COUNTRY","fieldLabel":"Country","valueId":"pl","valueLabel":"Poland"},{"fieldId":"58c13159e4b01d4b19ddf729","fieldLabel":"Department","valueId":"2572770","valueLabel":"IT - Software Development"},{"fieldId":"58c13159e4b01d4b19ddf728","fieldLabel":"Brands","valueId":"9c8396d4-11a6-443c-897c-15f29221a3fd","valueLabel":"Allegro Pay sp. z o.o."}],"visibility":"PUBLIC","ref":"https://api.smartrecruiters.com/v1/companies/allegro/postings/743999962882199","creator":{"name":"Wiktoria Mitruk"},"language":{"code":"en","label":"English","labelNative":"English (US)"}}],"events":[{"created":1702979844000,"duration":187200000,"id":"298027809","name":"UX Research Confetti - IV edycja","date_in_series_pattern":false,"status":"upcoming","time":1716202800000,"local_date":"2024-05-20","local_time":"13:00","updated":1702985612000,"utc_offset":7200000,"waitlist_count":0,"yes_rsvp_count":22,"venue":{"id":27549223,"name":"Allegro Warsaw Office","lat":52.23224639892578,"lon":20.992111206054688,"repinned":true,"address_1":"ul. Żelazna 51/53","city":"Warszawa","country":"pl","localized_country_name":"Poland"},"is_online_event":false,"eventType":"PHYSICAL","group":{"created":1425052059000,"name":"allegro Tech","id":18465254,"join_mode":"open","lat":52.2599983215332,"lon":21.020000457763672,"urlname":"allegrotech","who":"Techs","localized_location":"Warsaw, Poland","state":"","country":"pl","region":"en_US","timezone":"Europe/Warsaw"},"link":"https://www.meetup.com/allegrotech/events/298027809/","description":"**🎉 Przedstawiamy 4. edycję UX Research Confetti - bezpłatną, polską konferencję poświęconą badaniom UX, organizowaną przez zespół badaczy z Allegro.** ✨ Konferencja odbędzie się w…","visibility":"public","member_pay_fee":false},{"created":1701092071000,"duration":7200000,"id":"297614064","name":"Allegro Tech Talks #40 - Testy: dynamiczne dashboardy \u0026 optymalizacja pracy","date_in_series_pattern":false,"status":"past","time":1701968400000,"local_date":"2023-12-07","local_time":"18:00","updated":1701978668000,"utc_offset":3600000,"waitlist_count":0,"yes_rsvp_count":13,"venue":{"id":27528185,"name":"Allegro Kraków Office","lat":50.06517028808594,"lon":19.951927185058594,"repinned":true,"address_1":"Lubicz Park A (5 piętro)","address_2":"ul. Lubicz 23","city":"Kraków","country":"pl","localized_country_name":"Poland"},"is_online_event":false,"eventType":"PHYSICAL","group":{"created":1425052059000,"name":"allegro Tech","id":18465254,"join_mode":"open","lat":52.2599983215332,"lon":21.020000457763672,"urlname":"allegrotech","who":"Techs","localized_location":"Warsaw, Poland","state":"","country":"pl","region":"en_US","timezone":"Europe/Warsaw"},"link":"https://www.meetup.com/allegrotech/events/297614064/","description":"**➡ Rejestracja:** [https://app.evenea.pl/event/allegro-tech-talk-40/](https://app.evenea.pl/event/allegro-tech-talk-40/) Jeszcze przed świętami zapraszamy Was na #40 wydarzenie z serii Allegro Tech Talk, podczas których dzielimy się wiedzą, wzajemnie inspirujemy oraz integrujemy…","how_to_find_us":"Biuro Allegro znajduje się w Centrum Biurowym Lubicz. \n\nObok budynku znajduje się przystanek Lubicz. Przy przystanku zatrzymują się tramwaje 2, 4, 10, 14, 20, 52, 62, 64 oraz autobusy: 124, 152, 424, 601, 611, 662, 664.\n\n","visibility":"public","member_pay_fee":false},{"created":1700495058000,"duration":7200000,"id":"297480100","name":"Allegro Tech Talks #39 - Big Data: o podejściu do pracy z danymi","date_in_series_pattern":false,"status":"past","time":1701363600000,"local_date":"2023-11-30","local_time":"18:00","updated":1701377876000,"utc_offset":3600000,"waitlist_count":0,"yes_rsvp_count":50,"venue":{"id":27549223,"name":"Allegro Warsaw Office","lat":52.23224639892578,"lon":20.992111206054688,"repinned":true,"address_1":"ul. Żelazna 51/53","city":"Warszawa","country":"pl","localized_country_name":"Poland"},"is_online_event":false,"eventType":"PHYSICAL","group":{"created":1425052059000,"name":"allegro Tech","id":18465254,"join_mode":"open","lat":52.2599983215332,"lon":21.020000457763672,"urlname":"allegrotech","who":"Techs","localized_location":"Warsaw, Poland","state":"","country":"pl","region":"en_US","timezone":"Europe/Warsaw"},"link":"https://www.meetup.com/allegrotech/events/297480100/","description":"**Rejestracja: [https://app.evenea.pl/event/allegro-tech-talk-39/](https://app.evenea.pl/event/allegro-tech-talk-39/)** Bądźcie z nami podczas #39 wydarzenia z serii **Allegro Tech Talk**, podczas których dzielimy się wiedzą, wzajemnie inspirujemy oraz integrujemy podczas rozmów przy…","how_to_find_us":"Biuro Allegro znajduje się w kompleksie Fabryki Norblina (wejście Plater 3 od ul. Żelaznej). W niedalekiej odległości znajdują się dwie stacje metra linii M2, Rondo Daszyńskiego i Rondo ONZ. Autobusy, tramwaje i inne środki transportu sprawdzisz też na: https://fabrykanorblina.pl/dojazd","visibility":"public","member_pay_fee":false},{"created":1685697967000,"duration":7200000,"id":"293929321","name":"Allegro Tech Talks #38 - Mobile: o iOS bez spinki","date_in_series_pattern":false,"status":"past","time":1686760200000,"local_date":"2023-06-14","local_time":"18:30","updated":1686773845000,"utc_offset":7200000,"waitlist_count":0,"yes_rsvp_count":17,"venue":{"id":27549223,"name":"Allegro Warsaw Office","lat":0,"lon":0,"repinned":true,"address_1":"ul. Żelazna 51/53","city":"Warszawa","country":"pl","localized_country_name":"Poland"},"is_online_event":false,"eventType":"PHYSICAL","group":{"created":1425052059000,"name":"allegro Tech","id":18465254,"join_mode":"open","lat":52.2599983215332,"lon":21.020000457763672,"urlname":"allegrotech","who":"Techs","localized_location":"Warsaw, Poland","state":"","country":"pl","region":"en_US","timezone":"Europe/Warsaw"},"link":"https://www.meetup.com/allegrotech/events/293929321/","description":"**➡ Rejestracja:** [https://app.evenea.pl/event/allegro-tech-talk-38/](https://app.evenea.pl/event/allegro-tech-talk-38/) Ostatnie przed przerwą wakacyjną, stacjonarne spotkanie z cyklu Allegro Tech Talks, na których dzielimy się wiedzą, wzajemnie inspirujemy oraz integrujemy podczas rozmów…","how_to_find_us":"Biuro Allegro znajduje się w kompleksie Fabryki Norblina (wejście Plater 3 od ul. Żelaznej). W niedalekiej odległości znajdują się dwie stacje metra linii M2, Rondo Daszyńskiego i Rondo ONZ. Autobusy, tramwaje i inne środki transportu sprawdzisz też na: https://fabrykanorblina.pl/dojazd","visibility":"public","member_pay_fee":false}],"podcasts":[{"title":"Programowanie - co liczy się w nim najbardziej?","link":"https://podcast.allegro.tech/programowanie-co-liczy-sie-w-nim-najbardziej/","pubDate":"Thu, 01 Feb 2024 00:00:00 GMT","content":"Jaką ścieżkę trzeba przejść, aby dobrze programować? Gdzie zdobywać wiedzę, doświadczenie i szlifować swoje umiejętności? Ile czasu potrzeba aby nabrać doświadczenia i jak zadbać o swój dalszy rozwój? Na czym w praktyce polegają role (Senior) Software Engineer oraz Engineering Manager w Allegro i kto najlepiej sprawdza się w naszych zespołach? Posłuchajcie nowego odcinka Allegro Tech Podcast z udziałem Rafała Schmidta (Senior Software Engineer) i Waldemara Panasa (Manager, Engineering) z Allegro.","contentSnippet":"Jaką ścieżkę trzeba przejść, aby dobrze programować? Gdzie zdobywać wiedzę, doświadczenie i szlifować swoje umiejętności? Ile czasu potrzeba aby nabrać doświadczenia i jak zadbać o swój dalszy rozwój? Na czym w praktyce polegają role (Senior) Software Engineer oraz Engineering Manager w Allegro i kto najlepiej sprawdza się w naszych zespołach? Posłuchajcie nowego odcinka Allegro Tech Podcast z udziałem Rafała Schmidta (Senior Software Engineer) i Waldemara Panasa (Manager, Engineering) z Allegro.","guid":"https://podcast.allegro.tech/programowanie-co-liczy-sie-w-nim-najbardziej/","isoDate":"2024-02-01T00:00:00.000Z"},{"title":"MBox: server-driven UI dla aplikacji mobilnych","link":"https://podcast.allegro.tech/mbox-server-driven-ui-dla-aplikacji-mobilnych/","pubDate":"Thu, 16 Nov 2023 00:00:00 GMT","content":"Czym jest i jak powstał MBox: wewnętrzna platforma server-driven UI dla aplikacji mobilnych w Allegro? Skąd wziął się pomysł na to rozwiązanie i na jakie bolączki odpowiada? Dlaczego zdecydowaliśmy się na budowanie tego typu rozwiązania in-house i z jakimi wyzwaniami mierzyliśmy się w procesie tworzenia? Co wyróżnia zespoły pracujące nad tym narzędziem i jak pracuje im się bez Product Ownera? Posłuchajcie siódmego odcinka Allegro Tech Podcast z udziałem Pauliny Sadowskiej i Tomasza Gębarowskiego - Managerów w obszarze Technical Platform Services w Allegro.","contentSnippet":"Czym jest i jak powstał MBox: wewnętrzna platforma server-driven UI dla aplikacji mobilnych w Allegro? Skąd wziął się pomysł na to rozwiązanie i na jakie bolączki odpowiada? Dlaczego zdecydowaliśmy się na budowanie tego typu rozwiązania in-house i z jakimi wyzwaniami mierzyliśmy się w procesie tworzenia? Co wyróżnia zespoły pracujące nad tym narzędziem i jak pracuje im się bez Product Ownera? Posłuchajcie siódmego odcinka Allegro Tech Podcast z udziałem Pauliny Sadowskiej i Tomasza Gębarowskiego - Managerów w obszarze Technical Platform Services w Allegro.","guid":"https://podcast.allegro.tech/mbox-server-driven-ui-dla-aplikacji-mobilnych/","isoDate":"2023-11-16T00:00:00.000Z"},{"title":"O chatbotach i ich wpływie na Allegro","link":"https://podcast.allegro.tech/o-chatbotach-i-ich-wplywie-na-allegro/","pubDate":"Wed, 11 Oct 2023 00:00:00 GMT","content":"Jakie procesy automatyzujemy w Allegro i co warto o nich wiedzieć w kontekście obszaru Customer Experience? W czym pomagają nam chatboty, jak je rozwijamy i dbamy o ich jakość? Kim są Allina oraz Albert i co mają wspólnego z automatyzacją? Za jakie rozwiązania otrzymaliśmy nagrodę hiperautomatyzacji? O tym wszystkim posłuchacie w odcinku z udziałem Rafała Gajewskiego - Managera w obszarze IT Services w Allegro.","contentSnippet":"Jakie procesy automatyzujemy w Allegro i co warto o nich wiedzieć w kontekście obszaru Customer Experience? W czym pomagają nam chatboty, jak je rozwijamy i dbamy o ich jakość? Kim są Allina oraz Albert i co mają wspólnego z automatyzacją? Za jakie rozwiązania otrzymaliśmy nagrodę hiperautomatyzacji? O tym wszystkim posłuchacie w odcinku z udziałem Rafała Gajewskiego - Managera w obszarze IT Services w Allegro.","guid":"https://podcast.allegro.tech/o-chatbotach-i-ich-wplywie-na-allegro/","isoDate":"2023-10-11T00:00:00.000Z"},{"title":"O roli analityków biznesowych w Allegro","link":"https://podcast.allegro.tech/o-roli-analitykow-biznesowych-w-allegro/","pubDate":"Thu, 24 Aug 2023 00:00:00 GMT","content":"Czym zajmują się analitycy danych w Allegro i za jakie projekty odpowiadają? Z jakich rodzajów danych i narzędzi korzystają w codziennej pracy? Jakie (przykładowe) obszary tematyczne pokrywamy danymi, które analizujemy w Allegro? Jakich umiejętności szukamy u analityków biznesowych w Allegro i jak można do nas dołączyć? O roli analityków biznesowych i pracy w skali Allegro opowiadają Jakub Król i Mateusz Falkowski - Senior Data Analysts w Allegro.","contentSnippet":"Czym zajmują się analitycy danych w Allegro i za jakie projekty odpowiadają? Z jakich rodzajów danych i narzędzi korzystają w codziennej pracy? Jakie (przykładowe) obszary tematyczne pokrywamy danymi, które analizujemy w Allegro? Jakich umiejętności szukamy u analityków biznesowych w Allegro i jak można do nas dołączyć? O roli analityków biznesowych i pracy w skali Allegro opowiadają Jakub Król i Mateusz Falkowski - Senior Data Analysts w Allegro.","guid":"https://podcast.allegro.tech/o-roli-analitykow-biznesowych-w-allegro/","isoDate":"2023-08-24T00:00:00.000Z"}]},"__N_SSG":true},"page":"/","query":{},"buildId":"6B0cNhf9dW7YpszdKXfRE","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>